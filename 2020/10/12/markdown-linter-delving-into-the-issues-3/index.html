<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Jack De Winter" />

        <meta name="description" content="Summary¶ In my last article, I continued the long journey to remove items from the project’s issues list. Still without a better title than the equivalent of “chapter 3”, this article details more pruning of that list. Introduction¶ While this process feels like just one of many stops on …
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="markdown linter, core linter, Software Quality, " />

<meta property="og:title" content="Markdown Linter - Delving Into the Issues - 3 "/>
<meta property="og:url" content="https://jackdewinter.github.io/2020/10/12/markdown-linter-delving-into-the-issues-3/" />
<meta property="og:description" content="Summary¶ In my last article, I continued the long journey to remove items from the project’s issues list. Still without a better title than the equivalent of “chapter 3”, this article details more pruning of that list. Introduction¶ While this process feels like just one of many stops on …" />
<meta property="og:site_name" content="Jack&#39;s Digital Workbench" />
<meta property="og:article:author" content="Jack De Winter" />
<meta property="og:article:published_time" content="2020-10-12T00:00:00-07:00" />
<meta name="twitter:title" content="Markdown Linter - Delving Into the Issues - 3 ">
<meta name="twitter:description" content="Summary¶ In my last article, I continued the long journey to remove items from the project’s issues list. Still without a better title than the equivalent of “chapter 3”, this article details more pruning of that list. Introduction¶ While this process feels like just one of many stops on …">

        <title>Markdown Linter - Delving Into the Issues - 3  · Jack&#39;s Digital Workbench
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://jackdewinter.github.io/theme/css/style.min.css?bec7d543">

        <link href="https://jackdewinter.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack&#39;s Digital Workbench - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://jackdewinter.github.io/"><span class=site-name>Jack's Digital Workbench</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jackdewinter.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://jackdewinter.github.io/categories">Categories</a></li>
                                <li ><a href="https://jackdewinter.github.io/tags">Tags</a></li>
                                <li ><a href="https://jackdewinter.github.io/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://jackdewinter.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://jackdewinter.github.io/2020/10/12/markdown-linter-delving-into-the-issues-3/">
                Markdown Linter - Delving Into the Issues - 3
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-the-audience-for-this-article">What Is the Audience for This Article?</a></li>
<li><a href="#small-cleanups-and-large-aspirations">Small Cleanups and Large Aspirations</a></li>
<li><a href="#changing-that-cost-benefit-ratio">Changing That Cost-Benefit Ratio</a></li>
<li><a href="#new-tests-first-batch">New Tests - First Batch</a><ul>
<li><a href="#new-tests-links-and-newlines">New Tests - Links and Newlines</a></li>
<li><a href="#adding-in-replacements-and-backslashes">Adding in Replacements and Backslashes</a></li>
</ul>
</li>
<li><a href="#addressing-the-issues">Addressing the Issues</a><ul>
<li><a href="#breaking-things-down">Breaking Things Down</a></li>
<li><a href="#show-me-this-in-practice">Show Me This in Practice</a></li>
<li><a href="#summary_1">Summary</a></li>
<li><a href="#adjusting-the-consistency-checks">Adjusting the Consistency Checks</a></li>
<li><a href="#leaving-something-undone">Leaving Something Undone</a></li>
</ul>
</li>
<li><a href="#what-was-my-experience-so-far">What Was My Experience So Far?</a></li>
<li><a href="#what-is-next">What is Next?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>In my
<a href="https://jackdewinter.github.io/2020/10/05/markdown-linter-delving-into-the-issues-2/">last article</a>,
I continued the long journey to remove items from the project’s issues list.  Still
without a better title than the equivalent of “chapter 3”, this article details more
pruning of that list.</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">¶</a></h2>
<p>While this process feels like just one of many stops on a long journey, I do find
that I am finding this part of the project particularly satisfying.  Sure, I am fixing
issues that I have found along the
way, but that is a good thing.  I am not finding a lot of “I need to redesign this from
scratch” issues, just a lot of “wow, did I forget to…” or “wow, I didn’t think to
test the combination where…” issues.  And I find that observation both calming and a
boost to my confidence.</p>
<p>Is it taking up time? Sure.  Would I like to get back to implementing and adding rules?
Yup.  But, with each
issue that I resolve, my confidence that this is the right course of action increases.
The project’s collection of different Markdown documents and test data just keeps on
growing.  As I manually check each scenario test out against what is expected,
verify the output HTML against the reference implementation, and have consistency checks
in place, any new issues just give me that much more information that the project is
working properly.</p>
<p>Mind you, properly does not mean it is perfect, just that it is headed in the right
direction.</p>
<h2 id="what-is-the-audience-for-this-article">What Is the Audience for This Article?<a class="headerlink" href="#what-is-the-audience-for-this-article" title="Permanent link">¶</a></h2>
<p>While detailed more eloquently in
<a href="https://jackdewinter.github.io/2020/04/05/what-is-the-audience-for-my-blog/#what-is-the-audience-for-my-blog">this article</a>,
my goal for this technical article is to focus on the reasoning behind my solutions,
rather that the solutions themselves.  For a full record of the solutions presented in
this article, please go to this project’s GitHub repository and consult the
commits
<a href="https://github.com/jackdewinter/pymarkdown/commit/d3780447b4b71153a6a2a259f2512483d8c153a0">21 Sep 2020</a>
and
<a href="https://github.com/jackdewinter/pymarkdown/commit/f3cc298745e56b435f4962965502a00d281eb2dc">27 Sep 2020</a>.</p>
<h2 id="small-cleanups-and-large-aspirations">Small Cleanups and Large Aspirations<a class="headerlink" href="#small-cleanups-and-large-aspirations" title="Permanent link">¶</a></h2>
<p>The first commit in this week’s work was an easy one.  During the writing of the
article on that week’s
work, I realized two things: I wasn’t taking <code>show_debug</code> arguments out of tests
after debugging,
and test <code>test_raw_html_632</code> needed a child test with a bit of change, creating
<code>test_raw_html_632a</code>.  Both changes were accomplished within 15 minutes, so
they were good cleanup issues. But after that, I was left with an interesting problem
to deal with:  Newlines and various inline elements.</p>
<p>There were a couple of issues that I wanted to deal with:</p>
<div class="highlight"><pre><span></span>- HTML and Fenced Blocks and better handling of capturing newlines to avoid counting token height
- verify which inlines cannot contain newlines and verify with line/col
  - autolinks
  - raw_html
</pre></div>
<p>To break these issues out a bit more, I want to make sure I convey the difference
between the PyMarkdown project and a normal Markdown parser.  As the project’s
focus is to be a Markdown linter, there are additional requirements imposed that are tested with every commit.  Those requirements are that
any element of interest, once translated into a token to represent it, must include the
line number and column number of the original Markdown.  While the examples provided
by the GFM specification are great for testing a parser, they fall a bit short for
testing a linter.</p>
<p>To be clear, that is not a problem with the GFM specification.  The section called
<a href="https://github.github.com/gfm/#about-this-document">About this document</a>
specifically starts with:</p>
<blockquote>
<p>This document attempts to specify Markdown syntax unambiguously. It contains many examples with side-by-side Markdown and HTML.</p>
</blockquote>
<p>The specification specifically deals with syntax and how a given Markdown document
should be represented by HTML.  Full stop.  It is this project’s additional requirement
of being able to examine the tokens that are then translated to HTML that add that
extra level of complexity.  And that extra complexity comes with a cost.</p>
<h2 id="changing-that-cost-benefit-ratio">Changing That Cost-Benefit Ratio<a class="headerlink" href="#changing-that-cost-benefit-ratio" title="Permanent link">¶</a></h2>
<p>The cost of this complexity has not been large until this point.  Hitting an issue
where I thought needed
some extra testing, I created a child test by adding a letter to the end of the parent
scenario test and made the required variations to the child test for that situation.
In cases where there were more variations, I introduced multiple child scenarios,
each one testing something specific.  This approach did not significantly increase
the complexity of the tests, due to its focused nature.</p>
<p>But with this week’s work, it was different.  Instead of having one test here to verify
and one test there to verify, I wanted to make sure that all inline tokens that
followed a given pattern were being handled properly.  I wanted to have one central
location where I could look to make sure inline tokens and newline characters were
being handled properly.  This was different in that its scope was going to make it
complex.</p>
<h2 id="new-tests-first-batch">New Tests - First Batch<a class="headerlink" href="#new-tests-first-batch" title="Permanent link">¶</a></h2>
<p>The first batch of these new scenario tests were the group from
<code>test_paragraph_extra_43</code> to <code>test_paragraph_extra_46</code>.
To reiterate the message from the previous section, the purpose of these tests was not
to provide one off tests for each type of inline element, but to provide a group of
tests along a given theme.  In this case, that theme was an inline element
surrounded by simple text on either side, with a newline in the middle of the element.</p>
<p>Far from being tricky, adding these tests was simple.  I started with test
<code>test_paragraph_extra_43</code> and support for the Code Span token, adding support for the
Raw Html token,
the URI Autolink token, and the email Autolink token, ending at
<code>test_paragraph_extra_46</code>  Those were easy
tests to add.  In each case, it was just a simple Markdown document like:</p>
<div class="highlight"><pre><span></span><span class="n">a</span><span class="o">`</span><span class="n">code</span>
<span class="n">span</span><span class="o">`</span><span class="n">a</span>
</pre></div>
<p>It was when I started looking at the links and images that I realized that I was in
for a world of hurt.  Well, maybe not hurt, but it was going to be a lot of work.</p>
<h3 id="new-tests-links-and-newlines">New Tests - Links and Newlines<a class="headerlink" href="#new-tests-links-and-newlines" title="Permanent link">¶</a></h3>
<p>Starting off with the links, I began with inline links, as they are what I mostly
use in my documents.  In terms of changeable parts, the inline
links have 6 elements: the link label, the whitespace before the URI, the URI,
the whitespace before the title, the title, and the whitespace after the title.
To test these parts, I added tests <code>test_paragraph_extra_47</code> to
<code>test_paragraph_extra_52</code>, one for each of the parts.  In addition,
for each whitespace test, I added variations on the tests that included whitespace
before the newline, whitespace after the newline, and whitespace before and after
the newline.  </p>
<p>Once those tests were added, it was time to focus on the other 3 link types.  The
full link type was tested by adding a test for newlines in the label
(<code>test_paragraph_extra_53</code>) and
newlines in the link reference (<code>test_paragraph_extra_54</code>).  A new test was added
for a shortcut
link with a newline in the link reference (<code>test_paragraph_extra_55</code>) and a
collapsed link with a newline
in the link reference (<code>test_paragraph_extra_56</code>).  Finally, to address some
concerns I had about a newline
at the start of those elements, I added test <code>test_paragraph_extra_57</code> that includes
a collapsed link with
a newline at the start of the link label, and test <code>test_paragraph_extra_58</code>
that includes a full link with
a newline at the start of the link reference.</p>
<p>With that group of tests added, it was time to shift to the next group of tests: images.
After adding test <code>test_paragraph_extra_59</code> to place a newline between the <code>!</code>
character and the <code>[</code> character of the image link, tests <code>test_paragraph_extra_60</code> to
<code>test_paragraph_extra_67</code> were added as versions of tests
<code>test_paragraph_extra_47</code> to <code>test_paragraph_extra_52</code>, modified for an image instead
of a normal link.  In addition, tests <code>test_paragraph_extra_60</code> and
<code>test_paragraph_extra_65</code> were added to test an image link without any link title
being provided.</p>
<p>To me, this was a good start to some solid tests.  I was focusing on a particular
group of tests, and make sure that pattern was cleanly covered.</p>
<h3 id="adding-in-replacements-and-backslashes">Adding in Replacements and Backslashes<a class="headerlink" href="#adding-in-replacements-and-backslashes" title="Permanent link">¶</a></h3>
<p>Finding that the pattern of adding new tests in the previous section was working well
as a template,
the next group of tests followed a similar pattern.  In this group of tests, I wanted
to focus on newlines as part of replacement sequences and backslash sequences within
different parts of the inline links.  My concern was that the special character
handling would play havoc with the determination of the column number for the token
following the token with the special character.  It just seemed to be a good idea to
test these thoroughly.</p>
<p>Tests <code>test_paragraph_extra_68</code> and <code>test_paragraph_extra_69</code> provide for testing in
the inline link label, with a newline around
a replacement sequence and a newline near a backslash sequence.  Then test
<code>test_paragraph_extra_70</code>
tests a inline URI containing a space, followed by tests <code>test_paragraph_extra_71</code>
and <code>test_paragraph_extra_72</code> testing for
newlines within a replacement sequence and a backslash sequence.  Then tests
<code>test_paragraph_extra_73</code> to <code>test_paragraph_extra_77</code> repeat those tests, but with
image links instead of normal links.  To round out
this testing tests <code>test_paragraph_extra_78</code> to <code>test_paragraph_extra_89</code> repeat
the link testing with the variations
based on the other 3 link types.</p>
<p>As I was compiling the list of tests for this article, I did notice that it appears
that I have some tests that are done more than once.  To combat this, I added
a new item to the issues list to create a table or spreadsheet to more
accurately track these variations.</p>
<h2 id="addressing-the-issues">Addressing the Issues<a class="headerlink" href="#addressing-the-issues" title="Permanent link">¶</a></h2>
<p>All in all, things went well with adding the new tests.  For the initial group
of 4 tests, the only thing that the tests uncovered was that the Code Span token was
not handling the newline properly.
That was quickly resolved with a couple of small changes in the <code>handle_inline_backtick</code>
function.  The bigger issues arose in the handling of the links.</p>
<p>While not a design change, most of that section either needed to be added or enhanced
to properly handle links with newlines.
The way the code was implemented before that week’s work, if there was a newline
character in the current token, the logic was invoked to properly determine what the
line/column number should be.  There were two problems with that code.  The first is
that it was only setup to handle newline characters in an inline link.  This meant that
the code to handle full links, collapsed links, and shortcut links needed to be added.</p>
<p>The second issue was that the initial code added to handle the inline links was only
partially complete.  In trying to figure out why that was for this article, my notes
refer to an extreme lack of examples in the GFM specification that have newline
characters in any parts of the Link elements themselves.  Part of the push to add this
current series of tests was to try and shore up that deficiency, adding those tests
myself.</p>
<h3 id="breaking-things-down">Breaking Things Down<a class="headerlink" href="#breaking-things-down" title="Permanent link">¶</a></h3>
<p>As it is the link type that I use most often, I started
with the inline links and their component length arrays.  This array, in a variable
named <code>link_part_lengths</code>, contained all 5 lengths of the variable parts of the
inline links: pre-URI whitespace, URI, pre-title whitespace, title, and post-title
whitespace.  The link labels were already handled before reaching that point in the
code, so there were no issues there.</p>
<p>That code started off with some initialization of the array and its values:</p>
<div class="highlight"><pre><span></span><span class="n">link_part_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
<span class="n">link_part_lengths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">active_link_uri</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span>
    <span class="n">current_token</span><span class="o">.</span><span class="n">before_title_whitespace</span>
<span class="p">)</span>
<span class="k">if</span> <span class="n">current_token</span><span class="o">.</span><span class="n">inline_title_bounding_character</span><span class="p">:</span>
    <span class="n">link_part_lengths</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">link_part_lengths</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">active_link_title</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">link_part_lengths</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
        <span class="n">current_token</span><span class="o">.</span><span class="n">after_title_whitespace</span>
    <span class="p">)</span>
<span class="n">link_part_lengths</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
<p>These values were not always going to be the right values, but they proved to be
a good place to start for each link part.  Basically, I started with an array of 5
integer values, each set to reflect a certain section of the inline link.  While those
values are not a direct 1-to-1 mapping of inline link part to length of that part,
they are keyed to handle a newline character showing up in any of those inline link
parts.</p>
<p>A good example for this is handling a newline character in the inline link title part.</p>
<div class="highlight"><pre><span></span><span class="n">newline_count</span> <span class="o">=</span> <span class="n">ParserHelper</span><span class="o">.</span><span class="n">count_newlines_in_text</span><span class="p">(</span>
    <span class="n">active_link_title</span>
<span class="p">)</span>
<span class="k">if</span> <span class="n">newline_count</span><span class="p">:</span>
    <span class="n">delta_line</span> <span class="o">+=</span> <span class="n">newline_count</span>
    <span class="n">para_owner</span><span class="o">.</span><span class="n">rehydrate_index</span> <span class="o">+=</span> <span class="n">newline_count</span>

    <span class="n">split_active_link_title</span> <span class="o">=</span> <span class="n">active_link_title</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">link_part_lengths</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">split_active_link_title</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">link_part_index</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
<p>For the title part, if there are any newlines discovered, the count of newlines found
is added to the relevant variables.  Once that is done, the title is split on newline
characters, and the length of the entire part is set to the length of the last part of
that split.  Finally, the <code>link_part_index</code> variable is set to the part itself.</p>
<p>Finally, once all the parts are examined in this manner, the following code is
executed:</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">link_part_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">link_part_lengths</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
        <span class="n">split_paragraph_lines</span><span class="p">[</span><span class="n">para_owner</span><span class="o">.</span><span class="n">rehydrate_index</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">link_part_lengths</span><span class="p">[:</span><span class="n">link_part_index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="mi">0</span>
    <span class="p">]</span> <span class="o">*</span> <span class="n">link_part_index</span>
    <span class="n">repeat_count</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="n">link_part_lengths</span><span class="p">))</span>
</pre></div>
<p>Essentially, this is the magic part of the algorithm that pulls everything together.
At the start of the final processing, the last element in the array is set to include
any whitespace prefix from the last line that was added.  Once that is done, the
elements before the last element containing a newline are set to 0.  Basically, if we
have a title part that has a newline, anything before that title is not useful in
determining the column number.  Finally, the algorithm then calculates the column
number (in the <code>repeat_count</code> variable) by summing up each of the values in the
<code>link_part_lengths</code> array.</p>
<h3 id="show-me-this-in-practice">Show Me This in Practice<a class="headerlink" href="#show-me-this-in-practice" title="Permanent link">¶</a></h3>
<p>Applying that algorithm to the following Markdown</p>
<div class="highlight"><pre><span></span><span class="n">a</span><span class="o">[</span><span class="n">Foo</span><span class="o">]</span><span class="p">(</span><span class="o">/</span><span class="n">uri</span><span class="w"> </span><span class="ss">"test</span>
<span class="ss">ing"</span><span class="p">)</span><span class="n">a</span><span class="w"></span>
</pre></div>
<p>Given this information, the array was initialized as follows:</p>
<div class="highlight"><pre><span></span>link_part_lengths[0] = 4 + 1
link_part_lengths[1] = 1
link_part_lengths[2] = 8 + 1
link_part_lengths[3] = 0
link_part_lengths[4] = 0
</pre></div>
<p>When the newline in the title is detected, the <code>link_part_index</code> variable is set to
<code>2</code> and the 2nd element is reset to <code>4</code>: <code>3</code> for the length of <code>ing</code> and <code>1</code> as per
the rest of the adjustment equation.</p>
<p>Without any more newlines, when the final part of the algorithm is executed, no
adjustments are made to the 4th element, any element before the 2nd element is
zeroed out, and the sum of the remaining elements is then <code>4</code>.  Following the
final part of the algorithm, <code>2</code> is added to that value, ending with a value of
<code>6</code>.  In double checking the above text, the letter <code>a</code> on the second line does indeed
start at column 6.</p>
<h3 id="summary_1">Summary<a class="headerlink" href="#summary_1" title="Permanent link">¶</a></h3>
<p>For me, this algorithm is very effective. It starts with good defaults, updating
those values as each part is evaluated.  As the column number cannot be determined
until after the last part is evaluated, that evaluation is only done at the very
end.  And by using an array, the algorithm can use the <code>sum</code> function to add those
elements up, instead of manual summation.</p>
<p>It took me a while to get to it, but it is and accurate algorithm and an efficient
one.</p>
<h3 id="adjusting-the-consistency-checks">Adjusting the Consistency Checks<a class="headerlink" href="#adjusting-the-consistency-checks" title="Permanent link">¶</a></h3>
<p>Like the changes that needed to be made to the Markdown parser, its consistency checks
needed to change to test the new criteria.  I initially wanted to just copy over the
work I had done in setting the new line/column numbers with newlines, but after 15
milliseconds, I realized the fallacy of that approach.  The problem was that because
I knew of the approach I already used; it was hard to come up with another way to do
it.</p>
<p>In the end, I just started the code with a less optimal starting point for the inline
links, growing it from
there.  Instead of a nice array that I could easily sum, I used a series of 5 boolean
variables and 5 string variables that contained the content of each part of the link.
While I knew this was almost the same approach, I had confidence that I was picking a
path that was enough different that I wouldn’t be tempted to look at the previous
code base to figure things out.  The approach did not have to be optimal, it just had
to be independent from the original algorithm, at least for this phase of the project.</p>
<p>After all that work, adding the shortcut links and collapsed links were simple,
being simple sums of the component parts, both constant and variable.  But that brought
up things that I knew I was going to have to work on soon.</p>
<p>First off, all this verification was happening in the
<code>__verify_next_inline_inline_image</code> function.  I made a note in the issues list to
check out why, but there was not any verification present for the link tokens.
Secondly, any support for validating the full link type was missing.  After checking
the entire list of tests, there were no image tests that were specified using a full
link format.  Noted, and continued.  Finally, there were the existing calculations for
the collapsed and shortcut tests.  While there was something there, I was sure
that those checks wouldn’t handle any newline characters in any of their components.
Once again, I noted an item in the issues list, and moved forward.</p>
<p>Besides those missing test areas that I discovered, there were a handful of tests
that I could not get working by the end of the week.  While it may seem like the tests
were only small variations on each other, it did take quite a bit of work to get them
working to the extent I did.  Not include child tests, there were 47 scenario tests that
I added.  While some of them worked right away, most of them required research and small
changes to get them working.  Any even with a good push to get all the work done,
I needed to leave some of the tests unfinished.</p>
<h3 id="leaving-something-undone">Leaving Something Undone<a class="headerlink" href="#leaving-something-undone" title="Permanent link">¶</a></h3>
<p>It was a hard decision to document the cases that I had missed and leave them for
later, but I thought it was an important thing to do.  As it was, the commit was done
on Sunday morning, already digging into my article writing time for that week.  I had
no clue if the remaining tests were going to take 5 minutes to resolve or 5 days.  I
needed to draw a line somewhere and put those tests into the bank for the following
week.</p>
<p>While I was not 100% sure about the groupings, I had a bit of information that I used
to group them together into 4 groups.  The first group was a set of 7 tests that
contained a character entity and seemed to have their column number off by 6.  The
second group was a set of 2 tests that contained a backslash and seemed to have their
column number off by 2.  I was not sure about the 3 tests in the third group, but they
seemed to fit together.  Finally, I recognized that I had started work on image versions
of some of the links, but I needed to make sure that each of the tests at <code>78</code> and over
needed image versions.</p>
<p>With that information added to the issues list for the following weeks’ work, I ended
the week with a good amount of work done.</p>
<h2 id="what-was-my-experience-so-far">What Was My Experience So Far?<a class="headerlink" href="#what-was-my-experience-so-far" title="Permanent link">¶</a></h2>
<p>One thing that I am learning about in this phase of the project is that I have wells
of patience that I can tap into if need be.  To be honest, it is surprising me that
I have this ability.  I usually want to forge ahead with things and make sure they
get done to the 90 percent mark, and struggle with that last 10 percent.  But this
project is different.</p>
<p>I am not sure if it is my self-imposed strictness on the project requirements or my
personal investment into this project, but I just find I am a lot more focused on
making this project a solid, well-tested application.  I know I am not going to be
able to catch every issue at the beginning, but I also know the cost of catching those
issues once I release the application to the community.  For that, I am prepared to
make a good-faith effort to do a thorough job in testing, even if it delays the
release of the project by a couple of months.</p>
<p>In writing this article though, I am realizing how boring it may appear to others.
That possible appearance was made clear to me as I worked on parts of this article.
Yes, I added over 40 new scenario tests, debugged them, and got most of them working.
And because they are in themes, it was harder to write something interesting about
them.  No more “hey I caught this, and here is the interesting part”.  It was just
one or two themes, and then numerous variations on that theme.</p>
<p>But boring as it may be, I believe it is important.  Going forward, I want to have
a cohesive collection of tests that I can use as a foundation to improve on.  I
firmly believe that this work, and the work that follows in the next couple of weeks,
builds that testing foundation.</p>
<h2 id="what-is-next">What is Next?<a class="headerlink" href="#what-is-next" title="Permanent link">¶</a></h2>
<p>No surprise here, more issues to address, and still focusing on newline and links.
Stay tuned!</p>


             
 
                <p id="post-share-links">
    Like this post? Share on:
    <a href="https://twitter.com/intent/tweet?text=Markdown%20Linter%20-%20Delving%20Into%20the%20Issues%20-%203&url=https%3A//jackdewinter.github.io/2020/10/12/markdown-linter-delving-into-the-issues-3/&hashtags=markdown-linter,core-linter" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jackdewinter.github.io/2020/10/12/markdown-linter-delving-into-the-issues-3/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
    ❄
    <a href="mailto:?subject=Markdown%20Linter%20-%20Delving%20Into%20the%20Issues%20-%203&amp;body=https%3A//jackdewinter.github.io/2020/10/12/markdown-linter-delving-into-the-issues-3/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
    </p>

            
            






<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="https://jackdewinter.github.io/2020/10/12/markdown-linter-delving-into-the-issues-3/#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">

                        <script src="https://utteranc.es/client.js"
        data-repo="jackdewinter/jackdewinter.github.io"
        data-issue-term="markdown-linter-delving-into-the-issues-3"
        data-label="Comments"
        data-theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://jackdewinter.github.io/2020/10/05/markdown-linter-delving-into-the-issues-2/" title="Previous: Markdown Linter - Delving Into the Issues - 2">Markdown Linter - Delving Into the Issues - 2</a></li>
                <li class="next-article"><a href="https://jackdewinter.github.io/2020/10/19/markdown-linter-delving-into-the-issues-4/" title="Next: Markdown Linter - Delving Into the Issues - 4">Markdown Linter - Delving Into the Issues - 4</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~14 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2020-10-12T00:00:00-07:00">Oct 12, 2020</time>
        <h4>Markdown Linter Issues</h4>
    <ul class="multi-parts-list">
            <li >
            <a href="https://jackdewinter.github.io/2020/09/28/markdown-linter-delving-into-the-issues-1/" title="Markdown Linter - Delving Into the Issues - 1">Part 1: Markdown Linter - Delving Into the Issues - 1</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/10/05/markdown-linter-delving-into-the-issues-2/" title="Markdown Linter - Delving Into the Issues - 2">Part 2: Markdown Linter - Delving Into the Issues - 2</a>
            </li>
            <li  class="active-part">
            Part 3: Markdown Linter - Delving Into the Issues - 3
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/10/19/markdown-linter-delving-into-the-issues-4/" title="Markdown Linter - Delving Into the Issues - 4">Part 4: Markdown Linter - Delving Into the Issues - 4</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/10/26/markdown-linter-delving-into-the-issues-5/" title="Markdown Linter - Delving Into the Issues - 5">Part 5: Markdown Linter - Delving Into the Issues - 5</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/11/02/markdown-linter-delving-into-the-issues-6/" title="Markdown Linter - Delving Into the Issues - 6">Part 6: Markdown Linter - Delving Into the Issues - 6</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/11/09/markdown-linter-delving-into-the-issues-7/" title="Markdown Linter - Delving Into the Issues - 7">Part 7: Markdown Linter - Delving Into the Issues - 7</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/11/16/markdown-linter-delving-into-the-issues-8/" title="Markdown Linter - Delving Into the Issues - 8">Part 8: Markdown Linter - Delving Into the Issues - 8</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/11/23/markdown-linter-delving-into-the-issues-9/" title="Markdown Linter - Delving Into the Issues - 9">Part 9: Markdown Linter - Delving Into the Issues - 9</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/11/30/markdown-linter-delving-into-the-issues-10/" title="Markdown Linter - Delving Into the Issues - 10">Part 10: Markdown Linter - Delving Into the Issues - 10</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/12/07/markdown-linter-delving-into-the-issues-11/" title="Markdown Linter - Delving Into the Issues - 11">Part 11: Markdown Linter - Delving Into the Issues - 11</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/12/14/markdown-linter-delving-into-the-issues-12/" title="Markdown Linter - Delving Into the Issues - 12">Part 12: Markdown Linter - Delving Into the Issues - 12</a>
            </li>
    </ul>
            <h4>Category</h4>
            <a class="category-link" href="https://jackdewinter.github.io/categories#software-quality-ref">Software Quality</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://jackdewinter.github.io/tags#core-linter-ref">core linter
                    <span>33</span>
</a></li>
                <li><a href="https://jackdewinter.github.io/tags#markdown-linter-ref">markdown linter
                    <span>51</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/jackdewinter" title="github-alt" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/jackdewinter/" title="linkedin" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://jackdewinter.github.io/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2020 by Jack De Winter and licensed under a <a rel="license"
  href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.

    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>