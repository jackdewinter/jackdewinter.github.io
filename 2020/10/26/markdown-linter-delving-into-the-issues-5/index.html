<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Jack De Winter" />

        <meta name="description" content="Summary¶ In my last article, I started to add extra scenario tests that tested newline characters in various groups or themes. In this article, I continue working towards having a good level of group coverage for each of those groups. Introduction¶ To be totally honest with any readers, the work …
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="markdown linter, core linter, Software Quality, " />

<meta property="og:title" content="Markdown Linter - Delving Into the Issues - 5 "/>
<meta property="og:url" content="https://jackdewinter.github.io/2020/10/26/markdown-linter-delving-into-the-issues-5/" />
<meta property="og:description" content="Summary¶ In my last article, I started to add extra scenario tests that tested newline characters in various groups or themes. In this article, I continue working towards having a good level of group coverage for each of those groups. Introduction¶ To be totally honest with any readers, the work …" />
<meta property="og:site_name" content="Jack&#39;s Digital Workbench" />
<meta property="og:article:author" content="Jack De Winter" />
<meta property="og:article:published_time" content="2020-10-26T00:00:00-07:00" />
<meta name="twitter:title" content="Markdown Linter - Delving Into the Issues - 5 ">
<meta name="twitter:description" content="Summary¶ In my last article, I started to add extra scenario tests that tested newline characters in various groups or themes. In this article, I continue working towards having a good level of group coverage for each of those groups. Introduction¶ To be totally honest with any readers, the work …">

        <title>Markdown Linter - Delving Into the Issues - 5  · Jack&#39;s Digital Workbench
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://jackdewinter.github.io/theme/css/style.min.css?bec7d543">

        <link href="https://jackdewinter.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack&#39;s Digital Workbench - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://jackdewinter.github.io/"><span class=site-name>Jack's Digital Workbench</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jackdewinter.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://jackdewinter.github.io/categories">Categories</a></li>
                                <li ><a href="https://jackdewinter.github.io/tags">Tags</a></li>
                                <li ><a href="https://jackdewinter.github.io/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://jackdewinter.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://jackdewinter.github.io/2020/10/26/markdown-linter-delving-into-the-issues-5/">
                Markdown Linter - Delving Into the Issues - 5
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-the-audience-for-this-article">What Is the Audience for This Article?</a></li>
<li><a href="#starting-with-some-cleanup">Starting With Some Cleanup</a></li>
<li><a href="#ensuring-consistent-paragraphs">Ensuring Consistent Paragraphs</a><ul>
<li><a href="#the-issue">The Issue</a></li>
<li><a href="#addressing-the-failures">Addressing the Failures</a></li>
<li><a href="#covering-my-bases">Covering My Bases</a></li>
<li><a href="#continuing-forward">Continuing Forward</a></li>
<li><a href="#digging-deeper">Digging Deeper</a></li>
<li><a href="#finding-a-solution">Finding A Solution</a></li>
</ul>
</li>
<li><a href="#interlude">Interlude</a></li>
<li><a href="#inlines-and-new-lines">Inlines and New Lines</a><ul>
<li><a href="#starting-with-tests">Starting with Tests</a></li>
<li><a href="#starting-with-the-inline-processor">Starting with the Inline Processor</a></li>
<li><a href="#rehydrating-the-markdown-text">Rehydrating the Markdown Text</a></li>
<li><a href="#cleaning-up-the-consistency-checks">Cleaning Up the Consistency Checks</a></li>
</ul>
</li>
<li><a href="#what-was-my-experience-so-far">What Was My Experience So Far?</a></li>
<li><a href="#what-is-next">What is Next?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>In my
<a href="https://jackdewinter.github.io/2020/10/19/markdown-linter-delving-into-the-issues-4/">last article</a>,
I started to add extra
scenario tests that tested newline characters in various groups or themes.  In this
article, I continue working towards having a good level of group coverage for each of
those groups.</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">¶</a></h2>
<p>To be totally honest with any readers, the work that I did for this article was just
more of the same stuff.  Basically, look at the
<a href="https://github.com/jackdewinter/pymarkdown/blob/main/readme.md">issues list</a>,
find something to work on, and work on it.  However, as of late, I have been trying to
find groups of issues to work on, instead of one-off items.  As such, I was looking
for issues that could help me resolve questions about a group of behavior for the
project, not just a very specific behavior.</p>
<p>And to continue to be honest, this work was done during a difficult week for me.
With things to do around the house, I did not seem to get any really good stretches
of time to work on the project until later at night when I was tired.  It was just
one of those weeks.</p>
<p>But even though I was tired, I wanted to continue.  While I would have been ecstatic
to continue working with great velocity, what I needed to do was to maintain forward
momentum.  That meant picking items from the issues list that I could work on in
phases, keeping that momentum up from phase to phase.  That is why I wanted to focus
on items I could deal with as a group.  It was a good way to keep working, while not
feeling I was forever stopping.  For me, it was not about doing the work as much as
maintaining the feeling that the work was progressing.  That is what was important to
me.</p>
<h2 id="what-is-the-audience-for-this-article">What Is the Audience for This Article?<a class="headerlink" href="#what-is-the-audience-for-this-article" title="Permanent link">¶</a></h2>
<p>While detailed more eloquently in
<a href="https://jackdewinter.github.io/2020/04/05/what-is-the-audience-for-my-blog/#what-is-the-audience-for-my-blog">this article</a>,
my goal for this technical article is to focus on the reasoning behind my solutions,
rather that the solutions themselves.  For a full record of the solutions presented in
this article, please go to this project’s GitHub repository and consult the
commits
<a href="https://github.com/jackdewinter/pymarkdown/commit/98e691cc253e03769acecf087e546f0b90507e23">07 Oct 2020</a>
and
<a href="https://github.com/jackdewinter/pymarkdown/commit/59c624c08a7fe6f9f3072123c5ec9beac8e5c6ad">11 Oct 2020</a>.</p>
<h2 id="starting-with-some-cleanup">Starting With Some Cleanup<a class="headerlink" href="#starting-with-some-cleanup" title="Permanent link">¶</a></h2>
<p>As usual, there were some issues left over from the previous week that I needed to
take care of.  While not pivotal to my efforts going forward, I spent a brief amount of
time going through the <code>Bugs - General - Uncategorized</code> section of the issues list,
making sure to remove anything that had already been done. This effort was mostly
done for reasons of cleanliness and accuracy, though I will admit that getting rid of
a handful of items that had been completed was good for my confidence.</p>
<p>In addition, during the prior week’s testing, I had added functions
<code>test_fenced_code_blocks_099k</code> and <code>`test_fenced_code_blocks_099l</code> to test out
different counts of multiple blank lines within a fenced code block.  As those tests
passed and seemed useful, I decided to keep them in the test suite, but did not have an
issue to tag them with.  It just made sense to add them at this point, before taking
them any further.</p>
<h2 id="ensuring-consistent-paragraphs">Ensuring Consistent Paragraphs<a class="headerlink" href="#ensuring-consistent-paragraphs" title="Permanent link">¶</a></h2>
<p>The work in this section all came from one line:</p>
<div class="highlight"><pre><span></span>- make sure line/column is tracking text indenting on each line
</pre></div>
<p>Not a fantastically descriptive line, but it was there.  And it was enough for me to
understand what it is that I wanted to look at.</p>
<p>In previous articles, I have talked about how paragraphs are the base building block of
any Markdown document.  Being the default block container for the default inline
element, I would guess that an average of 75% of existing Markdown document blocks are
Paragraph elements.  I have no hard facts to back it up, but as I look at a
representative sample of the articles I have worked on, a
<a href="https://en.wikipedia.org/wiki/Scientific_Wild-Ass_Guess">SWAG</a> leads me to think that
75% is a fairly good estimate.</p>
<p>This perceived predominance of Paragraph elements in Markdown documents influenced
my perception when I was designing the token system used by the PyMarkdown project.
To accommodate this perception, I decided to place any
newline handling elements in the Paragraph token instead of the encapsulated inline
tokens.  At the time, my thoughts were that the Paragraph element
had rules that were different enough from the 2 header elements, the 2 container
elements, and the 2 code block elements, that I needed to capture the element’s
information differently.  As Paragraph elements largely ignore leading space on a given
line, the Paragraph token seemed to be the right place to store that information.  While
it has caused a couple of issues in the past, I still believe that it is still the right
decision.</p>
<h3 id="the-issue">The Issue<a class="headerlink" href="#the-issue" title="Permanent link">¶</a></h3>
<p>While I do believe it was the right decision to make, that decision has added extra
headaches to the project.  The big headache is confirming that the newlines in the
inline token correspond to newlines in the whitespace that is extracted and stored
in the Paragraph token.  That is where the <code>rehydrate_index</code> field comes in.</p>
<p>I have talked about it in passing, especially in a previous post in the section
titled
<a href="https://jackdewinter.github.io/2020/10/05/markdown-linter-delving-into-the-issues-2/#verifying-the-rehydration-index">Verifying the Rehydration Index</a>.
In that article, I talk about how I was not sure if there were any errors because
I was not sure that the field was named correctly.  While I concluded that
the field was named correctly, that name can still be confusing at times.  The
<code>rehydrate_index</code> field
indicates the index of the next newline that will need processing.  As such, once the
processing of any text at the start of a line is done within the bound of a Paragraph
token, that field is updated to <code>1</code>.  This offset also means that when all processing
for the text within the Paragraph token has been completed, the index should be set to
the number of newline characters plus <code>1</code>.</p>
<p>To move towards consistency of this field’s value, I added the following code to the
end of the processing of the end of a Paragraph block:</p>
<div class="highlight"><pre><span></span>    <span class="n">num_newlines</span> <span class="o">=</span> <span class="n">ParserHelper</span><span class="o">.</span><span class="n">count_newlines_in_text</span><span class="p">(</span>
        <span class="n">last_block_token</span><span class="o">.</span><span class="n">extracted_whitespace</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">last_block_token</span><span class="o">.</span><span class="n">rehydrate_index</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">last_block_token</span><span class="o">.</span><span class="n">rehydrate_index</span> <span class="o">==</span> <span class="n">num_newlines</span>
            <span class="ow">or</span> <span class="n">last_block_token</span><span class="o">.</span><span class="n">rehydrate_index</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_newlines</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">),</span> <span class="p">(</span>
            <span class="s2">"rehydrate_index ("</span>
            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">last_block_token</span><span class="o">.</span><span class="n">rehydrate_index</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">") != num_newlines("</span>
            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">num_newlines</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">")"</span>
        <span class="p">)</span>
</pre></div>
<p>Basically, if the algorithm is at the end of a Paragraph block, any inline elements
contained within the paragraph should have moved the <code>rehydrate_index</code> field to its
proper value.
However, I needed to add an alternate conditional to handle the case where it was
1 count short.  While that was concerning, it was more concerning that there were some
cases where the <code>rehydrate_index</code> field even fell short of that adjusted mark.  I felt
it was imperative to get those outliers addressed first.</p>
<h3 id="addressing-the-failures">Addressing the Failures<a class="headerlink" href="#addressing-the-failures" title="Permanent link">¶</a></h3>
<p>In debugging, it is not often that an answer almost literally jumps out and screams
“Here I am, please fix me!”  In this case, when I executed the failing scenario tests
and looked at their failures, it was an easy observation to make.  For some
reason, the Text token after a Hard-Line Break token included a newline character in
its text section, but did not include a newline character in its whitespace section.
As a result of that mismatch, the tests failed as the Paragraph token’s
<code>rehydrate_index</code> field was not set to the correct value when verifying the tokens.</p>
<p>It took me a while of careful tracing through the logs, but I finally found that in
the handling of the end of the line for a Hard-Line Break token, it was not clearing
the <code>whitespace_to_add</code> variable in both case.  This code:</p>
<div class="highlight"><pre><span></span>    <span class="n">whitespace_to_add</span> <span class="o">=</span> <span class="s2">""</span>
</pre></div>
<p>was being executed if the Hard-Line Break token was created by multiple space characters
in the Markdown document.  However, if the token was created by the backslash character
at the end of the line, it was not.  Making sure that code was in both branches solved
some of those issues, but every test.  There were still a handful of tests that failed.</p>
<h3 id="covering-my-bases">Covering My Bases<a class="headerlink" href="#covering-my-bases" title="Permanent link">¶</a></h3>
<p>While the tests for the SetExt Headings tokens were all passing, the discovery of
the previous failures inspired me to add some similar tests for the SetExt Heading
tokens.  To do this, I started with the original scenario test,
<code>test_setext_headings_extra_22</code>:</p>
<div class="highlight"><pre><span></span><span class="n">this</span> <span class="n">was</span> <span class="err">\\</span>
<span class="c1">---</span>
</pre></div>
<p>From there,
I added functions <code>test_setext_headings_extra_22a</code> to <code>test_setext_headings_extra_22d</code>
to test the creation of a Hard-Line Break token followed with a Text token.  To start,
I added the first two functions that simply had both forms of creating a Hard-Line
Break token with some simple text following it.  In addition, to make sure that I was
handling the next line’s leading whitespace properly, I added two more variations that
included a single space character at the start of the following line.</p>
<p>While I am not sure how useful these four tests will be in the future, at the time they
were important.  As I had just fixed some issues with Paragraph tokens and extracted
whitespace, I wanted to make sure that a similar format with SetExt Heading embedded
text did not suffer from a similar problem.</p>
<h3 id="continuing-forward">Continuing Forward<a class="headerlink" href="#continuing-forward" title="Permanent link">¶</a></h3>
<p>With the experience from the last section in hand, I continued to look for the root
cause of the remaining failed tests.  As in the previous section, the tests were
failing with a common theme: newlines that occurred within a Link token.  </p>
<p>While the solution to this issue was not as easy to arrive at as the solution for
the last section, it was fairly simple to see that the problem had two parts:
the tokens derived from the link’s label, and the main body of the link itself.
Almost as soon as I started looking at the logs, I noticed that the numbers were
off, and I had to dig in a bit deeper.</p>
<h3 id="digging-deeper">Digging Deeper<a class="headerlink" href="#digging-deeper" title="Permanent link">¶</a></h3>
<p>The way inline links are constructed is as follows:</p>
<div class="highlight"><pre><span></span><span class="o">[</span><span class="n">link</span><span class="o">]</span><span class="p">(</span><span class="o">/</span><span class="n">uri</span><span class="w"> </span><span class="ss">"title"</span><span class="p">)</span><span class="w"></span>
</pre></div>
<p>However, the token generation algorithms follow the way that the tokens are used to
generate the HTML output, which for that Markdown is:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"/uri"</span> <span class="na">title</span><span class="o">=</span><span class="s">"title"</span><span class="p">&gt;</span>link<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
<p>As the link label (the text <code>link</code> in the above sample) may contain any form of inline
text except for another link, that information cannot be contained in its processed
form within the Link token.  Instead, there is a start Link token, followed by the
processed version of the link label, followed up by the end Link token.  From
PyMarkdown’s point of view, the token stream for the above Markdown document is:</p>
<div class="highlight"><pre><span></span>        "[para(1,1):]",
        '[link(1,1):inline:/uri:title::::link:False:":: :]',
        "[text(1,2):link:]",
        "[end-link:::False]",
        "[end-para:::True]",
</pre></div>
<p>Unless the Link token contained a newline character somewhere within its bounds,
everything was working properly, and the consistency checks were properly verifying the
tokens.  But when the Link tokens contained a newline character, those properly working
algorithms were not working so well.</p>
<h3 id="finding-a-solution">Finding A Solution<a class="headerlink" href="#finding-a-solution" title="Permanent link">¶</a></h3>
<p>As I knew that this problem had two parts, I figured that the solution needed to have
two parts are well.  I believe that my realization of that conclusion is what enabled
me to shortcut other solutions that did not work in favor of a split
solution that did work.</p>
<p>The first half of the solution needed to deal with the text contained within the link
label.  While this text is handled in the tokens between the start end end Link tokens,
from a Markdown point of view, it occurs right after the opening <code>[</code> character of the
link.  The good news here is that adjusting the <code>rehydrate_index</code> field for each
enclosed token was easily done by adding some simple code at the end of the processing
loop in the <code>__verify_inline</code> function.</p>
<p>The second half of the solution was in the handling the Link token itself.  As the
inside inline tokens come first in the Markdown document, it made sense to handle
the Link part of the solution when the end Link token is processed.  This meant
adding some extra code to the <code>__verify_next_inline</code> function, processing the
end Link token at the top of the function if the <code>current_line_token</code> line/column
numbers are both <code>0</code>.  If the <code>current_line_token</code> variable is a end Link token
and the code is processing within a Paragraph token, I added new functionality
to calculate the number of newline characters encountered within the Link token
itself.</p>
<p>Running through this code in my head, and solving some simple issues, I executed
the failing tests again, and was pleased to find that they were all passing.  In
that version of the code, I had four different sections, one for each type of
link.  However, after a quick examination of the code, I believed that the code could
easily be parsed down to one block of code that just gathered the newline counts
from each part.  Eliminating all the other blocks except for the inline block,
I was happy to find out that my guess was correct.  The way I had set up the values
for the other types of links allowed for a more simplified version of the code.</p>
<p>After a quick check of that guess locally, a full scenario test run confirmed that
there were no ill effects of these changes, I cleaned the code up and checked in
that work for the first part of the week.</p>
<h2 id="interlude">Interlude<a class="headerlink" href="#interlude" title="Permanent link">¶</a></h2>
<p>It was after this point in the week where it became more difficult to find numerous
good blocks of time to work on the project.  The first day it happened it was not so
bad, but the struggle to find good time to work on the project was draining.  I
knew I had to keep my priorities focused on the other tasks in my life, as they
had priority.  But even so, it was just hard not to get a good block of work done
on the project.</p>
<p>But I persevered.</p>
<h2 id="inlines-and-new-lines">Inlines and New Lines<a class="headerlink" href="#inlines-and-new-lines" title="Permanent link">¶</a></h2>
<p>The second half of the week was spent working on clearing up a related item from
the issues list:</p>
<div class="highlight"><pre><span></span>- need other multiline elements in label and verify
</pre></div>
<p>Piggybacking off the previous item, this seemed like a really good choice to pick off
the issues list.  While the previous work dealt with plain text inside of the link
label, this issue took that work and improved on it.  Instead of just simple text
elements, this work adds testing support for Raw Html tokens and Code Span tokens that
span multiple lines.</p>
<h3 id="starting-with-tests">Starting with Tests<a class="headerlink" href="#starting-with-tests" title="Permanent link">¶</a></h3>
<p>The start of this work was easy.  I added scenario
test functions <code>test_paragraph_extra_a3</code> to <code>test_paragraph_extra_c6</code> to cover all
the new scenarios.  Starting with simple tests, the first three tests that I specified
were a normal link label <code>[li\nnk]</code>, a code span <code>[li`de\nfg`nk]</code>, and a raw
html <code>[li&lt;de\nfg&gt;nk]</code>.  Moving on to variations of those tests, having completed
those tests for the inline link type, I transitioning to examples for the full link
type, the collapsed link type, and the shortcut link type.  Once those variations were
done, I copied each of those tests, replacing the start Link element character <code>[</code> with
the Image element character <code>![</code>.</p>
<p>Work to setup the tests was also easy, but pedantic.  After a quick survey of the
inline element types, I was shocked to find out that only the three inline tokens
named above allow for newlines with their elements.  It did make the creation of
the tests easier though, so I was happy to find that out.</p>
<p>And maybe it was just my experience on the project, but the test setup went
smoothly.  I did the research, I figured out what I needed to test, and then cycled
through the variations with speed and accuracy.  Just felt good to have a solid grasp
on the problems.</p>
<h3 id="starting-with-the-inline-processor">Starting with the Inline Processor<a class="headerlink" href="#starting-with-the-inline-processor" title="Permanent link">¶</a></h3>
<p>From a link point of view, the tests were generating their tokens
successfully.  The Text tokens and Code Span tokens were being handled properly,
passing all their tests.  However,
when the Raw Html token tests were executed, the text <code>text</code> was being added
to the token stream instead of the Raw Html token.  Having fixed an issue in this area
before, I had a feeling
it was in the <code>__collect_text_from_blocks</code> function, where link tokens are
translated back into their source text.  After taking a quick look there, it
was somewhat funny to see that I had handled the Code Span token case, but not
the Raw Html token case.  A quick fix, followed by another run over those tests,
and the Link token tests that were failing started working again.</p>
<p>That left the failing tests that dealt with Image tokens.  While this took a bit
more work, it was roughly the same process as with the Link token.  In this case,
the text for the <code>alt</code> parameter of the <code>image</code> tag is created by consuming
the elements generated from the Image token’s label field.  This work is done
by the <code>__consume_text_for_image_alt_text</code> function, consuming the tokens as the
processing is done.</p>
<p>The main difference with this process from the link process is that, according to
the GFM specification, this text is preserved largely without any of the special
characters.  As such, I had to check the proper translation of each of the
inline tokens against BabelMark to make sure that I had the right translation.
But other than that extra bump in the process, it went smoothly.  The
<code>__consume_text_for_image_alt_text</code> function filled out quickly with each
coded translation.</p>
<p>With that task completed, the scenario tests were generating the HTML output
that I expected.  Onwards!</p>
<h3 id="rehydrating-the-markdown-text">Rehydrating the Markdown Text<a class="headerlink" href="#rehydrating-the-markdown-text" title="Permanent link">¶</a></h3>
<p>After I was sure that the tokens being generated correctly, I quickly ran each of the
Markdown documents from the new tests through
<a href="https://johnmacfarlane.net/babelmark2/">Babel Mark</a>,
verifying that the output
HTML was correct.  Encountering no problems, I moved on to the rehydration of those
tokens into Markdown and was happy with the results.  With only a couple of tests
failing, I took a quick look at the failures and noticed the problem right away:
rehydrating Link tokens and Image tokens that contained newlines was not working.</p>
<p>Following the log files, I was able to quickly figure out that the problem was
that the backslash escape sequences and replacement markers were not being resolved
from the text before doing the final rehydration of the elements.  In the end,
the following lines:</p>
<div class="highlight"><pre><span></span>    <span class="n">text_to_modify</span> <span class="o">=</span> <span class="n">ParserHelper</span><span class="o">.</span><span class="n">remove_backspaces_from_text</span><span class="p">(</span><span class="n">text_to_modify</span><span class="p">)</span>
    <span class="n">text_to_modify</span> <span class="o">=</span> <span class="n">ParserHelper</span><span class="o">.</span><span class="n">resolve_replacement_markers_from_text</span><span class="p">(</span>
        <span class="n">text_to_modify</span>
    <span class="p">)</span>
</pre></div>
<p>were added to the <code>__insert_leading_whitespace_at_newlines</code> function to resolve
those elements.</p>
<p>With that code added, every scenario test was passing to the point of being able
to regenerate its original Markdown.  On to the consistency checks!</p>
<h3 id="cleaning-up-the-consistency-checks">Cleaning Up the Consistency Checks<a class="headerlink" href="#cleaning-up-the-consistency-checks" title="Permanent link">¶</a></h3>
<p>It was in this area that I spent a lot of time making sure things were correct.
Due to the shortened time blocks in which I could work on the project, the solutions
that I initially came up with were just not solid enough solutions to use.  These
solutions were either too complicated or failed to meet the criteria, leading me to
throw each approach out.  In the end, I just reset to use a simple approach, after
which things started to work out fine.</p>
<p>Learning from my previous work, I was pretty sure these changes were going to involve
handling replacement markers and backslash escapes better.  Specifically focusing
on the link label and image label, I was able to quickly determine that the link
labels and link text from the different link types in the
<code>__verify_next_inline_inline_image</code> function needed to call the
<code>resolve_replacement_markers_from_text</code> function to remove the replacement markers.</p>
<p>After making that change, I followed a hunch to see if the other changes I made needed
to be copied in some form to the consistency checks.  I was rewarded to find positive
benefit to extending the code under the <code>if "\n" in str(current_inline_token):</code>
condition of the <code>__verify_inline</code> function in a manner similar to the changes made to
the <code>__consume_text_for_image_alt_text</code> function.  It just made sense.</p>
<h2 id="what-was-my-experience-so-far">What Was My Experience So Far?<a class="headerlink" href="#what-was-my-experience-so-far" title="Permanent link">¶</a></h2>
<p>This was just a brutal week project-wise.  The stop-and-go (but mostly stop) nature
of this week reminded me of a time home when I worked in a cubicle farm for a year.
Instead of people just looking over at you or emailing you, they would have to walk
over to your cubicle and stand by your “door” to have a conversation with you.  At
least for me, it often seemed like I was just getting into a good work flow when
someone else showed up to talk, causing another interruption.</p>
<p>While I definitely had my priorities straight in dealing with the issues around my
house, the stop-and-go nature of this week made it hard to get into a good flow.
Even thinking about how I felt that week made the task of writing this article more
difficult.  It was just that jarring at times.</p>
<p>That also made my current predicament that much more painful.  I can see the issues
list getting smaller and smaller, closer to a point where I know I will feel comfortable
in releasing the project.  And I want to get there, but I want to get there with what
I consider to be solid quality.  But I also want to get there soon.  And I know that
if I had more quality time during the week, I would have been able to resolve at least
a couple more issues.</p>
<p>But I am still happy with the momentum on the project, and where I am with it.  And
one of the promises that I made to myself at the start of the project is that I must
have balance between this project and other priorities in my life.  And this was
just a week where I had to put my money where my mouth was.</p>
<p>Hopefully next week will be better.<sup id="fnref:ofCourse"><a class="footnote-ref" href="#fn:ofCourse">1</a></sup></p>
<h2 id="what-is-next">What is Next?<a class="headerlink" href="#what-is-next" title="Permanent link">¶</a></h2>
<p>Next week’s article will be more interesting, as I was able to address my time
allotments on the project, submitting 9 commits during that week.</p>
<div class="footnote">
<hr/>
<ol>
<li id="fn:ofCourse">
<p>It was better.  These articles track roughly 2-3 weeks behind the actual work, I know for a fact it got better. <a class="footnote-backref" href="#fnref:ofCourse" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>


             
 
                <p id="post-share-links">
    Like this post? Share on:
    <a href="https://twitter.com/intent/tweet?text=Markdown%20Linter%20-%20Delving%20Into%20the%20Issues%20-%205&url=https%3A//jackdewinter.github.io/2020/10/26/markdown-linter-delving-into-the-issues-5/&hashtags=markdown-linter,core-linter" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jackdewinter.github.io/2020/10/26/markdown-linter-delving-into-the-issues-5/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
    ❄
    <a href="mailto:?subject=Markdown%20Linter%20-%20Delving%20Into%20the%20Issues%20-%205&amp;body=https%3A//jackdewinter.github.io/2020/10/26/markdown-linter-delving-into-the-issues-5/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
    </p>

            
            






<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="https://jackdewinter.github.io/2020/10/26/markdown-linter-delving-into-the-issues-5/#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">

                        <script src="https://utteranc.es/client.js"
        data-repo="jackdewinter/jackdewinter.github.io"
        data-issue-term="markdown-linter-delving-into-the-issues-5"
        data-label="Comments"
        data-theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://jackdewinter.github.io/2020/10/19/markdown-linter-delving-into-the-issues-4/" title="Previous: Markdown Linter - Delving Into the Issues - 4">Markdown Linter - Delving Into the Issues - 4</a></li>
                <li class="next-article"><a href="https://jackdewinter.github.io/2020/11/02/markdown-linter-delving-into-the-issues-6/" title="Next: Markdown Linter - Delving Into the Issues - 6">Markdown Linter - Delving Into the Issues - 6</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~15 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2020-10-26T00:00:00-07:00">Oct 26, 2020</time>
        <h4>Markdown Linter Issues</h4>
    <ul class="multi-parts-list">
            <li >
            <a href="https://jackdewinter.github.io/2020/09/28/markdown-linter-delving-into-the-issues-1/" title="Markdown Linter - Delving Into the Issues - 1">Part 1: Markdown Linter - Delving Into the Issues - 1</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/10/05/markdown-linter-delving-into-the-issues-2/" title="Markdown Linter - Delving Into the Issues - 2">Part 2: Markdown Linter - Delving Into the Issues - 2</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/10/12/markdown-linter-delving-into-the-issues-3/" title="Markdown Linter - Delving Into the Issues - 3">Part 3: Markdown Linter - Delving Into the Issues - 3</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/10/19/markdown-linter-delving-into-the-issues-4/" title="Markdown Linter - Delving Into the Issues - 4">Part 4: Markdown Linter - Delving Into the Issues - 4</a>
            </li>
            <li  class="active-part">
            Part 5: Markdown Linter - Delving Into the Issues - 5
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/11/02/markdown-linter-delving-into-the-issues-6/" title="Markdown Linter - Delving Into the Issues - 6">Part 6: Markdown Linter - Delving Into the Issues - 6</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/11/09/markdown-linter-delving-into-the-issues-7/" title="Markdown Linter - Delving Into the Issues - 7">Part 7: Markdown Linter - Delving Into the Issues - 7</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/11/16/markdown-linter-delving-into-the-issues-8/" title="Markdown Linter - Delving Into the Issues - 8">Part 8: Markdown Linter - Delving Into the Issues - 8</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/11/23/markdown-linter-delving-into-the-issues-9/" title="Markdown Linter - Delving Into the Issues - 9">Part 9: Markdown Linter - Delving Into the Issues - 9</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/11/30/markdown-linter-delving-into-the-issues-10/" title="Markdown Linter - Delving Into the Issues - 10">Part 10: Markdown Linter - Delving Into the Issues - 10</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/12/07/markdown-linter-delving-into-the-issues-11/" title="Markdown Linter - Delving Into the Issues - 11">Part 11: Markdown Linter - Delving Into the Issues - 11</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/12/14/markdown-linter-delving-into-the-issues-12/" title="Markdown Linter - Delving Into the Issues - 12">Part 12: Markdown Linter - Delving Into the Issues - 12</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/12/21/markdown-linter-delving-into-the-issues-13/" title="Markdown Linter - Delving Into the Issues - 13">Part 13: Markdown Linter - Delving Into the Issues - 13</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/12/28/markdown-linter-delving-into-the-issues-14/" title="Markdown Linter - Delving Into the Issues - 14">Part 14: Markdown Linter - Delving Into the Issues - 14</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/01/04/markdown-linter-delving-into-the-issues-15/" title="Markdown Linter - Delving Into the Issues - 15">Part 15: Markdown Linter - Delving Into the Issues - 15</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/01/11/markdown-linter-delving-into-the-issues-16/" title="Markdown Linter - Delving Into the Issues - 16">Part 16: Markdown Linter - Delving Into the Issues - 16</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/01/18/markdown-linter-delving-into-the-issues-17/" title="Markdown Linter - Delving Into the Issues - 17">Part 17: Markdown Linter - Delving Into the Issues - 17</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/01/25/markdown-linter-delving-into-the-issues-18/" title="Markdown Linter - Delving Into the Issues - 18">Part 18: Markdown Linter - Delving Into the Issues - 18</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/02/01/markdown-linter-delving-into-the-issues-19/" title="Markdown Linter - Delving Into the Issues - 19">Part 19: Markdown Linter - Delving Into the Issues - 19</a>
            </li>
    </ul>
            <h4>Category</h4>
            <a class="category-link" href="https://jackdewinter.github.io/categories#software-quality-ref">Software Quality</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://jackdewinter.github.io/tags#core-linter-ref">core linter
                    <span>91</span>
</a></li>
                <li><a href="https://jackdewinter.github.io/tags#markdown-linter-ref">markdown linter
                    <span>109</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/jackdewinter" title="github-alt" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/jackdewinter/" title="linkedin" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://jackdewinter.github.io/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2021 by Jack De Winter and licensed under a <a rel="license"
  href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.

    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>