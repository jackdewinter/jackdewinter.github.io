<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Jack De Winter" />

        <meta name="description" content="Introduction¶ While it just happened to be the feature that was last on the list, I feel that it was kind of fitting that image links were the last feature to be added. Whether or not an author creates Markdown content for a blog, documentation, or some other purpose, a …
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="markdown linter, linter tokenizer, Software Quality, " />

<meta property="og:title" content="Markdown Linter - Adding Image Links and Simple Cleanup "/>
<meta property="og:url" content="https://jackdewinter.github.io/2020/04/20/markdown-linter-adding-image-links-and-simple-cleanup/" />
<meta property="og:description" content="Introduction¶ While it just happened to be the feature that was last on the list, I feel that it was kind of fitting that image links were the last feature to be added. Whether or not an author creates Markdown content for a blog, documentation, or some other purpose, a …" />
<meta property="og:site_name" content="Jack&#39;s Digital Workbench" />
<meta property="og:article:author" content="Jack De Winter" />
<meta property="og:article:published_time" content="2020-04-20T00:00:00-07:00" />
<meta name="twitter:title" content="Markdown Linter - Adding Image Links and Simple Cleanup ">
<meta name="twitter:description" content="Introduction¶ While it just happened to be the feature that was last on the list, I feel that it was kind of fitting that image links were the last feature to be added. Whether or not an author creates Markdown content for a blog, documentation, or some other purpose, a …">

        <title>Markdown Linter - Adding Image Links and Simple Cleanup  · Jack&#39;s Digital Workbench
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://jackdewinter.github.io/theme/css/style.min.css?bec7d543">

        <link href="https://jackdewinter.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack&#39;s Digital Workbench - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://jackdewinter.github.io/"><span class=site-name>Jack's Digital Workbench</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jackdewinter.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://jackdewinter.github.io/categories">Categories</a></li>
                                <li ><a href="https://jackdewinter.github.io/tags">Tags</a></li>
                                <li ><a href="https://jackdewinter.github.io/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://jackdewinter.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://jackdewinter.github.io/2020/04/20/markdown-linter-adding-image-links-and-simple-cleanup/">
                Markdown Linter - Adding Image Links and Simple Cleanup
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-the-audience-for-this-article">What Is the Audience For This Article?</a></li>
<li><a href="#what-are-image-links">What Are Image Links?</a></li>
<li><a href="#simple-cleanups">Simple Cleanups</a><ul>
<li><a href="#simple-cleanup-1-splitting-up-the-tokenizedmarkdown-class">Simple Cleanup 1: Splitting Up the TokenizedMarkdown Class</a></li>
<li><a href="#simple-cleanup-2-reducing-complexity">Simple Cleanup 2: Reducing Complexity</a></li>
<li><a href="#simple-cleanup-3-pycharm-static-code-analysis">Simple Cleanup 3: PyCharm Static Code Analysis</a></li>
<li><a href="#simple-cleanp-4-pulling-strings-to-the-top">Simple Cleanp 4: Pulling Strings to The Top</a></li>
</ul>
</li>
<li><a href="#what-was-my-experience-so-far">What Was My Experience So Far?</a></li>
<li><a href="#what-is-next">What is Next?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">¶</a></h2>
<p>While it just happened to be the feature that was last on the list, I feel that it was
kind of fitting that image links were the last feature to be added.  Whether or not an
author creates Markdown content for a blog, documentation, or some other purpose,
a simple image can often improve the readability of each of those forms of documents.
Imagine going to your favorite game blog or art blog and seeing very good descriptions
of the topic being blogged about, but no pictures.  It just makes sense to add images to
documents, where needed, to enhance that document’s ability to convey the message that
the author is delivering.</p>
<p>From there, there are just a small number of cleanups that I want to do before going
on, so let’s go!</p>
<h2 id="what-is-the-audience-for-this-article">What Is the Audience For This Article?<a class="headerlink" href="#what-is-the-audience-for-this-article" title="Permanent link">¶</a></h2>
<p>While detailed more eloquently in
<a href="https://jackdewinter.github.io/2020/04/05/what-is-the-audience-for-my-blog/#what-is-the-audience-for-my-blog">this article</a>,
my goal for this technical article is to focus on the reasoning behind my solutions,
rather that the solutions themselves.  For a full record of the solutions presented in
this article, please go to this project’s GitHub repository and consult the
commits between
<a href="https://github.com/jackdewinter/pymarkdown/commit/517a0ecf5720016756670779a0bd058394797174">27 March 2020</a> and
<a href="https://github.com/jackdewinter/pymarkdown/commit/2b0baa443437b2fe538b4445b19244ae4e42b7b3">04 April 2020</a>.</p>
<h2 id="what-are-image-links">What Are Image Links?<a class="headerlink" href="#what-are-image-links" title="Permanent link">¶</a></h2>
<p>As I have covered in previous articles, a simple inline link is constructed as:</p>
<div class="highlight"><pre><span></span><span class="o">[</span><span class="n">foo</span><span class="o">]</span><span class="p">(</span><span class="o">/</span><span class="n">url</span><span class="w"> </span><span class="ss">"title"</span><span class="p">)</span><span class="w"></span>
</pre></div>
<p>and the corresponding reference link (and matching link reference definition) is
constructed as:</p>
<div class="highlight"><pre><span></span><span class="o">[</span><span class="n">boo</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="o">/</span><span class="n">url</span><span class="w"> </span><span class="ss">"title"</span><span class="w"></span>

<span class="err">!</span><span class="o">[</span><span class="n">boo</span><span class="o">]</span><span class="w"></span>
</pre></div>
<p>both producing the following HTML:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"/url"</span> <span class="na">title</span><span class="o">=</span><span class="s">"title"</span><span class="p">&gt;</span>foo<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
<p>In both examples, by changing the opening character sequence <code>[</code> to the opening
character sequence <code>![</code>, we transform the destination HTML into the following image
link:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">"/url"</span> <span class="na">alt</span><span class="o">=</span><span class="s">"foo"</span> <span class="na">title</span><span class="o">=</span><span class="s">"title"</span> <span class="p">/&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
<p>Besides the different starting characters, the first difference is that instead of the
<code>a</code> or anchor tag being produced, the <code>img</code> or image tag is produced.  Due to that
change, the <code>href</code> attribute is replaced with the <code>src</code> attribute, the <code>title</code>
attribute is left alone, and the inline text contained with the normal anchor link is
replaced with the <code>alt</code> attribute text.</p>
<p>The second difference is in the text that is assigned to the <code>alt</code> attribute.  For
normal links, the link text or link label is interpreted as inline text and placed
between the <code>&lt;a&gt;</code> and <code>&lt;/a&gt;</code> tags.  As this text has been moved to the image tag’s
<code>alt</code> attribute, a transformation must occur to ensure that only valid text is assigned
to the attribute.  While not strictly specified as a “MUST” in the specification, the
<a href="https://github.github.com/gfm/#images">images section</a> of the specification mentions:</p>
<blockquote>
<p>Though this spec is concerned with parsing, not rendering, it is recommended that in rendering to HTML, only the plain string content of the image description be used.</p>
</blockquote>
<p>This transformation is on display with
<a href="https://github.github.com/gfm/#example-581">example 581</a> as the Markdown text:</p>
<div class="highlight"><pre><span></span><span class="o">!</span><span class="p">[</span><span class="n">foo</span> <span class="o">*</span><span class="n">bar</span><span class="o">*</span><span class="p">]</span>

<span class="p">[</span><span class="n">foo</span> <span class="o">*</span><span class="n">bar</span><span class="o">*</span><span class="p">]:</span> <span class="n">train</span><span class="p">.</span><span class="n">jpg</span> <span class="ss">"train &amp; tracks"</span>
</pre></div>
<p>is transformed into:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">"train.jpg"</span> <span class="na">alt</span><span class="o">=</span><span class="s">"foo bar"</span> <span class="na">title</span><span class="o">=</span><span class="s">"train &amp;amp; tracks"</span> <span class="p">/&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
<p>In the above example, the <code>*</code> character indicating emphasis is removed from the string
<code>foo *bar*</code>, leaving the attribute value <code>foo bar</code> to be assigned to the <code>alt</code>
attribute.  For other inline processing sequence, similar transformations are made to
ensure that the vital information is kept with the token.</p>
<p>The final difference is a small change to the rule that links may not contain other
links.  This rule is changed so that links may not other links unless those links are
image links.  Consider <a href="https://github.github.com/gfm/#example-525">example 525</a>:</p>
<div class="highlight"><pre><span></span><span class="o">[</span><span class="n">![moon</span><span class="o">]</span><span class="p">(</span><span class="n">moon</span><span class="p">.</span><span class="n">jpg</span><span class="p">)</span><span class="err">]</span><span class="p">(</span><span class="o">/</span><span class="n">uri</span><span class="p">)</span><span class="w"></span>
</pre></div>
<p>which is transformed into:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"/uri"</span><span class="p">&gt;&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">"moon.jpg"</span> <span class="na">alt</span><span class="o">=</span><span class="s">"moon"</span> <span class="p">/&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
<p>While this may not look useful, consider the following Markdown:</p>
<div class="highlight"><pre><span></span><span class="o">[</span><span class="n">![moon</span><span class="o">]</span><span class="p">(</span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="k">static</span><span class="p">.</span><span class="n">thenounproject</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">png</span><span class="o">/</span><span class="mi">2852</span><span class="o">-</span><span class="mf">200.</span><span class="n">png</span><span class="p">)</span><span class="err">]</span><span class="p">(</span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="p">.</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="k">search</span><span class="vm">?</span><span class="n">q</span><span class="o">=</span><span class="n">the</span><span class="o">+</span><span class="n">moon</span><span class="p">)</span><span class="w"></span>
</pre></div>
<p>Once transformed, that Markdown becomes the following image:</p>
<p><a href="https://www.bing.com/search?q=the+moon"><img alt="moon" src="https://static.thenounproject.com/png/2852-200.png"/></a></p>
<p>That Markdown snippet produced an image tag within an anchor tag.  This presents the
reader with an image of a moon that may be clicked on.  When that image is clicked on,
the link that surrounds the image link is acted upon, navigating to the link supplied
in the outer link.  In this case, click on the image of the moon takes the reader to
the Bing search page, already primed with the search text for <code>the moon</code>.  This
feature used often to present styled buttons to a user instead of simple text for them
to click on.  Personally, I think the right image to click on makes more of an
impact and having that ability available to Markdown authors is a plus.</p>
<h2 id="simple-cleanups">Simple Cleanups<a class="headerlink" href="#simple-cleanups" title="Permanent link">¶</a></h2>
<p>With image links done, what remained were the various cleanups that I wanted to do
before declaring the parser “done”.  While each of these cleanups required code to be
rewritten, my stated goal with these cleanups was not to fix bugs, but to get the
code base in a more maintainable shape before fixing those bugs.  It was my hope
that by doing things in this order, it would make any bug fixing that would occur in
the future easier to perform and easier to validate.  We will see how that worked out in
the next article!  For now, on to the cleanups!</p>
<h3 id="simple-cleanup-1-splitting-up-the-tokenizedmarkdown-class">Simple Cleanup 1: Splitting Up the TokenizedMarkdown Class<a class="headerlink" href="#simple-cleanup-1-splitting-up-the-tokenizedmarkdown-class" title="Permanent link">¶</a></h3>
<p>The first cleanup on my list was to split up the
<code>TokenizedMarkdown</code> class into more clearly defined classes.  While I could have done
this at an earlier stage of the
project, I wanted to take a different approach with this project.  While the
<code>ParserHelper</code> and <code>HtmlHelper</code> classes were required for the early stages of the
project, there were other possible groupings I
wondered about.  Basically, I wondered if I would make the same grouping decisions at
the end of the parser phase as I would have at the start of that same parser phase.
In short, I wanted to experiment.  More on the results of that experiment at the end
of this section!</p>
<p>Going through the code and separating each grouping out was a chore, but a useful one.
The first
effort was to come up with the larger groupings.  Arriving at these groupings was a
simple task, as the
processing for the tokens is broken up into three sections: the functions for the
preliminary tokenization of the input were left in the <code>TokenizedMarkdown</code> class;
the functions combining contiguous text blocks were moved into the <code>CoalesceProcessor</code>
class; and the functions to handle inline processing were moved into the
<code>InlineProcessor</code> class.  This was a major chore, but it reinforced the separation
between the various processors and classes in the process, so all was good!</p>
<p>With those major regroupings undertaken, two of those three classes still contained huge
blocks of code, so it made sense to do further refinements along more
feature-based lines.  The <code>TokenizedMarkdown</code> class was my first target and was
broken down into the
<code>ContainerBlockProcessor</code> class and the <code>LeafBlockProcessor</code> class, which just seemed
like logical groups to extract from the main class.  From there, it similarly seemed
that the
<code>ContainerBlockProcessor</code> class was still too large, so I further extracted the
<code>ListBlockProcessor</code> class and the
<code>BlockQuoteProcessor</code> class.  At this point, I felt more confident that the different
functions for tokenization were in solid, well-defined, well-sized groups.</p>
<p>Similarly, the <code>InlineProcessor</code> class was too large so I extracted functions into the
<code>EmphasisHelper</code> class, the <code>LinkHelper</code> class and the <code>InlineHelper</code> class.  The main
brains of inline processing remained in <code>InlineProcessor</code>, coordinating when to apply
inline processing to the various tokens that needed it.  To allow for special processing
to be handled properly, the coordination of the <code>[</code>, <code>![</code>, and <code>]</code> link strings, and the
<code>*</code> and <code>_</code> emphasis strings was also kept in the <code>InlineProcessor</code> class, while the
actual processing of emphasis and link were moved to the <code>EmphasisHelper</code> class and the
<code>LinkHelper</code> class.  The remaining functions that implemented the less intensive
inline processing were added to the <code>InlineHelper</code> class.  Like my observation
for the tokenization classes in the last paragraph, to me this just seemed to be
the right groupings for these functions.</p>
<p>Comparing my choices against some notes I had scribbled down at the start of the
project, I found that I was decent at
projecting the larger strokes of the grouping, but really bad at my stab on the more
finer groups.  While the names are different than the ones I used, I was spot
on with the 3 high level processors: tokenizing, coalescing, and inline.  Furthermore,
when it comes to the specific classes for container blocks and leaf blocks, I had those
spot on.</p>
<p>And it was there I stopped.  I had a couple of scribbles for emphasis being on its own
with a question mark beside it, but that was it. The rest of the scribbles were all
followed by question marks, including a guess that each leaf block and container block
should be in its own class.  If I had to guess as to why I thought that way, I would
wager that I thought I would need more code for the inline processing while using less
code than I anticipated for the block processing.
When those assumptions on code amounts changed, it caused me to look at the rest
of the code and extract more specific groups into the groups detailed above.</p>
<p>The end results?  While I feel it was good to do a good high-level design of the
function groupings, I need to be prepared that those plans are going to need to be
revisited and redefined once I starting writing code.  But still, a useful experiment,
and the project’s code base was also more maintainable at the same time!</p>
<h3 id="simple-cleanup-2-reducing-complexity">Simple Cleanup 2: Reducing Complexity<a class="headerlink" href="#simple-cleanup-2-reducing-complexity" title="Permanent link">¶</a></h3>
<p>Up to this point in the development of the project, I was more intent on completing the
parser itself than to complete it with good organization and low complexity.  While
the simple reorganizations that I documented in the last section were a start, there
were three sets of complexity warnings that I disabled until later: the
<code>too-many-branches</code> warning,
the <code>too-many-statements</code> warning, and the <code>too-many-locals</code> warning.  While none of
these affected the quality of the parsing, I knew that a result of disabling these
warnings was that I would have to start resolving them at the end of the main block of
parser development.  As that time had arrived, my bar tab was now due.</p>
<p>For the most part, the resolution for all three warnings was the same: split the code
that the warning was complaining about into smaller, more focused functions.</p>
<p>Too many branches?  From experience, I have only run into 2 or 3 cases where having a
method with more than 10 or 15 branches was the right thing to do.  Most of the time,
too many branches means you are doing too much in your function, and by splitting
up the functionality into multiple functions, you keep the number of branches down and
the comprehension on what each function does goes up.  It’s almost always a win-win.</p>
<p>Too many statements?  Pretty much the same argument, but exchange statements for
branches.  Once again from experience, if you have a function that has more than 25-30
statements in it, it is hard for most people to truly understand what that function is
doing without a lot of comments.  Splitting the functionality across multiple
functions allows for those statements to be associated with named functions that
describes its purpose, instead of the reader trying to figure out “what does that
section do?”</p>
<p>Too many locals?  This is a tricky one with parsers, so I left it for last.  In most
cases, what I described for branches and statements goes for locals.  Too many of them
gets in the way of a clear understanding of what a function does.  From personal
experience, when the number of locals in a function exceeds somewhere between 10 and 15
variables, I usually need good logging or a good debugger to really understand what
each of the values should be at any point in the function.  Under 10 and I am okay.</p>
<p>But parsers? They are often the exception to the rule for a lot of things.  The amount
of state needed to properly parse something often causes a lot of locals and arguments
to be declared and passed around, many of them for temporary computations.  For
example, whenever a specification says “collect all X up to Y, except for”, it usually
means that one variable is needed for collecting, possibly one variable to report
errors, and the “except for” at the end most often means passing in some kind of state,
often from another part of the program.  Since parsers are more grammatically based
than other types of programs, their need to interface with these things called “users”
causes more variations that need to be dealt with than other types of programs.  At
least from my experience, that seems to be the case.</p>
<p>For the most part, I managed to clean up all cases of the branch warnings and statement
warnings and tried to address the local warnings.  While I did not complete all of
them, I felt it was a solid effort to get the parser into a more maintainable shape.
And as with all the other cleanups documented here, I do believe that each one is
contributing to the health of the project.  And that is a good feeling in my books!</p>
<h3 id="simple-cleanup-3-pycharm-static-code-analysis">Simple Cleanup 3: PyCharm Static Code Analysis<a class="headerlink" href="#simple-cleanup-3-pycharm-static-code-analysis" title="Permanent link">¶</a></h3>
<p>When I am authoring projects, I typically have a specific development environment or
editor for each language.  For my C# projects I use Visual Studio by
Microsoft, and for Java projects I use IntelliJ by JetBrains.  In both cases, these
editors are widely accepted as one of the best editors for that specific language.
While
Visual Studio can handle Python and JetBrains has a Python specific editor (PyCharm),
I find that I personally prefer a one language to one editor relationship.  As such,
I write most of my Python code in Visual Code.</p>
<p>However, while I do not use either editor for development, I do find that PyCharm has
some usefulness in running static analysis passes on my Python projects.  From
experience, the hints that PyCharm provides make the cost of the manual use of it as a
Static Code Analysis tool worthwhile.  And as I
was finished with the bulk of the development on the parser part of the project, I
thought it was a good time to look at the project through that lens.</p>
<p>One immediate benefit was that PyCharm has a very decent analysis engine, and it
gave me hints on how to improve the flow of my functions.  When none of
the other functions that use my function make use of the function’s <code>return</code> value,
PyCharm told
me that it makes sense to remove the return value.  When arguments or variables were not
being used, PyCharm suggested that they should be removed. And when I got into the
bad habit of incrementing a value by using <code>a = a + 1</code>, PyCharm pointed out that Python
also has the <code>+=</code> operator and I should rewrite the previous snippet as <code>a += 1</code>.
All in all, a lot of small, but useful improvements to clean up the project.</p>
<p>While my manual usage of PyCharm does not replace the need for running Flake8 and
PyLint over the project before I commit any changes, I believe it offers me a fresh
view of the code base
and gives me hints on where it thinks I can do better. As an added bonus, with few
exceptions, the changes are minor, and the entire batch of changes can be applied
quickly.  Personally, I consider using PyCharm in this manner akin to asking a friend
to take a read over a
document that I have been working on before I submit it.  As such, it is not always
about making the changes that PyCharm suggests but thinking about those changes and
deciding if those changes are what is best for your project.</p>
<h3 id="simple-cleanp-4-pulling-strings-to-the-top">Simple Cleanp 4: Pulling Strings to The Top<a class="headerlink" href="#simple-cleanp-4-pulling-strings-to-the-top" title="Permanent link">¶</a></h3>
<p>I wanted to do this cleanup for a while, partially for code cleanliness reasons and
partially for performance reasons.  In writing the first iteration of the parser, I
knew that I was focusing on getting the parser complete and not always following best
practices.  One of those best practices that I use, especially for parsers, is to make
sure that strings that I know are going to be used over and over again are
pulled out of their functions/methods and defined once at the top of the class.  In the
hurry of wanting to get the parser done, I had not kept this practice up.  As such,
there were multiple instances where I had certain strings, such as the block quote
string <code>&gt;</code>, in multiple places, instead of one place.</p>
<p>By aggregating these strings to the top of the modules where they were declared, I was
able to clean up the code and impact performance.  By moving the strings to the top
of the modules, it made it easier for me to see the strings and concepts
that were in each of the modules.  This also has a nice benefit of having a variable
name associated with the strings, allowing for easier searching through the project for
those concepts.  From a performance point of view, this also reduces the number of times
that string is declared within the module, using references to the module’s instance of
the string instead of creating a new instance every time that piece of code is executed.</p>
<p>All in all, for both cleanliness and performance reasons, it was a good cleanup to do!</p>
<h2 id="what-was-my-experience-so-far">What Was My Experience So Far?<a class="headerlink" href="#what-was-my-experience-so-far" title="Permanent link">¶</a></h2>
<p>From a code completion point of view, I felt that I had done well.  Sure, there
are still 5 scenario tests that are disabled and a number of issues and bugs that I have
logged for further research. But other than that, it was finished.</p>
<p>I am sure that some
of the issues are just clarifications that I need to prove are done right, and that
there are some real bugs that I am going to have to fix.  I am also sure that those
two lists are not going to be static and are going to interact with each other in some
way.  I am confident that while 1 of the disabled tests will require some interesting
thinking on my part (nested image links), the other 4 disabled tests will require some
serious changes to how I process lists.  But even with these in mind, I also have faith
that, due to the large number of scenario tests, that all of these issues will probably
only account for less than 2% of all of the scenarios I am ever going to run across,
and some of the more obscure scenarios to boot.  As such, I believe I can
take my time to address them when I have time, and not rush to solve them right away.</p>
<p>From a code quality point of view, I was happy to have some time to do some clean up.
In their own way, each of the cleanups helped the health of the project.  The first
cleanup added better organization of the code, the second and third cleanups increased
the maintainability of the code, and the fourth cleanup added a bit of a performance
improvement.  Each of those cleanups moved the project to a happier place,
quality-wise, in their own way.  Big plus there for me!</p>
<p>From a development point of view, getting to this point was indeed a milestone, but it
was with mixed feelings that I got
here.  With respect to the base parser, outside of some issues that I have previously
noted, it was complete.  Sure, I knew that I needed to fix those issues, but after 713
examples (with 5 examples skipped), it was done.  Along the way, I modified the existing
648 examples to add 70 new examples to properly test out the parser.  And sometimes it
was a hard journey to get those working.</p>
<p>Not too complain… but I initially felt that my fun was over.  Could I write a parser
to properly parse Markdown into intermediate tokens? Yes. Would I be able to finish it
while keeping the code coverage and scenario coverage high? Yes. Would I then be able
to take those tokens and
not only use them to power rules, but to emit the specification’s HTML?  Yes.  For me,
determining whether I can complete challenges like that is fun, and having
arrived at the answer, I felt that a lot of the project’s fun was completed.</p>
<p>But in thinking about that some more, I realized that while one part of the fun for
the project was over, it was up to me to decide whether I would still consider
the project fun.  As I largely equate challenges with fun, that means it is up to me to
find the challenges left in the project, and to overcome them.  Since this is my first
real project in Python, at the very least there should be challenges around releasing
it.  Basically, I just need to take a better look at the project to determine where the
challenges are.  It just took me thinking about what perspective I wanted to have.</p>
<h2 id="what-is-next">What is Next?<a class="headerlink" href="#what-is-next" title="Permanent link">¶</a></h2>
<p>While I was anxious to get to writing rules, there were some things that needed to be
addressed with the parser before I could continue.  While I could have left them there
and dealt with them later, I wanted to take a good crack at the top items on the list
and deal with them now, before the rules were added.  So next article:
“Refactoring: The Sequel!”</p>


             
 
                <p id="post-share-links">
    Like this post? Share on:
    <a href="https://twitter.com/intent/tweet?text=Markdown%20Linter%20-%20Adding%20Image%20Links%20and%20Simple%20Cleanup&url=https%3A//jackdewinter.github.io/2020/04/20/markdown-linter-adding-image-links-and-simple-cleanup/&hashtags=markdown-linter,linter-tokenizer" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jackdewinter.github.io/2020/04/20/markdown-linter-adding-image-links-and-simple-cleanup/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
    ❄
    <a href="mailto:?subject=Markdown%20Linter%20-%20Adding%20Image%20Links%20and%20Simple%20Cleanup&amp;body=https%3A//jackdewinter.github.io/2020/04/20/markdown-linter-adding-image-links-and-simple-cleanup/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
    </p>

            
            






<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="https://jackdewinter.github.io/2020/04/20/markdown-linter-adding-image-links-and-simple-cleanup/#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">

                        <script src="https://utteranc.es/client.js"
        data-repo="jackdewinter/jackdewinter.github.io"
        data-issue-term="markdown-linter-adding-image-links"
        data-label="Comments"
        data-theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://jackdewinter.github.io/2020/04/13/markdown-linter-adding-reference-links/" title="Previous: Markdown Linter - Adding Reference Links">Markdown Linter - Adding Reference Links</a></li>
                <li class="next-article"><a href="https://jackdewinter.github.io/2020/04/27/markdown-linter-reducing-the-parsers-technical-debt/" title="Next: Markdown Linter - Reducing the Parser&#39;s Technical Debt">Markdown Linter - Reducing the Parser's Technical Debt</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~15 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2020-04-20T00:00:00-07:00">Apr 20, 2020</time>
        <h4>Markdown Linter</h4>
    <ul class="multi-parts-list">
            <li >
            <a href="https://jackdewinter.github.io/2019/12/08/markdown-linter-collecting-requirements/" title="Markdown Linter - Collecting Requirements">Part 1: Markdown Linter - Collecting Requirements</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2019/12/16/markdown-linter-setting-up-parser-tests/" title="Markdown Linter - Setting Up Parser Tests">Part 2: Markdown Linter - Setting Up Parser Tests</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2019/12/22/markdown-linter-parser-testing-strategy/" title="Markdown Linter - Parser Testing Strategy">Part 3: Markdown Linter - Parser Testing Strategy</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/01/27/markdown-linter-parsing-normal-markdown-blocks/" title="Markdown Linter - Parsing Normal Markdown Blocks">Part 4: Markdown Linter - Parsing Normal Markdown Blocks</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/02/03/markdown-linter-adding-block-quotes-and-lists/" title="Markdown Linter - Adding Block Quotes and Lists">Part 5: Markdown Linter - Adding Block Quotes and Lists</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/02/10/markdown-linter-adding-html-blocks/" title="Markdown Linter - Adding HTML Blocks">Part 6: Markdown Linter - Adding HTML Blocks</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/02/17/markdown-linter-taking-time-to-refactor-post-block-implementation/" title="Markdown Linter - Taking Time to Refactor -- Post-Block Implementation">Part 7: Markdown Linter - Taking Time to Refactor -- Post-Block Implementation</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/02/24/markdown-linter-starting-inline-processing/" title="Markdown Linter - Starting Inline Processing">Part 8: Markdown Linter - Starting Inline Processing</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/03/02/markdown-linter-taking-time-to-refactor-post-easy-inlines/" title="Markdown Linter - Taking Time to Refactor -- Post-Easy Inlines">Part 9: Markdown Linter - Taking Time to Refactor -- Post-Easy Inlines</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/03/09/markdown-linter-autolinks-raw-html-and-line-breaks/" title="Markdown Linter - Autolinks, Raw HTML, and Line Breaks">Part 10: Markdown Linter - Autolinks, Raw HTML, and Line Breaks</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/03/16/markdown-linter-verifying-base-scenarios/" title="Markdown Linter - Verifying Base Scenarios">Part 11: Markdown Linter - Verifying Base Scenarios</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/03/23/markdown-linter-adding-inline-emphasis/" title="Markdown Linter - Adding Inline Emphasis">Part 12: Markdown Linter - Adding Inline Emphasis</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/03/30/markdown-linter-adding-inline-links/" title="Markdown Linter - Adding Inline Links">Part 13: Markdown Linter - Adding Inline Links</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/04/06/markdown-linter-adding-link-reference-definitions/" title="Markdown Linter - Adding Link Reference Definitions">Part 14: Markdown Linter - Adding Link Reference Definitions</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/04/13/markdown-linter-adding-reference-links/" title="Markdown Linter - Adding Reference Links">Part 15: Markdown Linter - Adding Reference Links</a>
            </li>
            <li  class="active-part">
            Part 16: Markdown Linter - Adding Image Links and Simple Cleanup
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/04/27/markdown-linter-reducing-the-parsers-technical-debt/" title="Markdown Linter - Reducing the Parser's Technical Debt">Part 17: Markdown Linter - Reducing the Parser's Technical Debt</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2020/05/03/markdown-linter-splitting-up-the-articles/" title="Markdown Linter - Splitting Up The Articles">Part 18: Markdown Linter - Splitting Up The Articles</a>
            </li>
    </ul>
            <h4>Category</h4>
            <a class="category-link" href="https://jackdewinter.github.io/categories#software-quality-ref">Software Quality</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://jackdewinter.github.io/tags#linter-tokenizer-ref">linter tokenizer
                    <span>14</span>
</a></li>
                <li><a href="https://jackdewinter.github.io/tags#markdown-linter-ref">markdown linter
                    <span>77</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/jackdewinter" title="github-alt" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/jackdewinter/" title="linkedin" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://jackdewinter.github.io/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2021 by Jack De Winter and licensed under a <a rel="license"
  href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.

    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>