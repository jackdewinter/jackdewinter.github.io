<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Jack De Winter" />

        <meta name="description" content="Summary¶ In my last article, I talked about how I am making strides to get any remaining whitespace issues dealt with. Namely, tab characters. In this week’s article, I will talk about the process I have made in doing just that. Before We Start¶ I apologize to any readers …
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="markdown linter, core linter, Software Quality, " />

<meta property="og:title" content="Making Progress with Tabs "/>
<meta property="og:url" content="https://jackdewinter.github.io/2022/10/24/making-progress-with-tabs/" />
<meta property="og:description" content="Summary¶ In my last article, I talked about how I am making strides to get any remaining whitespace issues dealt with. Namely, tab characters. In this week’s article, I will talk about the process I have made in doing just that. Before We Start¶ I apologize to any readers …" />
<meta property="og:site_name" content="Jack&#39;s Digital Workbench" />
<meta property="og:article:author" content="Jack De Winter" />
<meta property="og:article:published_time" content="2022-10-24T00:00:00-07:00" />
<meta name="twitter:title" content="Making Progress with Tabs ">
<meta name="twitter:description" content="Summary¶ In my last article, I talked about how I am making strides to get any remaining whitespace issues dealt with. Namely, tab characters. In this week’s article, I will talk about the process I have made in doing just that. Before We Start¶ I apologize to any readers …">

        <title>Making Progress with Tabs  · Jack&#39;s Digital Workbench
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://jackdewinter.github.io/theme/css/style.min.css?bec7d543">

        <link href="https://jackdewinter.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack&#39;s Digital Workbench - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://jackdewinter.github.io/"><span class=site-name>Jack's Digital Workbench</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jackdewinter.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://jackdewinter.github.io/categories">Categories</a></li>
                                <li ><a href="https://jackdewinter.github.io/tags">Tags</a></li>
                                <li ><a href="https://jackdewinter.github.io/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://jackdewinter.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://jackdewinter.github.io/2022/10/24/making-progress-with-tabs/">
                Making Progress with Tabs
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#before-we-start">Before We Start</a></li>
<li><a href="#history-with-tabs">History With Tabs</a></li>
<li><a href="#taking-a-short-side-trip">Taking A Short Side Trip</a></li>
<li><a href="#translating-tabs-back">Translating Tabs Back</a></li>
<li><a href="#what-happened-with-indented-code-blocks">What Happened With Indented Code Blocks?</a></li>
<li><a href="#what-about-link-reference-definitions">What About Link Reference Definitions?</a></li>
<li><a href="#what-about-lists-and-block-quotes">What About Lists and Block Quotes?</a></li>
<li><a href="#working-out-the-kinks">Working Out The Kinks</a></li>
<li><a href="#what-is-going-on">What Is Going On?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>In my
<a href="https://jackdewinter.github.io/2022/10/10/hitting-the-mark-with-tabs/">last article</a>, I talked
about how I am making strides to get any remaining whitespace issues dealt with.
Namely, tab characters. In this week’s article, I will talk about the process I have made
in doing just that.</p>
<h2 id="before-we-start">Before We Start<a class="headerlink" href="#before-we-start" title="Permanent link">¶</a></h2>
<p>I apologize to any readers out there, but I was unable to author an article last week.
Due to a small accident  and family commitments, I had some bad headaches and little
energy left after dealing with both of those things.  It does not happen too often,
but I just did not have any mental space to write anything publishable.  I hope that
I can do better this week!</p>
<h2 id="history-with-tabs">History With Tabs<a class="headerlink" href="#history-with-tabs" title="Permanent link">¶</a></h2>
<p>As I mentioned in the last article, when I started with the
<a href="https://github.com/jackdewinter/pymarkdown">PyMarkdown</a> project a few years ago,
I needed to decide how to manage tab characters.  At the time, I thought
that the right decision was to deal with space characters instead of tab characters
and space characters.  Following that belief, I converted all tabs to the correct
number of tabs, following Markdown’s “tabs as tab stops” rule. However, looking back
at my project requirements, I decided that to be faithful to my requirements, I needed
to add tab character support back in.</p>
<p>And despite having to take it easy for the better part of a week off due to my accident,
things are going ahead nicely.  As of last night, all elements have support for tab characters
except for lists, block quotes, and link reference definitions.  And while the progress
has not been steady, it continues forward at a good pace.</p>
<h2 id="taking-a-short-side-trip">Taking A Short Side Trip<a class="headerlink" href="#taking-a-short-side-trip" title="Permanent link">¶</a></h2>
<p>Last week I took a couple of days and tried out a “what if” scenario.
The question that I wanted to play out was whether I was
correct in fixing tab characters after parsing.  Insteadm what if I had started to
go through the code and expect the code to manage space characters and tab characters?
I wanted it to be more than a thought experiment.  I wanted to try it out and see
what the cost would be.</p>
<p>While the first results were positive, the rest of the results went downhill quickly.  One thing
that I found was that the initial transformation brought to the parser was a clear standard
on the length of certain elements.  As the transformation was performed at the start
of the line, there was no need to track the number of characters that occurred before
the start of the line… it was always zero.  Since Markdown uses tab stops, knowing
the start position for interpreting a tab character is essential.  Having to track that
through multiple functions was just messy, and I got it wrong multiple times. That
was easily one headache that I dodged.</p>
<p>Another thing that was an issue was interpreting tab stops on the fly.  Not to
complain too much, but it was painful.  Instead of seeing the correct number of space
characters from an algorithm that I knew was correct, I had to figure out the start
of the string each time.  If I was off by one, the length of the string would not
be correct.  And I realize that it may sound like whining but looking at two strings
with tabs in each end mentally trying to compare them was simply hard.  When going
through this experiment, I found that when I was looking at parts of the code, I was
focusing more on the tab expansions than the code itself.  It just felt off.</p>
<p>And finally, perhaps from a biased viewpoint, my confidence was down as I was playing
out this “what if” scenario.  It can very well be that I have grown reliant on the
fact that the string <code>x\ty</code> will get translated into <code>x   y</code>, if it starts at the
beginning of the line. To me, it just looks cleaner.  And when I am verifying the
code or debugging the code, I want clean and easy to read. When I look at the
translation algorithm and the output from that algorithm, I have a tremendous amount
of confidence that I translated the tab characters properly.  When I looked at
the same types of scenarios in the debugger with an untranslated tab character,
my confidence was noticeably lower.</p>
<p>Was it the right choice for everyone? Possibly not.  But as I am the maintainer
and developer for the project, what is important is that it was the right choice
for me.  And now I have that confidence that I made the right choice.</p>
<h2 id="translating-tabs-back">Translating Tabs Back<a class="headerlink" href="#translating-tabs-back" title="Permanent link">¶</a></h2>
<p>Except for Link Reference Definitions, all other Inline elements and
Leaf Block elements are done.  Some were a bit trickier than others, but they
are all done.  In all cases, that work involved matching up where each index
was in the “normal” line and matching it up to the same index in the “tabified”
line.  With those anchors in place, it was just a matter of replacing a part
of the normal line with the same part from the tabified line, and things we
done.</p>
<p>It took a bit to translate each element, including extra test scenarios
for most elements, but it was worth it.</p>
<h2 id="what-happened-with-indented-code-blocks">What Happened With Indented Code Blocks?<a class="headerlink" href="#what-happened-with-indented-code-blocks" title="Permanent link">¶</a></h2>
<p>Having completed Indented Code Blocks, I can say that their translation was only
a slight bit trickier than the other elements.  Nothing much to report there.
What I thought was going to be an issue with tab characters and Indented Code
Block elements was about housing them inside of containers.  But more
on that later.</p>
<h2 id="what-about-link-reference-definitions">What About Link Reference Definitions?<a class="headerlink" href="#what-about-link-reference-definitions" title="Permanent link">¶</a></h2>
<p>The thing that I am going to work on starting tomorrow are Link Reference Definitions.  The
difficult part with these elements is their capability for rewinding.  As I
covered in other articles, a parser can only tell if a Link Reference Definition
is complete by one of two methods: a full Link Reference Definition is parsed
OR the next line is examined, not found to be a continuation, and then having
a rewind mechanism to manage rewinding the input.  While there are other ways
to manage that last method, they are not guaranteed to work and have their own
issues.  As painful as rewinding is, it is the most dependable.</p>
<p>When I added the current Link Reference Definition support to the parser, I did not have to worry
about reverting to an original form of the string.  As such, I added
code to kind of handle it, but that code was not thoroughly tested. Well… it
is now going to get tested.  I know I need to place the tabified string in the
queue to get reprocessed, I am just not sure how I will carry that out. I
either need to adjust the normal string or have another queue to handle a
special tabified string.</p>
<p>But as that is the first task for this week, I am not worried about it. Yet.</p>
<h2 id="what-about-lists-and-block-quotes">What About Lists and Block Quotes?<a class="headerlink" href="#what-about-lists-and-block-quotes" title="Permanent link">¶</a></h2>
<p>This is where the fun comes in.  As I showed in last week’s article,
changing tabs into spaces and back can be tricky in some situations.  From
last week, consider the Markdown snippets:</p>
<div class="highlight"><pre><span></span><span class="o">-</span> <span class="k">first</span> <span class="n">line</span>
  <span class="o">-</span> <span class="k">second</span> <span class="n">line</span>
<span class="err">\</span><span class="n">t</span><span class="o">-</span> <span class="n">third</span> <span class="n">line</span>
</pre></div>
<p>and</p>
<div class="highlight"><pre><span></span><span class="o">-</span> <span class="k">first</span> <span class="n">line</span>
<span class="err">\</span><span class="n">tsecond</span> <span class="n">line</span>
</pre></div>
<p>From a translation to HTML and understand point of view, both snippets
are easy to parse.  In the first snippet, the tab expands to four characters of
prefix, effectively creating a triply nested Unordered List block, with a single
item having the text <code>third line</code>.  The second snippet is similar but creates
a singly nested Unordered List with a single item having the text
<code>first line\nsecond line</code>.</p>
<p>But there is more to see when examined from a tokenization point of view.  The tab that is translated
in the first snippet is translated to four space characters that are exclusively in the
list item’s prefix area.  While that might cause some issues spanning two List Blocks, let me table that observation.
The real problem appears when generating tokens for the second snippet. The tab
character is at the same column as in the first snippet, so it expands to four space
characters.</p>
<p>The real question is how are those space characters distributed between the Unordered List
token of the owning list and the Text token containing the line’s text?</p>
<h2 id="working-out-the-kinks">Working Out The Kinks<a class="headerlink" href="#working-out-the-kinks" title="Permanent link">¶</a></h2>
<p>Strangely, it took some experimentation with Indented Code Blocks to figure this out.</p>
<p>Note, for simplicity’s sake, in the following snippets I am representing space characters as <code>\b</code> and tab characters
as <code>\t</code> in the following snippets. Otherwise, it would be hard to see the differences!</p>
<p>Using the Babelmark tool, I submitted <a href="https://babelmark.github.io/?text=%09%09foo">this snippet</a>:</p>
<div class="highlight"><pre><span></span><span class="err">\</span><span class="n">t</span><span class="err">\</span><span class="n">tfoo</span>
</pre></div>
<p>and received back the following HTML:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">pre</span><span class="p">&gt;&lt;</span><span class="nt">code</span><span class="p">&gt;</span>\tfoo
<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
</pre></div>
<p>In the GitHub Flavored Markdown specification, there is a stated principle referred
to as the <a href="https://github.github.com/gfm/#principle-of-uniformity">principle of uniformity</a>:</p>
<blockquote>
<p>principle of uniformity: if a chunk of text has a certain meaning, it will continue
to have the same meaning when put into a container block (such as a list item
or blockquote).</p>
</blockquote>
<p>Basically, if we take our first snippet and place it within a container block, the
original block of text should retain its meaning.  Therefore, we can submit
<a href="https://babelmark.github.io/?text=-+%09%09foo">this snippet</a>:</p>
<div class="highlight"><pre><span></span><span class="o">-</span><span class="err">\</span><span class="n">b</span><span class="err">\</span><span class="n">t</span><span class="err">\</span><span class="n">tfoo</span>
</pre></div>
<p>and observe its HTML output.</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">pre</span><span class="p">&gt;&lt;</span><span class="nt">code</span><span class="p">&gt;</span>\b\bfoo
<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
<p>Taking the container HTML code away, the principle is supported as the Indented
Code Block is still there, but with a slight variation.  That variation is that
the entire indent was translated into space characters, totally removing any trace
of the tab characters.</p>
<h2 id="what-is-going-on">What Is Going On?<a class="headerlink" href="#what-is-going-on" title="Permanent link">¶</a></h2>
<p>After doing my usual scribbling, here is what I believe is happening.  Because of its location
in column three, the first tab character is expanded to two characters and the second
tab character is expanded to four characters for a total of six characters.  Allowing
for four space characters to be used for the Indented Code Block, which leaves the
two space characters that are seen preceding the word <code>foo</code>.</p>
<p>I repeated this experiment with other elements, number of tabs, and number of spaces,
and that relationship seemed to always hold.  From this, the reasonable conclusion
is that to avoid any problems, any leading tab characters are always represented as
spaces.  This makes sense and this is backed up by experimental data.</p>
<p>Why is this important?  Because it gives me a solid rule to follow when translating
the spaces back into tab characters.  And that helps me out when I need to come up
with an algorithm for how to tokenize the tabs.  I do not have that algorithm yet,
but after I deal with Link Reference Definitions, which is the next thing on my plate.
Stay tuned!</p>


             
 
                <p id="post-share-links">
    Like this post? Share on:
    <a href="https://twitter.com/intent/tweet?text=Making%20Progress%20with%20Tabs&url=https%3A//jackdewinter.github.io/2022/10/24/making-progress-with-tabs/&hashtags=markdown-linter,core-linter" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jackdewinter.github.io/2022/10/24/making-progress-with-tabs/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
    ❄
    <a href="mailto:?subject=Making%20Progress%20with%20Tabs&amp;body=https%3A//jackdewinter.github.io/2022/10/24/making-progress-with-tabs/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
    </p>

            
            






<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="https://jackdewinter.github.io/2022/10/24/making-progress-with-tabs/#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">

                        <script src="https://utteranc.es/client.js"
        data-repo="jackdewinter/jackdewinter.github.io"
        data-issue-term="progress-with-tabs"
        data-label="Comments"
        data-theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://jackdewinter.github.io/2022/10/10/hitting-the-mark-with-tabs/" title="Previous: Hitting The Mark with Tabs">Hitting The Mark with Tabs</a></li>
                <li class="next-article"><a href="https://jackdewinter.github.io/2022/11/07/saying-goodbye-is-never-easy/" title="Next: Saying Goodbye Is Never Easy">Saying Goodbye Is Never Easy</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~8 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2022-10-24T00:00:00-07:00">Oct 24, 2022</time>
            <h4>Category</h4>
            <a class="category-link" href="https://jackdewinter.github.io/categories#software-quality-ref">Software Quality</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://jackdewinter.github.io/tags#core-linter-ref">core linter
                    <span>105</span>
</a></li>
                <li><a href="https://jackdewinter.github.io/tags#markdown-linter-ref">markdown linter
                    <span>123</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/jackdewinter" title="github-alt" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/jackdewinter/" title="linkedin" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://jackdewinter.github.io/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2021 by Jack De Winter and licensed under a <a rel="license"
  href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.

    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>