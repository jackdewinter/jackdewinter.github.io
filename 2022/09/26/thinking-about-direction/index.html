<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Jack De Winter" />

        <meta name="description" content="Summary¶ In my last article, I talked the artform called debugging. In this article, I am going to think aloud about the various things that I am thinking about for the PyMarkdown project. It All Takes Planning¶ When I started the PyMarkdown project, I just wanted to prove that I …
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="markdown linter, core linter, Software Quality, " />

<meta property="og:title" content="Thinking About Direction "/>
<meta property="og:url" content="https://jackdewinter.github.io/2022/09/26/thinking-about-direction/" />
<meta property="og:description" content="Summary¶ In my last article, I talked the artform called debugging. In this article, I am going to think aloud about the various things that I am thinking about for the PyMarkdown project. It All Takes Planning¶ When I started the PyMarkdown project, I just wanted to prove that I …" />
<meta property="og:site_name" content="Jack&#39;s Digital Workbench" />
<meta property="og:article:author" content="Jack De Winter" />
<meta property="og:article:published_time" content="2022-09-26T00:00:00-07:00" />
<meta name="twitter:title" content="Thinking About Direction ">
<meta name="twitter:description" content="Summary¶ In my last article, I talked the artform called debugging. In this article, I am going to think aloud about the various things that I am thinking about for the PyMarkdown project. It All Takes Planning¶ When I started the PyMarkdown project, I just wanted to prove that I …">

        <title>Thinking About Direction  · Jack&#39;s Digital Workbench
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://jackdewinter.github.io/theme/css/style.min.css?bec7d543">

        <link href="https://jackdewinter.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack&#39;s Digital Workbench - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://jackdewinter.github.io/"><span class=site-name>Jack's Digital Workbench</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jackdewinter.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://jackdewinter.github.io/categories">Categories</a></li>
                                <li ><a href="https://jackdewinter.github.io/tags">Tags</a></li>
                                <li ><a href="https://jackdewinter.github.io/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://jackdewinter.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://jackdewinter.github.io/2022/09/26/thinking-about-direction/">
                Thinking About Direction
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#it-all-takes-planning">It All Takes Planning</a></li>
<li><a href="#starting-with-the-specification-and-specification-test-cases">Starting With The Specification and Specification Test Cases</a></li>
<li><a href="#clear-goals-and-requirements">Clear Goals and Requirements</a></li>
<li><a href="#clean-separation-of-responsibilities">Clean Separation of Responsibilities</a></li>
<li><a href="#extensibility">Extensibility</a></li>
<li><a href="#quality">Quality</a></li>
<li><a href="#where-does-that-leave-the-project">Where Does That Leave The Project?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>In my
<a href="https://jackdewinter.github.io/2022/09/19/debugging-the-story-continues/">last article</a>, I talked the artform
called debugging. In this article, I am going to think aloud about the various
things that I am thinking about for the <a href="https://github.com/jackdewinter/pymarkdown">PyMarkdown</a> project.</p>
<h2 id="it-all-takes-planning">It All Takes Planning<a class="headerlink" href="#it-all-takes-planning" title="Permanent link">¶</a></h2>
<p>When I started the <a href="https://github.com/jackdewinter/pymarkdown">PyMarkdown</a> project,
I just wanted to prove that I could write a parser in Python and have it been
decent.  While I have proven the first part, that I can write a parser in Python, I
am still struggling with whether I would call it a decent parser.  For me to
call it a decent parser means that I have thought out and implemented a variety of
things that I would say is essential to a parser.</p>
<h2 id="starting-with-the-specification-and-specification-test-cases">Starting With The Specification and Specification Test Cases<a class="headerlink" href="#starting-with-the-specification-and-specification-test-cases" title="Permanent link">¶</a></h2>
<p>For me, the start of any parser is having a good understanding of what it is that
I am trying to parse.  In the beginning, I do not need to understand the entire
specification, but I do need to have read the entire thing from the first line
to the last line.  Call me foolish, but until I have the one complete pass through
the specification, I do not believe I have an adequate picture to start with.</p>
<p>I know I am not going to remember the entire specification.
I would be impressed by anyone who can remember the entire specification after
just one pass.  What I look for are those parts of the specification that I
can figure out will cause me issues. At the very least, I want to try and keep
those in mind for my designing of the parser components. If possible, I write down scenario
tests against the specification that I can use to properly test my parser.  But
to be honest, from a first pass, that is a nice-to-have, not a must have.</p>
<p>For any Markdown parser, the golden specification is the
<a href="https://github.github.com/gfm/">GitHub Flavored Markdown</a> specification. As a
mature specification, it not only has the raw specification itself, but over six hundred
scenarios and their expected HTML output.  While many specifications have not
included this information in the past, this is starting to become a more frequent
occurrence.  If not in the document itself, those test cases appear in a companion document
and are being seen as the best way to concretely describe the specification. As a
bonus, there are some rudimentary scenarios that the parser is expected to manage.</p>
<p>From a parser point of view, I believe that the PyMarkdown project has accomplished
that goal in spades.  With over five thousand scenario tests currently passing against the
project, I can confidently state that 99% of the scenario tests pass, and I am
getting those remaining tests passing.  To be clear, there are four tests dealing
with block quotes and lists starting in different columns, and that is on the near
future list of things to address.</p>
<h2 id="clear-goals-and-requirements">Clear Goals and Requirements<a class="headerlink" href="#clear-goals-and-requirements" title="Permanent link">¶</a></h2>
<p>Having one or more clear goals are important before working on any project.
For the PyMarkdown project, the main goal was a simple one: to provide a framework
with which I can create rules that can evaluate Markdown and provide feedback on
its structure.  From there, the main requirements were developed.</p>
<p>For those readers that do not want to read the entire article from
<a href="https://jackdewinter.github.io/2019/12/08/markdown-linter-collecting-requirements/">December 2019</a>,
those requirements are:</p>
<ul>
<li>must be able to see an accurate tokenization of the markdown document before translating to HTML</li>
<li>all whitespace must be encoded in that token stream as-is</li>
<li>initial tokenization for GitHub Flavored Markdown only, add others later</li>
<li>must be able to provide a consistent lexical scan of the Markdown document from the command line</li>
<li>extending the base linting rules should require very little effort</li>
<li>written in Python</li>
</ul>
<p>Coming up on three years since that article was written, it is fair to
look back and figure out how the project is meeting those requirements.</p>
<p>From a project perspective, the good news is that the project itself has come a long
way in meeting those requirements.  Without reservation, I believe that
the accurate tokenization, GFM parsing, consistent tokenization, and written
in Python requirements have been solidly met.  And to be clear, I do mean without
reservation, not close to with a few reservations.  With the entire parser
written in Python and over five thousand scenario tests, there is no doubt in my mind that
it meets those requirements.</p>
<p>With respect to the whitespace encoding requirement, the project is most of the
way there.  To finish things up, I just need to change the whitespace
tests that I recently wrote to properly look for tabs where tabs were specified.
It is not a big change, but it will finish the adherence to this requirement.</p>
<p>That leaves the extending requirement, and it is an important enough requirement
that I have added a full section for that below.  Looking at how things are
so far, that comes out to the main goal being met, four of six requirements being
met, one of those requirements being within reach, and one to be talked about later.
Not bad.</p>
<h2 id="clean-separation-of-responsibilities">Clean Separation of Responsibilities<a class="headerlink" href="#clean-separation-of-responsibilities" title="Permanent link">¶</a></h2>
<p>Call it an old habit of mine, but I believe that one of my successes in
both the testing field and the development field is my strict regimen around keeping
a clear separation of responsibilities between various parts of a project.  Unless
there is no other way to accomplish it, I passionately believe that each section of a project
should be consistently separate from the others.
For the PyMarkdown project, I think I have made substantial progress is this area.  To be
blunt though, I probably crossed that line more often than I should have.  Sometimes
it was just more expedient to deal with it in that manner.  But I also know that I
usually pay for crossing that line later.</p>
<p>There are good examples of where I have implemented clean separations
in the PyMarkdown project.  The first is the clear separation of the three stages of
parsing into three separate processors: the block processor, the coalesce processor,
and the inline processor.  The first processor takes care of any blocks and produces a token
stream of those container blocks and leaf blocks.  The second processor takes care of coalescing
any consecutive text tokens to allow the third processor to do the inline processing
without having to span text tokens.  Keeping each of those processors focused on
one main concept is one of the things that I believe made the parser work as well
as it has.</p>
<p>Not everything is perfect though.  While the inline processing works well, and the
handling of leaf blocks works well, the handling of container blocks needs
a lot of work.  One of the reasons that I have invested time into writing more
scenario tests for the container blocks is that they need work.  And
once I get all those tests passing, I want to take the time to see if I can
break down the container handling and refactor it.  There are just too many little
fixes in it for my taste.</p>
<h2 id="extensibility">Extensibility<a class="headerlink" href="#extensibility" title="Permanent link">¶</a></h2>
<p>Extensibility is the one thing that is tricky to implement in a parser.  The rules
themselves are extensible by design, so I get some points there.  But when it comes
to the parser itself, there are glimpses of getting ready to extend the parser, but
no concrete steps.</p>
<p>One reason for that is that adding something to a parser can often introduce
scenarios that were not thought of originally.  Let me use one of the feature
requests as an example.  One of the users wants to be able to have support for
Latex formulas and properly detecting any whitespace, like how normal emphasis
works.  This is required as normal Latex formulas can have arbitrary spacing and
formulas can use the <code>*</code> character as part of the formula.</p>
<p>But adding in support for Latex blocks come with questions that may be difficult to
answer.  Are there solid specifications for Latex Markdown blocks?  What are the
differences between those blocks and emphasis blocks or codespan blocks?  Would I
need to add new support code, or could I leverage existing code?  What are the
border cases that I need to deal with?
And those are only the questions that come up with Latex formulas themselves.  I
also must figure out if there are any interactions with other elements, and what
those interactions are.  </p>
<p>Even before that starts, I need to take the time to extract the non-container
code for elements and make them more modular.  That is going to have its own
problems.  It is something I know I need to do, but I have put it off until I
can make sure that the existing code is very solid.  But that time is
just around the corner, so I need to get ready.</p>
<h2 id="quality">Quality<a class="headerlink" href="#quality" title="Permanent link">¶</a></h2>
<p>From a history of working on projects from a test and quality perspective, this is always
a concern of mine, even though I rarely state it explicitly.  It is just part of how I
work.  If I do not have near 95% plus test coverage, I need a good reason.  If I do not
have good user stories and scenarios, I take the time to research them.  It is just part
of my normal development process.</p>
<p>One of the most important decisions on quality that I made is not to trust myself
with writing the best Python code possible.  Do not get me wrong, I am very decent
at writing Python code, but I would not categorize myself in the “best” category. That
is why I use tools like Pyroma, Flake8, PyLint, and Sourcery.Io to scan my code with
each commit.  Running these tools does not make my code perfect, but they
make my code better.  And that is good enough for me.</p>
<h2 id="where-does-that-leave-the-project">Where Does That Leave The Project?<a class="headerlink" href="#where-does-that-leave-the-project" title="Permanent link">¶</a></h2>
<p>Let me recap where my thinking is so far:</p>
<ul>
<li>Clear specification and test cases. <em>Check</em>.</li>
<li>Need to work on variable start position cases.</li>
<li>Clear goal and clear requirements.  <em>Check</em>.</li>
<li>Most of the requirements are already met, so getting the whitespace requirement completed is a priority.</li>
<li>Separation of responsibilities. <em>Check</em>.</li>
<li>Most of the code is in decent shape, with the container block processing being one of the outliers.</li>
<li>It is “working”, but I want to take the time to make it cleaner.</li>
<li>Extensibility. <em>Meh</em></li>
<li>Plugins are extensible, but parser itself is not.</li>
<li>Need to move common elements out into their own modules.</li>
<li>Quality. <em>Check</em>.</li>
<li>Continuous integration with checks, both locally and on GitHub.</li>
</ul>
<p>To be honest, when I started this article, I was concerned that I was going to
uncover more things to be done than I have just listed.  That is a relief.
But at the same time, it is a good working list that will help me move the project
forward!</p>


             
 
                <p id="post-share-links">
    Like this post? Share on:
    <a href="https://twitter.com/intent/tweet?text=Thinking%20About%20Direction&url=https%3A//jackdewinter.github.io/2022/09/26/thinking-about-direction/&hashtags=markdown-linter,core-linter" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jackdewinter.github.io/2022/09/26/thinking-about-direction/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
    ❄
    <a href="mailto:?subject=Thinking%20About%20Direction&amp;body=https%3A//jackdewinter.github.io/2022/09/26/thinking-about-direction/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
    </p>

            
            






<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="https://jackdewinter.github.io/2022/09/26/thinking-about-direction/#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">

                        <script src="https://utteranc.es/client.js"
        data-repo="jackdewinter/jackdewinter.github.io"
        data-issue-term="thinking-about-direction"
        data-label="Comments"
        data-theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://jackdewinter.github.io/2022/09/19/debugging-the-story-continues/" title="Previous: Debugging... The Story Continues">Debugging... The Story Continues</a></li>
                <li class="next-article"><a href="https://jackdewinter.github.io/2022/10/03/maintaining-healthy-focus/" title="Next: Maintaining Healthy Focus">Maintaining Healthy Focus</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~8 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2022-09-26T00:00:00-07:00">Sep 26, 2022</time>
            <h4>Category</h4>
            <a class="category-link" href="https://jackdewinter.github.io/categories#software-quality-ref">Software Quality</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://jackdewinter.github.io/tags#core-linter-ref">core linter
                    <span>110</span>
</a></li>
                <li><a href="https://jackdewinter.github.io/tags#markdown-linter-ref">markdown linter
                    <span>128</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/jackdewinter" title="github-alt" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/jackdewinter/" title="linkedin" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://jackdewinter.github.io/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2021 by Jack De Winter and licensed under a <a rel="license"
  href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.

    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>