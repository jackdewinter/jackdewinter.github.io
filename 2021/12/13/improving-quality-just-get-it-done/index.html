<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Jack De Winter" />

        <meta name="description" content="Summary¶ In my last article, I talked about making hard choices when it comes to projects. In this article, I talk about the follow-through with the choice that I needed to make last week. Introduction¶ Having decided that I needed to replace the whitespace processing in the PyMarkdown parser, the …
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="extract method, Software Quality, " />

<meta property="og:title" content="Improving Quality - Just Get It Done "/>
<meta property="og:url" content="https://jackdewinter.github.io/2021/12/13/improving-quality-just-get-it-done/" />
<meta property="og:description" content="Summary¶ In my last article, I talked about making hard choices when it comes to projects. In this article, I talk about the follow-through with the choice that I needed to make last week. Introduction¶ Having decided that I needed to replace the whitespace processing in the PyMarkdown parser, the …" />
<meta property="og:site_name" content="Jack&#39;s Digital Workbench" />
<meta property="og:article:author" content="Jack De Winter" />
<meta property="og:article:published_time" content="2021-12-13T00:00:00-08:00" />
<meta name="twitter:title" content="Improving Quality - Just Get It Done ">
<meta name="twitter:description" content="Summary¶ In my last article, I talked about making hard choices when it comes to projects. In this article, I talk about the follow-through with the choice that I needed to make last week. Introduction¶ Having decided that I needed to replace the whitespace processing in the PyMarkdown parser, the …">

        <title>Improving Quality - Just Get It Done  · Jack&#39;s Digital Workbench
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://jackdewinter.github.io/theme/css/style.min.css?bec7d543">

        <link href="https://jackdewinter.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack&#39;s Digital Workbench - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://jackdewinter.github.io/"><span class=site-name>Jack's Digital Workbench</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jackdewinter.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://jackdewinter.github.io/categories">Categories</a></li>
                                <li ><a href="https://jackdewinter.github.io/tags">Tags</a></li>
                                <li ><a href="https://jackdewinter.github.io/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://jackdewinter.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://jackdewinter.github.io/2021/12/13/improving-quality-just-get-it-done/">
                Improving Quality - Just Get It Done
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-the-audience-for-this-article">What Is the Audience for This Article?</a></li>
<li><a href="#setting-perspective">Setting Perspective</a></li>
<li><a href="#dealing-with-tabs">Dealing With Tabs</a><ul>
<li><a href="#why-the-long-journey">Why The Long Journey?</a></li>
</ul>
</li>
<li><a href="#dialing-in-the-remaining-tests">Dialing In The Remaining Tests</a></li>
<li><a href="#cleaning-up">Cleaning Up</a></li>
<li><a href="#watching-the-issues-fall">Watching The Issues Fall</a></li>
<li><a href="#what-was-my-experience-so-far">What Was My Experience So Far?</a></li>
<li><a href="#what-is-next">What is Next?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>In my
<a href="https://jackdewinter.github.io/2021/12/06/improving-quality-sometimes-there-is-no-easy-way/">last article</a>, I talked
about making hard choices when it comes to projects.  In this article, I talk
about the follow-through with the choice that I needed to make last week.</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">¶</a></h2>
<p>Having decided that I needed to replace the whitespace processing in the <a href="https://github.com/jackdewinter/pymarkdown">PyMarkdown</a>
parser, the follow through was brutal.  As of last week’s article, I had burnt
through all except twenty-five scenario tests.  Experience led me to believe
that those remaining tests were going to be the hard ones.  Either fortunately
or unfortunately for me, depending on one’s viewpoint, my estimates on
the PyMarkdown project and work to be done have been spot on lately.  It was
going to be on hell of a week!</p>
<h2 id="what-is-the-audience-for-this-article">What Is the Audience for This Article?<a class="headerlink" href="#what-is-the-audience-for-this-article" title="Permanent link">¶</a></h2>
<p>While detailed more eloquently in
<a href="https://jackdewinter.github.io/2020/04/05/what-is-the-audience-for-my-blog/#what-is-the-audience-for-my-blog">this article</a>,
my goal for this technical article is to focus on the reasoning behind my solutions,
rather than the solutions themselves.
For a full record of the changes talked about in
this article, please consult the commits that occurred between
<a href="https://github.com/jackdewinter/pymarkdown/commit/35f869d34dfa65c12daa9e1f6c8890d4d45eead5">05 Dec 2021</a>
and
<a href="https://github.com/jackdewinter/pymarkdown/commit/fd9707d86520688c39e175e1433b74807bacd8c2">12 Dec 2021</a>.</p>
<h2 id="setting-perspective">Setting Perspective<a class="headerlink" href="#setting-perspective" title="Permanent link">¶</a></h2>
<p>There are often diverse ways of saying the same thing. The gist of what I
remember from one lecture that I attended is that the lecturer, someone smarter
than me by far, was talking about how 80% of coding is just following established
patterns.  He further went on to say that the remaining 20% is a mixed bag of tasks
that will either prove you to be a competent developer or force you to hurl your
monitor out the window in frustration.  For sure, that might seem like
hyperbole to most. But if you ask most software
developers to be honest about whether they have thought about throwing things around
the office, including their computer or monitor, most will admit that they have had
those thoughts.</p>
<p>That frustration is just a natural thing.  Software does exactly what you it is
told to do, no more and no less.  It then follows that if a developer has an incomplete
picture of what they want to do, then the result is a program that is incomplete.
And while the high-level picture of what to be done is always clear, that picture
gets grainier as the software developer zooms in to individual sections of that
picture.  As a result, the gap between “the ideal” and “the reality” are what are
known as bugs.  The real question that faces most developers is whether they can
find all the relevant bugs before the users of their programs do.</p>
<p>For the last week, I had been in a forest where there were tons of those bugs
lurking around every corner.  While it took a bit of work to get through them,
I had managed to vanquish most of the bugs about whitespaces.  But the reality
of software development is that the easy to find bugs are almost always the first
to go, leaving the trickier bugs to diagnose and fix.  That is where I started
this week.  With tricky bugs.</p>
<h2 id="dealing-with-tabs">Dealing With Tabs<a class="headerlink" href="#dealing-with-tabs" title="Permanent link">¶</a></h2>
<p>As I talked about in the
<a href="https://jackdewinter.github.io/2021/12/06/improving-quality-sometimes-there-is-no-easy-way/#the-bad">last article</a>,
tabs in Markdown are treated
as tab stops and not just blindly replaced with four space characters.  With eight
unresolved tests that dealt with tab characters, this was not something that I could
delay addressing for much longer.  There was no other choice other than trying to
tackle this issue head on.</p>
<p>Dear readers:  I know you might think I am not being truthful about taking a good
day and a half to think about the impact of tabs on the parser. But I did. In my
usual fashion, I scribbled things out on paper and talked to myself, working through
the various issues that could arise with different solutions.  There were a half-dozen
“half-solutions” that I produced, but each was quickly discarded.  To be honest,
calling them half-solutions is probably generous.  In each case, I was trying
to deal with the effects of having tabs without dealing with the actual
tab characters themselves.</p>
<p>That did not work very well for me.  Those solutions did take care of resolving
the perceived size of each tab character, but it introduced more problems.  Specifically,
they often included passing extra lengths around and made some calculations a
lot more difficult in the process.  On top of that, even with helper functions,
I found that I was coding variations of how to use those helper functions in multiple
places. It was just messy and not very maintainable.</p>
<p>So, after deciding to use all those scribbles as kindling in our fireplace, I decided
to go for what I consider to be the nuclear option.  Instead of creating a maintenance
nightmare in the rest of the code, I decided to add this code to the Container Block
Processor:</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="s2">"</span><span class="se">\t</span><span class="s2">"</span> <span class="ow">in</span> <span class="n">position_marker</span><span class="o">.</span><span class="n">text_to_parse</span><span class="p">:</span>
    <span class="n">line_to_parse</span> <span class="o">=</span> <span class="n">ParserHelper</span><span class="o">.</span><span class="n">detabify_string</span><span class="p">(</span>
        <span class="n">position_marker</span><span class="o">.</span><span class="n">text_to_parse</span>
    <span class="p">)</span>
    <span class="n">position_marker</span> <span class="o">=</span> <span class="n">PositionMarker</span><span class="p">(</span>
        <span class="n">position_marker</span><span class="o">.</span><span class="n">line_number</span><span class="p">,</span>
        <span class="n">position_marker</span><span class="o">.</span><span class="n">index_number</span><span class="p">,</span>
        <span class="n">line_to_parse</span><span class="p">,</span>
        <span class="n">position_marker</span><span class="o">.</span><span class="n">index_indent</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
<p>Adding a new <code>detabify_string</code> function to the <code>ParserHelper</code> class, I called it
from the start of the Container Block Processor and its handling of each line.
I used it to replace any tabs characters in the string in
that one place.  I used almost identical code once in the Markdown generator to
process the test data before the Markdown comparison there.</p>
<p>And except for some altered test data that needed to be addressed, I was done.
There was no “including tab counts” that needed to be altered and passed around.
There was no need to know if I had preprocessed a given string or if I still had
to do that.  There was no weird <code>if</code> statements to deal with tab characters.
Just one <code>if</code> statement in the parser code, and one <code>if</code> statement in the test
code and it was done.</p>
<h3 id="why-the-long-journey">Why The Long Journey?<a class="headerlink" href="#why-the-long-journey" title="Permanent link">¶</a></h3>
<p>So why did it take me so long to come to that conclusion?  Data integrity. At
the start of this project, I wanted to ensure that the integrity of the parser
was as high as possible at every stage.  I had it in my head that translating
the tab characters in any way was violating that rule. So, I tried to take the
long way around and deal with the effect instead of the character itself.</p>
<p>And I guess in a certain way, it is changing things.  But the question that I ended
up asking myself was whether that violation was relevant to the tokenizer.  I could
easily argue that from the viewpoint of parsing the Markdown as a HTML parser, it
was crossing the line.  That was crystal clear.  But from the point of view of a
tokenizer, I ended up wavering on that viewpoint.  The tokens are just truthful
representations of what was parsed.  As the specification is clear that tokens are
to be interpreted as the corresponding number of space characters, there was a
new question.  That question was whether an uninterpreted or interpreted
representation of that tab character was the best choice.</p>
<p>But it was not an easy journey or choice.  And as with all hard choices, it just
took a while for me to work through things and make sure that it was the right
choice.</p>
<h2 id="dialing-in-the-remaining-tests">Dialing In The Remaining Tests<a class="headerlink" href="#dialing-in-the-remaining-tests" title="Permanent link">¶</a></h2>
<p>With the tab tests out of the way, I needed to apply my normal work ethic
to get movement on the remaining issues.  But with a firm guideline on
how to approach the whitespace, it only took a couple of days before I had
the remaining scenario tests passing, with caveats.  I just focused on making
sure that the right whitespace was being applied to the properly scoped token,
and that helped a lot.  It was still challenging work getting everything assigned
properly, but a simpler set of rules made decisions easy to make.</p>
<p>What were the caveats?  There are still a couple of scenario tests that
I disabled instead of getting them to work, and they fall into two groups. The
first group is a set of tests that have three or more levels of nesting.  While
there are some tests that “just work”, I want to make sure to spend some time
and effort to properly scope and focus on each combination and make sure that
it works.  The second group are scenario tests involving changing indentation,
usually from the Block Quote characters.  Once again, there are some simple
combinations, but I feel that the right thing to do is to specifically focus
on those combinations in their own scoped issues.</p>
<p>And to be clear, everything still parses properly.  It is just the calculation
of the whitespace lengths that is in question.  And I want to get those right,
not just kind of right.  I passionately believe that it is a good enough reason to
handle them separately.</p>
<h2 id="cleaning-up">Cleaning Up<a class="headerlink" href="#cleaning-up" title="Permanent link">¶</a></h2>
<p>With the remaining tests either passing or skipped, it was time to start cleaning
up after the mess of making those changes.  There were a handful of places where
I had forgot to change
from my “in the moment” variable names (like <code>abc</code>, <code>foo</code>, and <code>gg</code>) to variable
names that describe their function.  Using <a href="https://sourcery.ai">Sourcery</a>, I
was able to calculate a relative health of each function, and I kept on refactoring
until that measurement was at least 40 for every function in the project.
Using <a href="https://www.code-inspector.com">Code Inspector</a>, I was able to quickly
figure out what PyLint issues needed to be addressed.</p>
<p>To be honest, this part of the process was just relaxing.  Each of the refactoring
steps I took were easily tested, thanks to a complete set of passing scenario tests.
If I made a change and one of the tests failed, I just rolled back the last change
and tried again.  While it did take three or four hours to complete, there was
very almost no stress associated with those changes.  It was a pleasant change for
working over the weekend.</p>
<h2 id="watching-the-issues-fall">Watching The Issues Fall<a class="headerlink" href="#watching-the-issues-fall" title="Permanent link">¶</a></h2>
<p>Finishing the prior work just before noon, I took a rather leisurely lunch and
got some of my energy back.  It was a hard slog getting everything finished and
tidied up, but it was nice to get there.</p>
<p>The issues that I could choose to work on had as much potential to be easy issues
as they had to be difficult issues.  I knew that the first one,
<a href="https://github.com/jackdewinter/pymarkdown/issues/99">Issue 99</a> was going to be
easy as this work had all kicked off because of the problems I had addressing that
issue.  But what about the others?</p>
<p>As I made my way through the other issues registered around the same time as Issue 99,
only one issue out of seven logged was not at once resolved.  I was fine leaving
those issues for another week.  It just felt good that the work that I had undertaken
to correct those other issues had cleaned up six other issues.</p>
<h2 id="what-was-my-experience-so-far">What Was My Experience So Far?<a class="headerlink" href="#what-was-my-experience-so-far" title="Permanent link">¶</a></h2>
<p>I know it may sound funny to some people, but I was sure that the heavy sigh I
made when I finished working on the tests could be heard throughout my house.  It
was just a good feeling to simplify something that was complex and difficult
to maintain. It was even better to see multiple tests resolving themselves because
of me refactoring the whitespace from the containers.</p>
<p>But I know that I need to focus more on cleaning up the remaining issues in both
the GitHub issues list and my own Issues List.  So hopefully I will be able to get
both of those cleaned up.  I know I am making timely progress though, and that gives
me hope that I can clean things up nicely within a couple of weeks.</p>
<h2 id="what-is-next">What is Next?<a class="headerlink" href="#what-is-next" title="Permanent link">¶</a></h2>
<p>Having finished the changes to address whitespace issues, I am eager to get back
to a mixture of refactoring code and fixing issues.  Not sure what mix of those
two is going to happen yet, but I am fairly sure I want a good balance of both.
Stay tuned!</p>


             
 
                <p id="post-share-links">
    Like this post? Share on:
    <a href="https://twitter.com/intent/tweet?text=Improving%20Quality%20-%20Just%20Get%20It%20Done&url=https%3A//jackdewinter.github.io/2021/12/13/improving-quality-just-get-it-done/&hashtags=extract-method" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jackdewinter.github.io/2021/12/13/improving-quality-just-get-it-done/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
    ❄
    <a href="mailto:?subject=Improving%20Quality%20-%20Just%20Get%20It%20Done&amp;body=https%3A//jackdewinter.github.io/2021/12/13/improving-quality-just-get-it-done/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
    </p>

            
            






<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="https://jackdewinter.github.io/2021/12/13/improving-quality-just-get-it-done/#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">

                        <script src="https://utteranc.es/client.js"
        data-repo="jackdewinter/jackdewinter.github.io"
        data-issue-term="improving-quality-better-tooling-3"
        data-label="Comments"
        data-theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://jackdewinter.github.io/2021/12/06/improving-quality-sometimes-there-is-no-easy-way/" title="Previous: Improving Quality - Sometimes, There Is No Easy Way">Improving Quality - Sometimes, There Is No Easy Way</a></li>
                <li class="next-article"><a href="https://jackdewinter.github.io/2021/12/20/markdown-linter-getting-back-to-work/" title="Next: Markdown Linter - Getting Back To Work">Markdown Linter - Getting Back To Work</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~8 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2021-12-13T00:00:00-08:00">Dec 13, 2021</time>
            <h4>Category</h4>
            <a class="category-link" href="https://jackdewinter.github.io/categories#software-quality-ref">Software Quality</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://jackdewinter.github.io/tags#extract-method-ref">extract method
                    <span>4</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/jackdewinter" title="github-alt" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/jackdewinter/" title="linkedin" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://jackdewinter.github.io/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2021 by Jack De Winter and licensed under a <a rel="license"
  href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.

    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>