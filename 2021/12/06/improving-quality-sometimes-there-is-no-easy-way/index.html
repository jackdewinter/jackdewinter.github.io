<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Jack De Winter" />

        <meta name="description" content="Summary¶ In my last article, I talked about my progress in reducing the PyMarkdown project issue count, including the bug that almost knocked me down for the count! In this article, I talk about making hard choices when it comes to projects. Introduction¶ Having fixed some issues in the prior …
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="extract method, Software Quality, " />

<meta property="og:title" content="Improving Quality - Sometimes, There Is No Easy Way "/>
<meta property="og:url" content="https://jackdewinter.github.io/2021/12/06/improving-quality-sometimes-there-is-no-easy-way/" />
<meta property="og:description" content="Summary¶ In my last article, I talked about my progress in reducing the PyMarkdown project issue count, including the bug that almost knocked me down for the count! In this article, I talk about making hard choices when it comes to projects. Introduction¶ Having fixed some issues in the prior …" />
<meta property="og:site_name" content="Jack&#39;s Digital Workbench" />
<meta property="og:article:author" content="Jack De Winter" />
<meta property="og:article:published_time" content="2021-12-06T00:00:00-08:00" />
<meta name="twitter:title" content="Improving Quality - Sometimes, There Is No Easy Way ">
<meta name="twitter:description" content="Summary¶ In my last article, I talked about my progress in reducing the PyMarkdown project issue count, including the bug that almost knocked me down for the count! In this article, I talk about making hard choices when it comes to projects. Introduction¶ Having fixed some issues in the prior …">

        <title>Improving Quality - Sometimes, There Is No Easy Way  · Jack&#39;s Digital Workbench
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://jackdewinter.github.io/theme/css/style.min.css?bec7d543">

        <link href="https://jackdewinter.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack&#39;s Digital Workbench - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://jackdewinter.github.io/"><span class=site-name>Jack's Digital Workbench</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jackdewinter.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://jackdewinter.github.io/categories">Categories</a></li>
                                <li ><a href="https://jackdewinter.github.io/tags">Tags</a></li>
                                <li ><a href="https://jackdewinter.github.io/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://jackdewinter.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://jackdewinter.github.io/2021/12/06/improving-quality-sometimes-there-is-no-easy-way/">
                Improving Quality - Sometimes, There Is No Easy Way
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-the-audience-for-this-article">What Is the Audience for This Article?</a></li>
<li><a href="#the-good">The Good</a></li>
<li><a href="#the-bad">The Bad</a></li>
<li><a href="#the-ugly">The Ugly</a></li>
<li><a href="#the-hard">The Hard</a></li>
<li><a href="#the-work">The Work</a></li>
<li><a href="#looking-ahead">Looking Ahead</a></li>
<li><a href="#what-was-my-experience-so-far">What Was My Experience So Far?</a></li>
<li><a href="#what-is-next">What is Next?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>In my
<a href="https://jackdewinter.github.io/2021/11/29/markdown-linter-the-bug-that-almost-knocked-me-down/">last article</a>, I talked
about my progress in reducing the PyMarkdown project issue count, including the
bug that almost knocked me down for the count!  In this article, I talk about
making hard choices when it comes to projects.</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">¶</a></h2>
<p>Having fixed some issues in the prior week, I decided to tackle another issue
from the outstanding issues list.  What I thought at first was a minor snag
turned out to be a major issue.  More than a major issue.  More of a story.</p>
<h2 id="what-is-the-audience-for-this-article">What Is the Audience for This Article?<a class="headerlink" href="#what-is-the-audience-for-this-article" title="Permanent link">¶</a></h2>
<p>While detailed more eloquently in
<a href="https://jackdewinter.github.io/2020/04/05/what-is-the-audience-for-my-blog/#what-is-the-audience-for-my-blog">this article</a>,
my goal for this technical article is to focus on the reasoning behind my solutions,
rather than the solutions themselves.</p>
<h2 id="the-good">The Good<a class="headerlink" href="#the-good" title="Permanent link">¶</a></h2>
<p>After taking a well-deserved night off, I started to work on one of the logged
issues, <a href="https://github.com/jackdewinter/pymarkdown/issues/99">Issue 99</a>. There
was no specific reason that I picked this issue, except for a feeling that it was
a good starting issue for the week.  It looked like a simple issue.  When a HTML
Block element was encountered in a List element, the List element was being closed
prematurely.</p>
<p>Digging into the debug for the failing tests, I was able to quickly spot what
the issue was, and subsequently fixed it.  I manually verified the tokens, and
everything looked good with each token.  Then I did a mental conversion from tokens
into HTML, and everything was also good with the conversion.  The only things left
were to verify the translation back into Markdown and to verify that the other consistency
checks were passing.</p>
<p>Looking at the code in the <code>transform_to_markdown.py</code> module, I tried to
add some simple code to adapt to the new condition, but it did not work on
that first try.  Come to think of it, it did not work on my second try either.
Having had a long day, I chalked that experience up to tiredness,
deciding to try again the next day.</p>
<h2 id="the-bad">The Bad<a class="headerlink" href="#the-bad" title="Permanent link">¶</a></h2>
<p>Before sitting down at my computer for work that next evening, I made sure I had
a healthy meal beforehand, I was all nice and showered, and that I was nice and
relaxed for the most part.  If nothing else, I wanted to start that evening’s
work in a good mood to address the issue from the night before.  I mean…
how hard could it be?</p>
<p>After three hours of trying to get it working and failing, I had my answer.
It was a tough problem to solve.  And it had to do a lot with history and
requirements.</p>
<p>Because of the way that Markdown is processed, there are only two real solutions
to deal with containers and their impact on a given line.  The first solution
is to deal with containers after the leaf elements and inline elements have
been dealt with.  This is a lot less work in the end, but the setting up of
each element must be precise.  In addition to that, tabs within a Markdown
document are a problem.</p>
<p>For reference purposes, Markdown parsers interpret tabs as tab stops of 4.  Tab
stops means that the tab-to-space conversion ratio depends on where in the line
the tab is.  The value 4 signifies that at best, a single tab character can be
interpreted as 4 space characters. The way to think about it is this. If the
index in the line is equal to 0 with a modulo of 4<sup id="fnref:modulo"><a class="footnote-ref" href="#fn:modulo">1</a></sup>, 4 spaces are added.
If the index modulo 4 is 1, then 3 spaces are added.  Similarly, if at index 2,
then 2 spaces are added, and if at 3, then 1 space is added. This allows things
to be aligned on tab stops that occur in the middle of lines.  But these calculations
assume that you know that index on the line before calculating its impact.  As
any container indents have not been applied, that is not possible.</p>
<p>The other option is to handle the container elements and the other elements on
a line-by-line basis.  Because of the above issues with tab stops, which is the
way I decided to do things.  I knew that it was going to be a bit more work to
keep track of both things at the same time.  I needed to juggle
distinct parts of the same line at the same time, ensuring that I knew what
the effects of the container elements were before parsing the line.  But to
be blunt, it evolved in a bad way.</p>
<p>As I sat there that night, looking at the source code, I could not believe how
convoluted it had become.  There were more than three distinct types of merge
functions, each for a specific case.  And because I developed those functions
as I progressed, these were organic, with exceptions to rules throughout those
functions. It was just a mess to try and figure out.  </p>
<p>I knew I needed to figure it out to move on, so I decided to take the next
evening to focus on understanding the algorithms.  Because I needed to ensure
that I verified any recent changes before going on, I really needed to understand
those functions and how to properly change them for the new data.  In my mind,
it was necessary.</p>
<h2 id="the-ugly">The Ugly<a class="headerlink" href="#the-ugly" title="Permanent link">¶</a></h2>
<p>While my optimism was a bit more deflated than the night before, I gave myself
a similar starting position the next night.  But even with that good starting
point, I spent the next two hours figuring things out and hurling at least a half
dozen “WTF?” insults at my monitor before I was done.  I had scribbles down over
a good five sheets of paper strewn all over my desk.  And those were just the ones
that I did not scribble on top of and then threw out because I got it wrong.  I
stopped counting those sheets after the first ten.</p>
<p>It had taken me two hours, but I had a good concept of what was going on.  I just
did not have any ideas on how to change the code to do what I needed it to do
for the issue that I just fixed.  Frankly, I was amazed that what I had figured
out worked.  I did not intentionally mean for the code to get like that, but
the complex tangle of code was captured on those five sheets of paper.  And
they did not look neat and tidy either.</p>
<p>It was on a bit of a whim that I started sketching out a similar algorithm
for managing the container text after the other elements had been processed.  This
was more in line with my design decision to keep container processing separate
from the leaf processing, so that was one good sign.  The other good sign was
that within fifteen minutes, I had a solid design for the base algorithm.  Twenty
minutes later, I had a list of the changes I would need to make to the whitespace
in the tokens to present the needed information required by the algorithm.</p>
<p>I knew that the new sketch would not be that easy to implement, as things rarely
are as easy as they seem.  But even with a bit of extra work, the new sketch
design was simple to understand, and the changes to the tokens to support those
changes were also easy to understand.  There was only the one algorithm, with
a couple of small algorithms on the side to calculate lists for the main algorithm.
And I did not take care of translating tabs into spaces either.  That was something
else I would have to do.</p>
<p>That is where I got to the hard part.</p>
<h2 id="the-hard">The Hard<a class="headerlink" href="#the-hard" title="Permanent link">¶</a></h2>
<p>It was now the start of Friday evening, and I had an exceedingly difficult choice to
make.  If I stuck with the current algorithm, it would take me at least
another day or two to make my current change.  I did not have
any good estimate to base a guess on due to state of the algorithms.  I had a
good feeling that if I had to make similar changes, as I expected to have to do
for at least half of the remaining issues, I would have to take a similar
length of time to make those changes.</p>
<p>On the other hand, I could change that algorithm to the proposed design, but there were
no guarantees that
it would fix things.  At the very least, the new algorithm would be more understandable,
and thus more maintainable.  But that just meant that the focus for addressing
issues like these would focus more on making sure that the right whitespace is
encapsulated in the tokens for the container algorithm to use.  And I would still
have to find a way to deal with tab characters.</p>
<p>That is when I realized: there just was no straightforward way to deal with this problem.
Regardless of which option I chose, there would be a decent amount of work.  So,
any short-term considerations were out, as they were even.  I had to start
thinking about the long term, and how my choice would
reflect on the future of the project.</p>
<p>Working things out in my head,
I knew that I had made my decision when I started to try and convince myself that
the current solution was good enough.  I was not doing my usual process of evaluating
multiple choices on their merit, I was arguing to myself that what I had met some
minimum bar that was hard to define.  To me, that meant that I had a clear winner
in the other choice, I was just worried about the cost.</p>
<p>That is when I had an objective talk with myself about the merit of the new
approach versus the old approach.  If I had a tough time thinking about how to
modify the old algorithm now, how much would it cost to change it in another week
or two?  Would I have
to go through the same process again?  The more I asked myself questions like
that, the more the cost of the new algorithm did not seem to be that expensive.</p>
<p>The more I thought about it, it was a hard decision, but I needed to rewrite that
part of the code.  A simpler algorithm costing more now would easily safe effort
in the future.  It sucked, but I knew I needed to make the hard decision.</p>
<p>I was going to rewrite the project’s Markdown generator.</p>
<h2 id="the-work">The Work<a class="headerlink" href="#the-work" title="Permanent link">¶</a></h2>
<p>With everyone else out of the house for most of the day, I had a rare Saturday to
myself.  Because I expected to throw even more “WTF?” comments at my monitor,
it was a good thing I was alone in the house.</p>
<p>The first thing that I noticed is that while I needed to rewrite the Markdown
generator, I did not have to rewrite most of it.  With one or two exceptions, the
handling of the non-container tokens was good.  As for those small exceptions, I
was sure that only the whitespace handling would need to change, and that I could
manage those changes.</p>
<p>With that knowledge in hand, I turned off all existing checks, picked a simple
scenario test with multiple lines and no container elements, and started to work
on it.  I was not trying to solve the entire problem, just get
a good head start on rewriting the code.</p>
<p>It was not too long before I had a promising idea of what I needed to do, and I committed
that code to my local repository.  Then I enabled the Markdown generator check
for only those scenario tests that did not container any container elements.
Working through those issues, I then added checking for scenario tests including
only Block Quote elements and worked through those issues.  Finally, I repeated
that process with List elements, to get to where I am now.</p>
<h2 id="looking-ahead">Looking Ahead<a class="headerlink" href="#looking-ahead" title="Permanent link">¶</a></h2>
<p>As of the writing of this article, I have 25 scenario tests that I need to get
working without enabling the remaining tests with both Block Quote elements and
List elements.  Turning those on, the total jumped to 53 scenario tests, which
is still a manageable number.  Some of those tests are going to be easy to resolve,
and there are other tests that are going to tax me.  But having the simplified design
means that it is easy to defend and that change makes it worthwhile</p>
<p>It is worthwhile because I can easily maintain a picture in my head about what
needs to happen.  Every single whitespace character needs to be preserved in a
token somewhere.  Most of the time, which means that I need to ensure that the
whitespace emitted in container tokens is correct.  That is simply a fact because
the new algorithm is simple, and I mean to keep it that way.  Sure, it is shifting
the effort to the tokens, but I feel good about that.</p>
<h2 id="what-was-my-experience-so-far">What Was My Experience So Far?<a class="headerlink" href="#what-was-my-experience-so-far" title="Permanent link">¶</a></h2>
<p>During the middle of the week, I was at a bit of a low point, mentally speaking.
While I realize
that I am not perfect, I do hope that I make good development choices that do not
result in too much wasted effort.  I do acknowledge that there are parts of the PyMarkdown
code base that look busy, but usually I keep things grouped by
functionality.  But in those cases, there are a small group of functions that
provide support for each other and their common responsibility.  In each of those
cases, I can usually pick up a function and understand its purpose within
five minutes, and what to change in fifteen minutes.</p>
<p>Not being able to do that is exactly what I had to come to terms with during
this week.  I had spent time maintaining code that became overly complex and spun
out of control.  It was enough out of control, that I did not think that there
was an option other than to rewrite that functionality using a different algorithm.
That hurt.</p>
<p>But as I author this article, I think my viewpoint has changed.  With around fifty
scenario tests left to convert and get working, I find myself having a renewed
sense of optimism.  The new code is cleaner and more direct on what it is trying
to accomplish.  The new code is independent of the processing for the other
Markdown elements, so it just focuses on what it needs to do.  And more importantly
to me, the new code is easily more maintainable.</p>
<p>Did I throw away a Saturday on getting the new code to work? Yes.
However, if I am honest, this new code just feels better.  It is a bit more work
right now to get back to a “stopping point” where I can start fixing issues
again.  But I am more confident that any later changes can be incorporated into
the generation of the tokens themselves, not requiring any changes to the new
functions for handling container elements.</p>
<p>And when it all comes down to it, that is what is important.  I sometimes forget
that every line of code that I write is an experiment.  I make good guesses
as to what I need, so my coding accuracy is decent, but it is still just a guess.
In this case, an experiment failed, and I needed to try and find a better way to
accomplish the same task.</p>
<p>So, yes. it sucks that I had to do a rewrite. But honestly, sometimes, there
is no uncomplicated way, just difficult paths to follow.  And I am okay with that… now.</p>
<h2 id="what-is-next">What is Next?<a class="headerlink" href="#what-is-next" title="Permanent link">¶</a></h2>
<p>Since I have started on the first part of this changeover, it makes sense
that I keep on going until it is finished.
Stay tuned!</p>
<div class="footnote">
<hr/>
<ol>
<li id="fn:modulo">
<p>This is a fancy way of saying “what is the remainder after dividing by the other number?” <a class="footnote-backref" href="#fnref:modulo" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>


             
 
                <p id="post-share-links">
    Like this post? Share on:
    <a href="https://twitter.com/intent/tweet?text=Improving%20Quality%20-%20Sometimes%2C%20There%20Is%20No%20Easy%20Way&url=https%3A//jackdewinter.github.io/2021/12/06/improving-quality-sometimes-there-is-no-easy-way/&hashtags=extract-method" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jackdewinter.github.io/2021/12/06/improving-quality-sometimes-there-is-no-easy-way/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
    ❄
    <a href="mailto:?subject=Improving%20Quality%20-%20Sometimes%2C%20There%20Is%20No%20Easy%20Way&amp;body=https%3A//jackdewinter.github.io/2021/12/06/improving-quality-sometimes-there-is-no-easy-way/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
    </p>

            
            






<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="https://jackdewinter.github.io/2021/12/06/improving-quality-sometimes-there-is-no-easy-way/#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">

                        <script src="https://utteranc.es/client.js"
        data-repo="jackdewinter/jackdewinter.github.io"
        data-issue-term="improving-quality-better-tooling-2"
        data-label="Comments"
        data-theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://jackdewinter.github.io/2021/11/29/markdown-linter-the-bug-that-almost-knocked-me-down/" title="Previous: Markdown Linter - The Bug That Almost Knocked Me Down">Markdown Linter - The Bug That Almost Knocked Me Down</a></li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~11 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2021-12-06T00:00:00-08:00">Dec 6, 2021</time>
            <h4>Category</h4>
            <a class="category-link" href="https://jackdewinter.github.io/categories#software-quality-ref">Software Quality</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://jackdewinter.github.io/tags#extract-method-ref">extract method
                    <span>3</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/jackdewinter" title="github-alt" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/jackdewinter/" title="linkedin" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://jackdewinter.github.io/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2021 by Jack De Winter and licensed under a <a rel="license"
  href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.

    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>