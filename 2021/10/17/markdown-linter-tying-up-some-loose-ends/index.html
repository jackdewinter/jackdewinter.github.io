<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Jack De Winter" />

        <meta name="description" content="Summary¶ In my last article, I talked about my efforts to clean up the scenario tests and the existing parser issues. In this article, I continue to talk about cleaning up existing parser issues. Introduction¶ To an outside viewer, it may seem like I am doing boring stuff, week in …
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="markdown linter, core linter, Software Quality, " />

<meta property="og:title" content="Markdown Linter - Tying Up Some Loose Ends "/>
<meta property="og:url" content="https://jackdewinter.github.io/2021/10/17/markdown-linter-tying-up-some-loose-ends/" />
<meta property="og:description" content="Summary¶ In my last article, I talked about my efforts to clean up the scenario tests and the existing parser issues. In this article, I continue to talk about cleaning up existing parser issues. Introduction¶ To an outside viewer, it may seem like I am doing boring stuff, week in …" />
<meta property="og:site_name" content="Jack&#39;s Digital Workbench" />
<meta property="og:article:author" content="Jack De Winter" />
<meta property="og:article:published_time" content="2021-10-17T00:00:00-07:00" />
<meta name="twitter:title" content="Markdown Linter - Tying Up Some Loose Ends ">
<meta name="twitter:description" content="Summary¶ In my last article, I talked about my efforts to clean up the scenario tests and the existing parser issues. In this article, I continue to talk about cleaning up existing parser issues. Introduction¶ To an outside viewer, it may seem like I am doing boring stuff, week in …">

        <title>Markdown Linter - Tying Up Some Loose Ends  · Jack&#39;s Digital Workbench
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://jackdewinter.github.io/theme/css/style.min.css?bec7d543">

        <link href="https://jackdewinter.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack&#39;s Digital Workbench - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://jackdewinter.github.io/"><span class=site-name>Jack's Digital Workbench</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jackdewinter.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://jackdewinter.github.io/categories">Categories</a></li>
                                <li ><a href="https://jackdewinter.github.io/tags">Tags</a></li>
                                <li ><a href="https://jackdewinter.github.io/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://jackdewinter.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://jackdewinter.github.io/2021/10/17/markdown-linter-tying-up-some-loose-ends/">
                Markdown Linter - Tying Up Some Loose Ends
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-the-audience-for-this-article">What Is the Audience for This Article?</a></li>
<li><a href="#issue-44-the-long-and-winding-road">Issue 44 - The Long And Winding Road</a></li>
<li><a href="#issue-56-cleaning-up-rules">Issue 56 - Cleaning Up Rules</a></li>
<li><a href="#issue-53-cleaning-up-list-tests">Issue 53 - Cleaning Up List Tests</a></li>
<li><a href="#issue-59-cleaning-up-setext-tests">Issue 59 - Cleaning Up SetExt Tests</a></li>
<li><a href="#issue-43-sometimes-it-is-a-small-fix">Issue 43 - Sometimes It Is A Small Fix</a></li>
<li><a href="#issue-62-sometimes-it-really-is-a-check">Issue 62 - Sometimes It Really Is A Check</a></li>
<li><a href="#issue-64-and-sometimes-you-did-something-wrong">Issue 64 - And Sometimes You Did Something Wrong</a></li>
<li><a href="#issue-66-winding-down">Issue 66 - Winding Down</a></li>
<li><a href="#issue-70-more-winding-down">Issue 70 - More Winding Down</a></li>
<li><a href="#what-was-my-experience-so-far">What Was My Experience So Far?</a></li>
<li><a href="#what-is-next">What is Next?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>In my
<a href="{filename}/articles/SoftwareQuality/beta-bugs-c.md">last article</a>, I talked
about my efforts to clean up the scenario tests and the existing parser issues.
In this article, I continue to talk about cleaning up existing parser issues.</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">¶</a></h2>
<p>To an outside viewer, it may seem like I am doing boring stuff, week
in and week out. And I will admit, a certain amount of the work that I do is
boring.  But knowing that the work is going towards increasing the quality of
the project really motivates me when things are dragging on. Since I spent
most of this past week finishing the big task from last week, I did find the
need to remind myself of those observations during the week… multiple times.
And remembering why I was doing this did help me push through.</p>
<p>And while I am used to showing as much code as I can for what I am working on,
this week is going to be a bit different.  To be honest, most of the issues that I
fixed had a relatively minor change that was implemented, with the effects of that
change rippling out into the rest of the code. In some cases, it was a one-line
initial change, and thirty or more lines of ripple changes.
I still will try and explain things as best I can, you have my word on that. I’ll
see how that works out and see how I feel about it later!</p>
<h2 id="what-is-the-audience-for-this-article">What Is the Audience for This Article?<a class="headerlink" href="#what-is-the-audience-for-this-article" title="Permanent link">¶</a></h2>
<p>While detailed more eloquently in
<a href="https://jackdewinter.github.io/2020/04/05/what-is-the-audience-for-my-blog/#what-is-the-audience-for-my-blog">this article</a>,
my goal for this technical article is to focus on the reasoning behind my solutions,
rather than the solutions themselves.  For a full record of the solutions presented in
this article, please consult the commits that occurred between
<a href="https://github.com/jackdewinter/pymarkdown/commit/12dae17158b4db3dd2aa51107f0a645b1ad743b5">12 Oct 2021</a>
and
<a href="https://github.com/jackdewinter/pymarkdown/commit/9899a414f1c2c9c86a7f307929bfe1036fad8544">17 Oct 2021</a>.</p>
<h2 id="issue-44-the-long-and-winding-road"><a href="https://github.com/jackdewinter/pymarkdown/issues/44">Issue 44</a> - The Long And Winding Road<a class="headerlink" href="#issue-44-the-long-and-winding-road" title="Permanent link">¶</a></h2>
<p>As I said during the introduction, it was an exceedingly long week.  I had hoped that
I would be able to rip through the comment strings for the scenario tests that
related to rules, but that was not the case.  Instead of having to read 7 strings
and having to fix 1, I was lucky if I encountered any strings that I did not have
to fix.</p>
<p>Part of that was my own making though.  To make sure that the strings were all
readable, I started establishing a common preface for each rule comment string:</p>
<div class="highlight"><pre><span></span><span class="sd">"""</span>
<span class="sd">Test to make sure this rule does not trigger with a document that</span>
<span class="sd">contains ...</span>
<span class="sd">"""</span>
</pre></div>
<p>While that brough consistency to every comment string for rules, it did
involve tons of editing.  That and in the cases where the rule did trigger,
I had to ensure that I removed the <code>not</code> on the first line.  Just checking
that out for each file took a bit of time.</p>
<p>And that editing took me into Saturday afternoon.  It was a slog.  But I
never had any doubt that it was worth it.  Did I question if my sanity
would remain intact? Yes, that was something I wondered many
times during the task.  But not the base worth of the task.  I knew that it
was something that I had put off, and I knew that this rewriting was the
price that I needed to pay.  And that was okay with me.  It just
needed to get done.</p>
<p>But I was incredibly happy when it was done.  There were other things that
I wanted to get cleaned up this week!</p>
<h2 id="issue-56-cleaning-up-rules"><a href="https://github.com/jackdewinter/pymarkdown/issues/56">Issue 56</a> - Cleaning Up Rules<a class="headerlink" href="#issue-56-cleaning-up-rules" title="Permanent link">¶</a></h2>
<p>In terms of nagging tasks that I wanted to deal with, cleaning up the
comment strings was the biggest one.  Thought it was not as high on the list,
as the comment string, it still bugged me that I had skipped tests.  I know
that at the time that I
marked those tests as skipped it probably was the right thing to do. But now
that I had some time, the right thing to do was to make sure that I resolved
those skipped tests.</p>
<p>Having resolved some skipped tests dealing with language elements last
week, I decided to try and deal with the skipped tests for rules this week.
Luckily, as soon as I walked through the scenario tests for Rule Md005 and Rule
Md027, I noticed that everything looked correct. All that I needed to do for
those tests was to clean them up, reset the expected values, and verify that
there were no other problems. Done.</p>
<p>Rule Md028 was another story.  I worked through the debugger and log
files for about an hour or two before I figured out the issue.  In
this scenario, the essence of the problem was with this Markdown document:</p>
<div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">&gt;</span> <span class="n">This</span> <span class="k">is</span> <span class="n">one</span> <span class="n">section</span> <span class="k">of</span> <span class="n">a</span> <span class="n">block</span> <span class="n">quote</span>
</pre></div>
<p>When I walked through the parsing of that Markdown, the tokens that I got
back were mostly correct, just in a weird order.  In particular, the Block
Quote was started properly, but it was immediately followed by an end Block
Quote token.  And walking through the code did not at once reveal any
interesting information because everything looked right.  That is until
I noticed that there was a single point where it no longer looked right.</p>
<p>That point was the on the return of the parser from the
<code>__handle_nested_container_blocks</code> function.   Everything looked correct before
that function returned, especially the <code>this_bq_count</code> variable that contains
what the perceived count of the Block Quote is.  It was then that I noticed
that when the function returned, the <code>this_bq_count</code> variable dropped from
<code>1</code> to <code>0</code>.  As there was a Block Quote stack token on the <code>token_stack</code>
and a <code>this_bq_count</code> variable with a value of <code>0</code>, that Block Quote was
being closed as no longer being correct.  It was not the proper thing to
do in this case, but in general, it was doing the right thing by removing
the Block Quote from the stack.</p>
<p>To fix this, one change was needed, with a lot of ripples to accompany it.
The one change was to have the <code>__handle_nested_container_blocks</code> function
pass the <code>this_bq_count</code> variable back to its callers.  A handful of
functions needed changes to accommodate this, including code in
the <code>__look_for_container_blocks</code> function to use this information.
While these changes were not difficult, it took me a bit to get them
right and review them to make sure that I felt that they were right.</p>
<p>But after all that work, all three sets of rule-based scenario tests
had their <code>skipped</code> tag removed, and they were all working cleanly.
To make sure things stayed that way, I added test functions
<code>test_extra_009</code> and <code>test_extra_009a</code> with the boiled down version of
the issue.  One nagging item off the list.  That felt good!  Now for
another one.</p>
<h2 id="issue-53-cleaning-up-list-tests"><a href="https://github.com/jackdewinter/pymarkdown/issues/53">Issue 53</a> - Cleaning Up List Tests<a class="headerlink" href="#issue-53-cleaning-up-list-tests" title="Permanent link">¶</a></h2>
<p>Sometimes the problem just stares you in the face and announces itself
proudly.  This was the case with test function <code>test_list_blocks_237x</code>
which was clearly throwing an assert.  Looking at the assert itself,
it was obvious that it was failing, but not how.  By adding a clear
assert message, I was able to find that out.  It was asserting because
it assumed that the extracted whitespace would always be whitespace.</p>
<p>In this case, the variable <code>adj_line_to_parse</code> contained the adjusted
line that needed to be parsed.  However, because it occurs within a
Block Quote, the start of the line included the Block Quote characters
and whitespace, not just whitespace.  That meant that when the parser hit
this code:</p>
<div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">adj_line_to_parse</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span>
    <span class="n">parser_state</span><span class="o">.</span><span class="n">nested_list_start</span><span class="o">.</span><span class="n">matching_markdown_token</span><span class="o">.</span><span class="n">extracted_whitespace</span>
<span class="p">)</span>
</pre></div>
<p>the assert failed.  The length of <code>extracted_whitespace</code> field was as it
was expected to be, the string that it was being compared to just included
other characters at the start of it.</p>
<p>The first step in fixing this was to change the <code>assert</code> into an <code>if</code>.  The
positive case of the previous <code>assert</code> was working fine, there were just
some cases where it needed some refinement.  To take care of that
“refinement”, this code was added in the <code>else</code> clause of the <code>if</code> statement:</p>
<div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">parser_state</span><span class="o">.</span><span class="n">original_line_to_parse</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span>
    <span class="n">adj_line_to_parse</span><span class="p">)</span>
<span class="n">orig_parse</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parser_state</span><span class="o">.</span><span class="n">original_line_to_parse</span><span class="p">)</span>
<span class="n">curr_parse</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">adj_line_to_parse</span><span class="p">)</span>
<span class="n">delta_parse</span> <span class="o">=</span> <span class="n">orig_parse</span> <span class="o">-</span> <span class="n">curr_parse</span>
<span class="n">whitespace_to_remove</span> <span class="o">=</span> <span class="n">parser_state</span><span class="o">.</span><span class="n">nested_list_start</span><span class="o">.</span><span class="n">matching_markdown_token</span><span class="o">.</span>
    <span class="n">extracted_whitespace</span><span class="p">[</span><span class="n">delta_parse</span><span class="p">:]</span>
<span class="k">assert</span> <span class="n">adj_line_to_parse</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">whitespace_to_remove</span><span class="p">)</span>
<span class="n">adj_line_to_parse</span> <span class="o">=</span> <span class="n">adj_line_to_parse</span><span class="p">[</span> <span class="nb">len</span><span class="p">(</span><span class="n">whitespace_to_remove</span><span class="p">)</span> <span class="p">:</span> <span class="p">]</span>
</pre></div>
<p>This code was all to get around the possibility that the leading spaces for
any line in a Block Quote can have Block Quote characters as part of that
leading space.  Once past those characters, everything else should be
whitespace.  So, this code works with that ending whitespace to adjust the
line to what it needs to be.</p>
<p>It took me a while to come up with that approach, but it made sense. And
another nagging issue down.  Just one more left.</p>
<h2 id="issue-59-cleaning-up-setext-tests"><a href="https://github.com/jackdewinter/pymarkdown/issues/59">Issue 59</a> - Cleaning Up SetExt Tests<a class="headerlink" href="#issue-59-cleaning-up-setext-tests" title="Permanent link">¶</a></h2>
<p>The last nagging issue deal with two almost identical scenario tests:
<code>test_setext_headings_064a</code> and <code>test_setext_headings_069a</code>.  With little information
to go on, I started to look at the output of the parser for this document:</p>
<div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">Foo</span>
<span class="o">===</span>
</pre></div>
<p>Quickly looking at those Markdown documents, I guessed wrong that the document
should produce a SetExt Heading.  Using the faithful Babelmark tool, I verified
that the provided Markdown should produce this HTML:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Foo
===<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
<p>It took me a couple of minutes to have an “aha” moment, but I eventually got there.
The problem that I had is that I prejudged the text because it looked like a SetExt
sequence.  Working though it some more in my head, I could then see that the
second line would be considered a paragraph continuation line unless there was
something more to that second line.  Indeed, when I added two extra spaces before
that second line, it matched the indent of the List Item and became a SetExt
Heading element.  But anything short of that, and it rightfully remaining a
simple paragraph continuation line.</p>
<p>With that information in hand, I debugged through the <code>parse_setext_headings</code>
function for a while before adding this code:</p>
<div class="highlight"><pre><span></span><span class="n">is_paragraph_continuation</span> <span class="o">=</span> <span class="bp">False</span>
<span class="k">if</span> <span class="p">(</span>
    <span class="nb">len</span><span class="p">(</span><span class="n">parser_state</span><span class="o">.</span><span class="n">token_stack</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>
    <span class="ow">and</span> <span class="n">parser_state</span><span class="o">.</span><span class="n">token_stack</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">is_list</span>
<span class="p">):</span>
    <span class="n">adj_text</span> <span class="o">=</span> <span class="n">position_marker</span><span class="o">.</span><span class="n">text_to_parse</span><span class="p">[</span><span class="n">position_marker</span><span class="o">.</span><span class="n">index_number</span> <span class="p">:]</span>
    <span class="k">assert</span> <span class="n">parser_state</span><span class="o">.</span><span class="n">original_line_to_parse</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">adj_text</span><span class="p">)</span>
    <span class="n">removed_text_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parser_state</span><span class="o">.</span><span class="n">original_line_to_parse</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span>
        <span class="n">adj_text</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="n">adj_text</span>
        <span class="ow">and</span> <span class="n">removed_text_length</span> <span class="o">&lt;</span> <span class="n">parser_state</span><span class="o">.</span><span class="n">token_stack</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">indent_level</span>
    <span class="p">):</span>
        <span class="n">is_paragraph_continuation</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
<p>Based on the <code>if</code> statement just before this code, it would only be
activated if the Leaf Block Processor was inside a Paragraph element.
In the logic that I added, if that paragraph was inside of a List Item,
a check was added to see how much whitespace was removed from the line
to get to that point.  If the amount removed was less than the indent
level and there was at least one non-whitespace character on that line,
it considered the current line a paragraph continuation.</p>
<p>With that logic in place, the ‘if’ statement in the code that followed:</p>
<div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">after_whitespace_index</span><span class="p">,</span>
    <span class="n">extra_whitespace_after_setext</span><span class="p">,</span>
<span class="p">)</span> <span class="o">=</span> <span class="n">ParserHelper</span><span class="o">.</span><span class="n">extract_whitespace</span><span class="p">(</span>
    <span class="n">position_marker</span><span class="o">.</span><span class="n">text_to_parse</span><span class="p">,</span> <span class="n">collected_to_index</span>
<span class="p">)</span>
<span class="k">if</span> <span class="n">after_whitespace_index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">position_marker</span><span class="o">.</span><span class="n">text_to_parse</span><span class="p">):</span>
</pre></div>
<p>was changed to:</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">is_paragraph_continuation</span> <span class="ow">and</span> <span class="n">after_whitespace_index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span>
    <span class="n">position_marker</span><span class="o">.</span><span class="n">text_to_parse</span>
<span class="p">):</span>
</pre></div>
<p>Basically, the existing logic was almost fine, but needed to also
check that it was not a paragraph continuation before proceeding.
Verifying the new code against both original test functions, it
also passed the two new function I added to help diagnose the problem.
I did leave them in there as they cleanly verified the boundary
cases that existed.</p>
<h2 id="issue-43-sometimes-it-is-a-small-fix"><a href="https://github.com/jackdewinter/pymarkdown/issues/43">Issue 43</a> - Sometimes It Is A Small Fix<a class="headerlink" href="#issue-43-sometimes-it-is-a-small-fix" title="Permanent link">¶</a></h2>
<p>Encountered during a previous debugging session, I made a note to myself to
check out the following Markdown:</p>
<div class="highlight"><pre><span></span><span class="o">*</span> <span class="k">First</span> <span class="n">Item</span>
  <span class="o">*</span> <span class="k">First</span><span class="o">-</span><span class="k">First</span>
   <span class="o">*</span> <span class="k">First</span><span class="o">-</span><span class="k">Second</span>
    <span class="o">*</span> <span class="k">First</span><span class="o">-</span><span class="n">Third</span>
<span class="o">*</span> <span class="k">Second</span> <span class="n">Item</span>
</pre></div>
<p>While that Markdown made no difference to the rule that I was debugging at the time, I
recognized that it was not properly creating a List Item out of the fourth line
as it should have.  Instead, the List Item started on line 3 contained both the
text for line 3 and for line 4.</p>
<p>After creating a new scenario test, I quickly dropped into debug mode and found
the problem relatively easily. Near
that start of the <code>is_olist_start</code> and <code>is_ulist_start</code> functions, there is a
standard whitespace check to make sure that the whitespace does not exceed the
usual three characters.  Simply speaking, prefaced with zero to three spaces,
this Markdown:</p>
<div class="highlight"><pre><span></span>   <span class="o">-</span> <span class="n">this</span> <span class="k">is</span> <span class="n">an</span> <span class="n">item</span>
</pre></div>
<p>is translated as a List Item.  By adding one more space to that prefix:</p>
<div class="highlight"><pre><span></span>    <span class="o">-</span> <span class="n">this</span> <span class="k">is</span> <span class="n">an</span> <span class="n">indented</span> <span class="n">code</span> <span class="n">block</span>
</pre></div>
<p>that List Item becomes content for an Indented Code Block.  Within another
List element, after the list indent is considered:</p>
<div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">this</span> <span class="k">is</span> <span class="n">an</span> <span class="n">item</span>
     <span class="o">-</span> <span class="n">this</span> <span class="k">is</span> <span class="n">a</span> <span class="n">nested</span> <span class="n">list</span>
</pre></div>
<p>is translated into a List and a Sublist, while:</p>
<div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">this</span> <span class="k">is</span> <span class="n">an</span> <span class="n">item</span>
      <span class="o">-</span> <span class="n">this</span> <span class="k">is</span> <span class="n">a</span> <span class="n">continuation</span> <span class="n">line</span>
</pre></div>
<p>is translated into one List with two-line content.</p>
<p>Verifying that everything still worked properly for the first two cases, I then
moved my focus to the remaining two cases. While the last case worked properly,
the “this is a nested list” case was being parsed as a continuation line.</p>
<p>With my eyes on those whitespace checks, this made sense.  Those checks were
evaluating whether the number of whitespace characters from the beginning of
the line was three or less.  In the “nested” case, it was failing that check
from the beginning of the line, when it should have been passing that check
from the start of the indent from the first List.</p>
<p>Already having calculated the amount of indent required by the parent list in
the <code>__adjust_whitespace_for_nested_lists</code> function, it was a simple matter
to pass it back with the <code>adj_ws</code> value.  Once passed back, that value was
added into the whitespace length check to reduce the required whitespace
properly.</p>
<p>After the code was passing the first scenario test <code>test_extra_010x</code>, I
added two extra scenario tests to make sure that this worked for other
cases.  While I could have added more tests, I figured that these
three tests gave the changes a good amount of coverage for now.  If necessary,
I can always go back and add more.</p>
<h2 id="issue-62-sometimes-it-really-is-a-check"><a href="https://github.com/jackdewinter/pymarkdown/issues/62">Issue 62</a> - Sometimes It Really Is A Check<a class="headerlink" href="#issue-62-sometimes-it-really-is-a-check" title="Permanent link">¶</a></h2>
<p>At an earlier point in the project’s history, I had tested this snippet of Markdown:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="k">simple</span> <span class="nb">text</span>
<span class="o">&gt;</span> <span class="n">dd</span>
<span class="o">&gt;</span> <span class="n">dd</span>
<span class="o">#</span> <span class="n">a</span>
</pre></div>
<p>and it had failed.  I can remember adding it during the development of Rule Md027,
as the repository history
<a href="https://github.com/jackdewinter/pymarkdown/commit/d34c7ed2248c4728ce4c14b812bad6a6a2c87289/issues.md">attests to</a>,
and I remember being surprised that something so simple could change the tokens.</p>
<p>However, in the time between 2021 Aug 15 and when I looked at on the morning
of 2021 Oct 17, it has ceased to be a problem.  Just to be sure, I added three new
scenario tests <code>test_extra_011x</code> to <code>test_extra_011b</code> to ensure that it would
remain a non-issue.  Sometimes you get lucky.</p>
<h2 id="issue-64-and-sometimes-you-did-something-wrong"><a href="https://github.com/jackdewinter/pymarkdown/issues/64">Issue 64</a> - And Sometimes You Did Something Wrong<a class="headerlink" href="#issue-64-and-sometimes-you-did-something-wrong" title="Permanent link">¶</a></h2>
<p>Noticed during the “grand” commenting rewriting of
<a href="https://github.com/jackdewinter/pymarkdown/issues/44">Issue 44</a>,
I added a note to the Issues List to check on Rule Md030, as I had noticed something
weird.  It was a good thing that I noticed it, as there was something weird that was
exposed by the scenario tests.</p>
<p>When I went to verify Rule Md030 and its scenario tests, I started by looking at the
original rule that this rule was based off.  While there is little clear
documentation on the configuration values for the original rule, this specific phrase
leapt out at me:</p>
<blockquote>
<p>consists of a single paragraph or multiple paragraphs</p>
</blockquote>
<p>The reason that this leapt out at me is that the work I had done on Rule Md030
was about single versus multiple levels of lists not paragraphs.  Delving into
the disconnect a bit more, the page
<a href="https://cirosantilli.com/markdown-style-guide/#spaces-after-list-marker">sited by the original rule</a>
does show examples with multiple paragraphs, not multiple levels within a list.</p>
<p>I can honestly say that the thought that went through my head was something akin
to “huh.  wonder how that happened?”  To be continually honest, if this is the
only big mistake I made during my efforts to implement every rule, I
will still consider it remarkably successful.  For me, if I do not must throw
away lots of work, my focus is on getting things done right, not
trying to figure out where it messed up.</p>
<p>Looking through the code for module <code>rule_md030.py</code>, most of the code was still
very usable.  I removed the function <code>__is_current_list_multiline</code> as it was no
longer needed.  Instead, the <code>__current_list_parent</code> field and the
<code>__paragraph_count_map</code> field were introduced to track the current list item and
the paragraph count for that list item.  Other than those changes, plus some
extra code to properly populating those fields and their associated objects,
and it relatively remained the same.</p>
<p>However, the changes to the scenario tests were more substantial.  Each of the
existing <code>*_double.md</code> tests were changed to have a list item with two paragraphs
instead of a list item that was part of a level 2 sublist.  Basically, the
Markdown document:</p>
<div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">.</span> <span class="k">First</span>
<span class="mi">1</span><span class="p">.</span> <span class="k">Second</span>
   <span class="mi">1</span><span class="p">.</span> <span class="k">Second</span> <span class="n">A</span>
<span class="mi">1</span><span class="p">.</span> <span class="n">Third</span>
</pre></div>
<p>changed to:</p>
<div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">.</span> <span class="k">First</span>
<span class="mi">1</span><span class="p">.</span> <span class="k">Second</span> <span class="o">-</span> <span class="mi">1</span>

   <span class="k">Second</span> <span class="o">-</span> <span class="mi">2</span>
<span class="mi">1</span><span class="p">.</span> <span class="n">Third</span>
</pre></div>
<p>To add coverage to properly test the new understanding of the rule, eight new
scenario tests were added with nested sublists.  These were evenly divided between
the Ordered Lists and Unordered Lists, and again between single paragraph List Items
and multiple paragraph List Items.  Add to that the required cleanup of the documentation
page for <a href="https://github.com/jackdewinter/pymarkdown/blob/main/docs/rules/rule_md030.md">Rule Md030</a>,
and things were ready to go!</p>
<h2 id="issue-66-winding-down"><a href="https://github.com/jackdewinter/pymarkdown/issues/66">Issue 66</a> - Winding Down<a class="headerlink" href="#issue-66-winding-down" title="Permanent link">¶</a></h2>
<p>As far as authoring these articles go, I am getting into a good groove most
weekends.  Because I take the time during the week to curate a simple outline
of what I want the article to be, I can start building a set of good paragraphs
and examples from that outline and really bring it to life.  But sometimes I
can get ahead of where I feel I need to be, and tonight is one of those nights.</p>
<p>Having spent a solid amount of time writing, doing work around the house, and
spending time with my family, I found I had some “extra” time left over.  To be
honest, the reason the word <em>extra</em> is in quotation marks is because there
really is no concept of extra time.  I believe it would be more correct to say
that I found myself with about two hours of time that I had not planned for,
and I wanted to fill that time with something useful.  As such, I started to
look at some more of the issues that I logged during my work on
<a href="https://github.com/jackdewinter/pymarkdown/issues/44">Issue 44</a>.</p>
<p>The first issue that I grabbed was simple labelled as such:</p>
<div class="highlight"><pre><span></span><span class="o">###</span> <span class="n">Verify</span> <span class="n">test_md023_bad_improper_indent_atx_in_list_item</span> <span class="k">in</span> <span class="n">lists</span> <span class="k">and</span> <span class="n">block</span> <span class="n">quotes</span>
</pre></div>
<p>As such, I looked at the specified tests, and everything looked fine.
In fact, it was a fitting example of Rule Md023 operating cleanly inside of a
List Item.  Then I took another look at the title of the function:
<code>test_md023_bad_improper_indent_atx_in_list_item</code>.  Well, that was a bit off!</p>
<p>To fix this issue, and the same issue with the <code>*in_block_quotes</code> variant
of this scenario test, I changed the prefix of both files from
<code>test_md023_bad_improper</code> to <code>test_md023_good_proper</code>.  After changing the
file names, I changed the scenario text function names to match, and all
was good.  However, to make sure the original intent of those scenario tests
was fulfilled, I created two new test functions and test data files with the
original names.  Executing those two new scenario tests, I then verified
that they were failing properly, adjusted the expected output, and declared
the issue fixed.</p>
<h2 id="issue-70-more-winding-down"><a href="https://github.com/jackdewinter/pymarkdown/issues/70">Issue 70</a> - More Winding Down<a class="headerlink" href="#issue-70-more-winding-down" title="Permanent link">¶</a></h2>
<p>With the minutes of my “extra” time winding down, I found this issue and
figured out that it was a simple one to fix.  For the most part, the main
problem with this issue was that the names of the functions were not
indicative of what was being tested.  In addition, I added a new
<code>test_md036_bad_configuration_punctuation</code> test function to supply a test
for the <code>punctuation</code> configuration value.</p>
<p>And then I put the digital equivalent of my pen down for the evening.
I had an incredibly good start on the article for this week, and I also had
managed to get a fair number of items removed from the Issues List.</p>
<h2 id="what-was-my-experience-so-far">What Was My Experience So Far?<a class="headerlink" href="#what-was-my-experience-so-far" title="Permanent link">¶</a></h2>
<p>To explain how I am feeling about the project is hard to explain without
relating it to something relatable like drafting an article or an essay.
There are those essays that we all wrote in high school where we just
wanted to get it done.  Those were more about ensuring that we met the
minimum requirements for the essay to be counted by our teachers, and
that was it.</p>
<p>This project is something different to me.  To me, this feels like an
extended essay on something that I care very deeply about.  It is not
enough that I want to meet the minimum requirements of the task, I
want to make sure to convey a certain feeling with my essay.  To that
extent, I do not mind if I must go over certain parts of the essay
repeatedly until I get the tone and theme exactly right.</p>
<p>From a given viewpoint, this project is already a success.  I have
a beta release that is out, and it addresses the linting requirements
that I want it to address.  But for me, that is not enough.  I want
to make sure the project is solid, with good development principles
throughout.  And for me, the first part of meeting that goal is to
address those items that I put off for any reason.</p>
<p>And for me, striving to increase quality is the goal that keeps
me going!</p>
<h2 id="what-is-next">What is Next?<a class="headerlink" href="#what-is-next" title="Permanent link">¶</a></h2>
<p>To be blunt, I am starting to get to the end of the easier to resolve
issues.  What are left are more general issues and issues that require
me to double check things.  Not sure where that is going yet, so
stay tuned!</p>


             
 
                <p id="post-share-links">
    Like this post? Share on:
    <a href="https://twitter.com/intent/tweet?text=Markdown%20Linter%20-%20Tying%20Up%20Some%20Loose%20Ends&url=https%3A//jackdewinter.github.io/2021/10/17/markdown-linter-tying-up-some-loose-ends/&hashtags=markdown-linter,core-linter" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jackdewinter.github.io/2021/10/17/markdown-linter-tying-up-some-loose-ends/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
    ❄
    <a href="mailto:?subject=Markdown%20Linter%20-%20Tying%20Up%20Some%20Loose%20Ends&amp;body=https%3A//jackdewinter.github.io/2021/10/17/markdown-linter-tying-up-some-loose-ends/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
    </p>

            
            






<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="https://jackdewinter.github.io/2021/10/17/markdown-linter-tying-up-some-loose-ends/#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">

                        <script src="https://utteranc.es/client.js"
        data-repo="jackdewinter/jackdewinter.github.io"
        data-issue-term="markdown-linter-beta-bugs-d"
        data-label="Comments"
        data-theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://jackdewinter.github.io/2021/10/10/markdown-linter-cleaning-things-up/" title="Previous: Markdown Linter - Cleaning Things Up">Markdown Linter - Cleaning Things Up</a></li>
                <li class="next-article"><a href="https://jackdewinter.github.io/2021/10/25/markdown-linter-fun-with-nested-containers/" title="Next: Markdown Linter - Fun With Nested Containers">Markdown Linter - Fun With Nested Containers</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~15 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2021-10-17T00:00:00-07:00">Oct 17, 2021</time>
        <h4>Markdown Linter Beta Bugs</h4>
    <ul class="multi-parts-list">
            <li >
            <a href="https://jackdewinter.github.io/2021/09/27/markdown-linter-clearing-away-some-bugs/" title="Markdown Linter - Clearing Away Some Bugs">Part 1: Markdown Linter - Clearing Away Some Bugs</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/10/04/markdown-linter-more-beta-bugs/" title="Markdown Linter - More Beta Bugs">Part 2: Markdown Linter - More Beta Bugs</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/10/10/markdown-linter-cleaning-things-up/" title="Markdown Linter - Cleaning Things Up">Part 3: Markdown Linter - Cleaning Things Up</a>
            </li>
            <li  class="active-part">
            Part 4: Markdown Linter - Tying Up Some Loose Ends
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/10/25/markdown-linter-fun-with-nested-containers/" title="Markdown Linter - Fun With Nested Containers">Part 5: Markdown Linter - Fun With Nested Containers</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/11/01/markdown-linter-double-checking-my-double-checks/" title="Markdown Linter - Double Checking My Double Checks">Part 6: Markdown Linter - Double Checking My Double Checks</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/11/08/markdown-linter-fun-with-block-quotes/" title="Markdown Linter - Fun With Block Quotes">Part 7: Markdown Linter - Fun With Block Quotes</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/11/29/markdown-linter-the-bug-that-almost-knocked-me-down/" title="Markdown Linter - The Bug That Almost Knocked Me Down">Part 8: Markdown Linter - The Bug That Almost Knocked Me Down</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/12/20/markdown-linter-getting-back-to-work/" title="Markdown Linter - Getting Back To Work">Part 9: Markdown Linter - Getting Back To Work</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/12/27/markdown-linter-deciding-what-is-important/" title="Markdown Linter - Deciding What Is Important">Part 10: Markdown Linter - Deciding What Is Important</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2022/01/03/markdown-linter-keeping-at-it-with-something-that-works-for-you/" title="Markdown Linter - Keeping At It With Something That Works (For You)">Part 11: Markdown Linter - Keeping At It With Something That Works (For You)</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2022/01/10/markdown-linter-know-when-to-break-the-rules/" title="Markdown Linter - Know When To Break The Rules">Part 12: Markdown Linter - Know When To Break The Rules</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2022/01/17/markdown-linter-finding-something-that-works/" title="Markdown Linter - Finding Something That Works">Part 13: Markdown Linter - Finding Something That Works</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2022/01/24/markdown-linter-why-nested-containers-are-so-difficult/" title="Markdown Linter - Why Nested Containers Are So Difficult">Part 14: Markdown Linter - Why Nested Containers Are So Difficult</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2022/01/31/markdown-linter-there-is-no-such-thing-as-professional-life/" title="Markdown Linter - There Is No Such Thing As Professional Life">Part 15: Markdown Linter - There Is No Such Thing As Professional Life</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2022/02/07/markdown-linter-is-it-worth-it/" title="Markdown Linter - Is It Worth It?">Part 16: Markdown Linter - Is It Worth It?</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2022/02/14/markdown-linter-grinding-away-at-issues/" title="Markdown Linter - Grinding Away At Issues">Part 17: Markdown Linter - Grinding Away At Issues</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2022/03/14/markdown-linter-pi-day-blues/" title="Markdown Linter - Pi Day Blues">Part 18: Markdown Linter - Pi Day Blues</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2022/03/28/markdown-linter-python-type-hinting/" title="Markdown Linter - Python Type Hinting">Part 19: Markdown Linter - Python Type Hinting</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2022/05/17/markdown-linter-shifting-left/" title="Markdown Linter - Shifting Left">Part 20: Markdown Linter - Shifting Left</a>
            </li>
    </ul>
            <h4>Category</h4>
            <a class="category-link" href="https://jackdewinter.github.io/categories#software-quality-ref">Software Quality</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://jackdewinter.github.io/tags#core-linter-ref">core linter
                    <span>92</span>
</a></li>
                <li><a href="https://jackdewinter.github.io/tags#markdown-linter-ref">markdown linter
                    <span>110</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/jackdewinter" title="github-alt" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/jackdewinter/" title="linkedin" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://jackdewinter.github.io/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2021 by Jack De Winter and licensed under a <a rel="license"
  href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.

    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>