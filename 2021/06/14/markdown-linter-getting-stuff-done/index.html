<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Jack De Winter" />

        <meta name="description" content="Summary¶ In my last article, I talked about the break I took to work on some refactoring of the properties system for PyMarkdown. In this article, I talk about getting back to PyMarkdown and my efforts to remove items from the issues list. Introduction¶ While I have referred to the …
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="markdown linter, core linter, Software Quality, " />

<meta property="og:title" content="Markdown Linter - Getting Stuff Done "/>
<meta property="og:url" content="https://jackdewinter.github.io/2021/06/14/markdown-linter-getting-stuff-done/" />
<meta property="og:description" content="Summary¶ In my last article, I talked about the break I took to work on some refactoring of the properties system for PyMarkdown. In this article, I talk about getting back to PyMarkdown and my efforts to remove items from the issues list. Introduction¶ While I have referred to the …" />
<meta property="og:site_name" content="Jack&#39;s Digital Workbench" />
<meta property="og:article:author" content="Jack De Winter" />
<meta property="og:article:published_time" content="2021-06-14T00:00:00-07:00" />
<meta name="twitter:title" content="Markdown Linter - Getting Stuff Done ">
<meta name="twitter:description" content="Summary¶ In my last article, I talked about the break I took to work on some refactoring of the properties system for PyMarkdown. In this article, I talk about getting back to PyMarkdown and my efforts to remove items from the issues list. Introduction¶ While I have referred to the …">

        <title>Markdown Linter - Getting Stuff Done  · Jack&#39;s Digital Workbench
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://jackdewinter.github.io/theme/css/style.min.css?bec7d543">

        <link href="https://jackdewinter.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack&#39;s Digital Workbench - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://jackdewinter.github.io/"><span class=site-name>Jack's Digital Workbench</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jackdewinter.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://jackdewinter.github.io/categories">Categories</a></li>
                                <li ><a href="https://jackdewinter.github.io/tags">Tags</a></li>
                                <li ><a href="https://jackdewinter.github.io/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://jackdewinter.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://jackdewinter.github.io/2021/06/14/markdown-linter-getting-stuff-done/">
                Markdown Linter - Getting Stuff Done
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-the-audience-for-this-article">What Is the Audience for This Article?</a></li>
<li><a href="#sometimes-research-does-not-work-out">Sometimes, Research Does Not Work Out</a><ul>
<li><a href="#start-at-the-beginning">Start At The Beginning</a></li>
<li><a href="#add-content-in-the-middle">Add Content In The Middle</a></li>
<li><a href="#wrap-things-up-in-the-end">Wrap Things Up In The End</a></li>
</ul>
</li>
<li><a href="#cleanup">Cleanup</a></li>
<li><a href="#issue-8-exposing-command-line-options-as-configuration-items">Issue 8: Exposing Command Line Options As Configuration Items</a><ul>
<li><a href="#code-changes">Code Changes</a></li>
<li><a href="#documentation-changes">Documentation Changes</a></li>
</ul>
</li>
<li><a href="#and-along-the-way">And Along The Way…</a><ul>
<li><a href="#fixing-that-issue">Fixing That Issue</a></li>
</ul>
</li>
<li><a href="#issue-9-better-plugins-support">Issue 9: Better Plugins Support</a><ul>
<li><a href="#plugin-lists">Plugin Lists</a></li>
<li><a href="#plugins-info">Plugins Info</a></li>
<li><a href="#making-it-work">Making It Work</a></li>
</ul>
</li>
<li><a href="#issue-10-moving-token-code-into-the-token-module">Issue 10: Moving Token Code Into the Token Module</a></li>
<li><a href="#what-was-my-experience-so-far">What Was My Experience So Far?</a></li>
<li><a href="#what-is-next">What is Next?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>In my
<a href="https://jackdewinter.github.io/2021/06/07/python-packages-the-birth-of-application_properties/">last article</a>, I talked
about the break I took to work on some refactoring of the properties system
for PyMarkdown.  In this article, I talk about getting back to PyMarkdown and
my efforts to remove items from the issues list.</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">¶</a></h2>
<p>While I have referred to the work to date as the initial release, in my
mind it was always a beta release.  And for me, the focus of a beta release
is to continue to test features, to clean up documentation, and to try and
resolve any high priority issues.  It is not a time to relax, it is a time
to make sure that I work on the issues that will have a definite impact
on the PyMarkdown project.</p>
<p>The testing of features is going great!  Every so often, I find a small
issue that is easily fixed within fifteen minutes of finding it. That
part is doing fine.  Because of my hard work on the documentation prior
to the beta release, the main documents are in good condition.  But like
the testing of features, there are issues where I believe I can add
beneficial information to the documents.  In addition, some of the later
documents need some extra work to bring them up to the same level as the
main documents.  And as always, there are issues to diagnose and fix.</p>
<p>And that means a lot of this work will span all three of these areas,
with a focus on the last two: documentation and fixing issues.</p>
<h2 id="what-is-the-audience-for-this-article">What Is the Audience for This Article?<a class="headerlink" href="#what-is-the-audience-for-this-article" title="Permanent link">¶</a></h2>
<p>While detailed more eloquently in
<a href="https://jackdewinter.github.io/2020/04/05/what-is-the-audience-for-my-blog/#what-is-the-audience-for-my-blog">this article</a>,
my goal for this technical article is to focus on the reasoning behind my solutions,
rather that the solutions themselves.  For a full record of the solutions presented in
this article, please consult the commits that occurred on
12 Jun 2021 between
<a href="https://github.com/jackdewinter/pymarkdown/commit/878883074e027c095c51a07907dbbe54d5a3465d">this commit</a>
and
<a href="https://github.com/jackdewinter/pymarkdown/commit/d5064dacc0d04cfaad0217ab3cb37fd6a22a031f">this commit</a>.</p>
<h2 id="sometimes-research-does-not-work-out">Sometimes, Research Does Not Work Out<a class="headerlink" href="#sometimes-research-does-not-work-out" title="Permanent link">¶</a></h2>
<p>I know, this section is breaking one of my rules about telling a good story:
do not give away the ending.  But in this case, I think I have a good reason
to break that rule.  One thing that I have learned over the years is that
while success helps us move forward, we learn the best lessons from when
things do not work out.</p>
<h3 id="start-at-the-beginning">Start At The Beginning<a class="headerlink" href="#start-at-the-beginning" title="Permanent link">¶</a></h3>
<p>At the start of that week’s work, I was looking at this item from the Issues
List:</p>
<div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">test_md026_good_unordered_list_into_atx_into_paragraph</span> <span class="n">should</span> <span class="k">not</span> <span class="n">need</span> <span class="k">to</span> <span class="n">test</span>
  <span class="o">-</span> <span class="n">what</span> <span class="k">is</span> <span class="n">the</span> <span class="n">effect</span> <span class="k">of</span> <span class="n">changing</span> <span class="n">the</span> <span class="n">ordering</span> <span class="k">of</span> <span class="n">a</span> <span class="n">blank</span> <span class="n">that</span> <span class="n">closes</span> <span class="n">a</span> <span class="n">list</span> <span class="n">so</span> <span class="n">the</span> <span class="n">blank</span> <span class="n">comes</span> <span class="k">last</span>
</pre></div>
<p>Basically, with one small exception, the order in which Markdown elements appear
in the <a href="https://github.com/jackdewinter/pymarkdown/blob/main/docs/developer.md">Markdown token stream</a>
are the order in which they appear in the Markdown document.  With one exception:
end List tokens and Blank Line tokens.</p>
<p>Due to the nature of the algorithms and the consistency checks used for the
parser, I cannot remember a time when those two tokens appeared in what I
would consider to be the correct
order.  There are cases where a Blank Line element closes an opened List
element. To me it seems logical that the end List token should come first,
followed by the Blank Line token that forced the close.  From my point of
view, in these cases the List element is closed, and then the Blank Line
element is processed.  So, from where I sit, the problem is that my
“correct” ordering is not being reflected properly in the token stream.</p>
<p>The other interesting piece of information?  This is only relevant to
producing an accurate token stream for linting.  To verify that the
Markdown is being parsed properly, the HTML generator uses the token stream
to create the correct HTML elements.  However, because the Blank Line
token has no effect on the HTML that is output, the ordering of these
tokens has no effect on the resultant HTML.  While that is a bit of
a saving grace, it also makes it harder to test for.</p>
<p>Learning from trying to solve other hard issues before, I knew I needed
to give myself a firm time limit to solve this one.  The time limit I picked
was 8 hours.  That would give me at least two weekday nights and some
time on the weekend to work on this issue.  That seemed reasonable.</p>
<p>It was time to dig in and get to work!</p>
<h3 id="add-content-in-the-middle">Add Content In The Middle<a class="headerlink" href="#add-content-in-the-middle" title="Permanent link">¶</a></h3>
<p>As I worked through experiments, the easy part was always getting the
exact case mentioned above working.  But after I got that scenario test
working properly, there were always side effects that I needed to
mitigate.  I looked at the code, make some adjustment for
the current experiment that I was working on, only to find out that I
did not have the right limitations on the change that I made.</p>
<p>I know that the core code itself is not fragile.  That is one of
the first thoughts that I had.  Looking into that core code, it seems
to be stable and allows me to introduce changes without a lot of
side effects.  It just seemed to me that every time I made simple
experimental changes to the core code to elicit the desired behavior,
the leading whitespace was an issue.</p>
<p>That was frustrating, but also bolstering.  To be honest, while I
believe the project is solidly designed, I am sure that I did not
get everything right.  I would like to think that I got most things
right, but I can only empirically say that I engineered the project
to produce the correct results per the GFM Specification.  I am okay
with knowing that I have some more work to do with leading whitespace
handling.  It is something I now know that I can work on improve
in the future.  Something that will not blindside me.</p>
<p>In the end, I am sure I am missing things to do with the whitespace
and how it is handled.  I am just not sure where to go from there.
I tried a handful of different approaches to the problem, but it
always came down to whitespace and how it was handled.  It was
a tough thing to come to an understanding with, but most learning
worth doing always comes at a cost.</p>
<h3 id="wrap-things-up-in-the-end">Wrap Things Up In The End<a class="headerlink" href="#wrap-things-up-in-the-end" title="Permanent link">¶</a></h3>
<p>After 9 hours, 8 hours plus a bit of extra time, I called it quits…
for now.  While I was not able to fix the issue, I was able to learn
some valuable things.</p>
<p>The main thing is that I learned is that the leading whitespace
handling in the
parser needs improvement.  With each experiment, the success
of the experiment quickly devolved into how well I understood the
leading whitespace handling.  And while I have coded each line of the project,
I must concede that I have lost some of the context of that part
of the project. Even after reading my articles about how I dealt
with those section of the code, I still cannot grasp how I handled
that whitespace.
So, to move forward, I need to consider whether I want to take some
time and rewrite that leading whitespace handling to provide that
extra context.  Without it, any fixing of issues dealing with leading
whitespace are a no-go.</p>
<p>The second thing that I learned is that Markdown to HTML generators
probably have an easier time with their implementations than I do.
Getting the parser to generate the correct tokens in the right order
is easy. It was a bit finicky to do, but relatively easy.  Adapting the
HTML generator to work with that output was also easy.
When I resolved the ordering issue, some complexity in the HTML generator
was removed as it was no longer needed.  Each experiment failed due
to issues with tracking the whitespace properly, not the HTML that was
generated.</p>
<p>That is where I left things with this issue: unresolved.  I added
some documentation to the
<a href="https://github.com/jackdewinter/pymarkdown/blob/main/docs/developer.md">Developer’s Document</a>,
but since the ordering issue is easily worked around, I decided to leave the existing
behavior in place.  If I want to try and fix this issue again, I will need to
make sure to do a better job on the whitespace handling in the parser,
as the success of solving this issue will hinge on my ability to
understand and adapt that whitespace handling.</p>
<p>But for now, this issue is pretty much permanently benched.  Not time
lost on something that did not work, but things learned to improve the
project and perhaps try again at a later date.</p>
<h2 id="cleanup">Cleanup<a class="headerlink" href="#cleanup" title="Permanent link">¶</a></h2>
<p>As always, I try and make the projects that I work on better with each iteration,
and this week’s work was no different.  During the testing that I did in the above
section, I noticed
that I was getting an error at the end of the test runs.  For the ~15% of the time
that the occurred, it indicated that the coverage file was not valid.  It was an
easy enough error to fix; I just re-ran the tests and it “went away”.  But that
got annoying very quickly.</p>
<p>Looking online, others reported similar behavior with the <code>5.*</code> series of the
coverage tool.  Unfortunately, there did not seem to be a fix in place, only
people reporting that it was intermittent.  Based on some of those reports,
the quickest solution seemed to be to go back to the <code>pytest-cov</code>
package’s <code>2.10.1</code> version and the <code>coverage</code> package’s <code>4.5.4</code> version.
After about 20 test runs of the scenario tests, and many times since then,
that error has not showed up.  The tests do seem to run a bit slower when
I am looking for coverage data, but at least that error does not show up
anymore.  When I have some time, I will try and look at it some more, but it
is fixed enough to not be a problem.</p>
<p>Other than that, the only change that bears mentioning is that I cleaned up
the file <code>unordered_list_into_atx_into_paragraph.md</code> to make it simpler to
parse instead of containing a long list and a long paragraph. I found out
that I do not need a list with five items and a paragraph with five lines,
I just need a list with one item and one line.  I cannot recall if that
added the violation of rule <code>md022</code> or not, but I added it to the test
that references that file to make sure it was reporting cleanly.</p>
<p>Once again, nothing serious, just some simple cleanup.</p>
<h2 id="issue-8-exposing-command-line-options-as-configuration-items">Issue 8: Exposing Command Line Options As Configuration Items<a class="headerlink" href="#issue-8-exposing-command-line-options-as-configuration-items" title="Permanent link">¶</a></h2>
<p><a href="https://github.com/jackdewinter/pymarkdown/issues/8">Issue 8</a> was created
to address a simple issue: the <code>--stack-trace</code> and <code>--add-plugin</code> command
line arguments did not have a corresponding equivalent in the configuration
system.  While it may seem like a trivial change, for me it was an
important one.  It is particularly important to me that each command line item should
have a configuration item, unless there was a very good reason, and only
on an item-by-item basis.</p>
<p>These two command line flags were the only reasonable cases that had not
been addressed. It was time to fix that.</p>
<h3 id="code-changes">Code Changes<a class="headerlink" href="#code-changes" title="Permanent link">¶</a></h3>
<p>The change for the <code>--stack-trace</code> flag was a simple change at the
start of the <code>__initialize_logging</code> function. Instead of:</p>
<div class="highlight"><pre><span></span>        <span class="bp">self</span><span class="o">.</span><span class="n">__show_stack_trace</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">show_stack_trace</span>
</pre></div>
<p>this code was added:</p>
<div class="highlight"><pre><span></span>        <span class="bp">self</span><span class="o">.</span><span class="n">__show_stack_trace</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">show_stack_trace</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__show_stack_trace</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__show_stack_trace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__properties</span><span class="o">.</span><span class="n">get_boolean_property</span><span class="p">(</span>
                <span class="s2">"log.stack-trace"</span>
            <span class="p">)</span>
</pre></div>
<p>It is a simple change, but a necessary one to follow the configuration
ordering detailed in the
<a href="https://github.com/jackdewinter/pymarkdown/blob/main/docs/advanced_configuration.md#configuration-property-ordering">Advanced Configuration</a>
document.  Prior to this change, only the command line flag was being checked.
With this change, if the command line flag was not used, then the configuration
system is queried to determine if the stack trace should be enabled.  Because
the command line only ever enables the flag, the logic remains simple.</p>
<p>While a slight bit more complex, similar changes were required for
the <code>initialize</code> function in the plugin manager.  Originally, the code was
quite simple:</p>
<div class="highlight"><pre><span></span>    <span class="k">if</span> <span class="n">additional_paths</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">next_additional_plugin</span> <span class="ow">in</span> <span class="n">additional_paths</span><span class="p">:</span>
</pre></div>
<p>Basically, if the command line provided any addition plugin paths to
explore, they were placed in the <code>additional_paths</code> variable that
contained an array of paths.  The <code>for</code> statement at the end of
the example leads into the code that handles loading plugins when
either a directory or a file is specified.  Very simple, and very
straightforward.</p>
<p>This is where the code got more complex, but not unbearably so:</p>
<div class="highlight"><pre><span></span>    <span class="n">all_additional_paths</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">additional_paths</span><span class="p">:</span>
        <span class="n">all_additional_paths</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">additional_paths</span><span class="p">)</span>
    <span class="n">more_paths</span> <span class="o">=</span> <span class="n">properties</span><span class="o">.</span><span class="n">get_string_property</span><span class="p">(</span><span class="s2">"plugins.additional_paths"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">more_paths</span><span class="p">:</span>
        <span class="n">all_additional_paths</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">more_paths</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">all_additional_paths</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">next_additional_plugin</span> <span class="ow">in</span> <span class="n">all_additional_paths</span><span class="p">:</span>
</pre></div>
<p>In the new code, the variable <code>all_additional_paths</code> is the new array
that contains all the paths.  First, that array is primed with
anything presented on the command line, as before.  Then the configuration
system is checked to see if any additional paths are specified.  If
any string is specified, it is treated as a comma-separated list and
processed into elements as such.  That list of paths is then added
to the end of the <code>all_additional_paths</code> list, and then processing
resumes as before.</p>
<h3 id="documentation-changes">Documentation Changes<a class="headerlink" href="#documentation-changes" title="Permanent link">¶</a></h3>
<p>The code changes to get this working took approximately 40 minutes to
complete, from writing the first scenario test to ensuring that each
test was passing properly.  The interesting part was in documenting
the behaviors of these flags.  Specifically, the issue was in
documenting the <code>--stack-trace</code> flag versus the <code>log.stack-trace</code>
configuration item.</p>
<p>In both cases, the actual documentation for command line option versus
configuration item took minimal effort.  However, in the case of the
<code>--stack-trace</code> flag, there is a significant difference that needed
to be documented.</p>
<p>Prior to this change, the documentation for the flag was limited to
this entry in the <a href="https://github.com/jackdewinter/pymarkdown/blob/main/docs/advanced_configuration.md">Advanced Configuration</a>
file:</p>
<blockquote>
<p>if an error occurs, print out the stack trace for debug purposes.  Also
sets the initial logging (config processing) to debug. (Default: <code>false</code>)</p>
</blockquote>
<p>While that was true while just the command line flag was present, it
also did not go into much depth on what the other effects are. As I wanted
to make sure I was being clear, I took my time to properly document
the differences between the command line flag and the configuration item.</p>
<p>It was a simple difference, but it took some explaining.  Once the
logging system was initialized, the behavior of both items was
the same.  The difference was in the behavior before the logging
system was initialized.  I needed to ensure that if there was an
error logged before the logging system was initialized, that I can
diagnose it.  Working through those debug scenarios and documenting
them in the Advanced Configuration document made sense.  A good
side effect is that it also validated my design and implementation
of the starting code worked.</p>
<h2 id="and-along-the-way">And Along The Way…<a class="headerlink" href="#and-along-the-way" title="Permanent link">¶</a></h2>
<p>Everyone has their pet peeves, and I am not immune from their power either.
In my case, I prefer to avoid having to memorize long command lines and
various “obscure” sequences in favor of useful helper scripts and looking
up the less familiar sequences when I need them.  I am not sure whether
it is classified as being lazy or being efficient, but I just do not
find any value in memorizing things that can be easily addressed but
simpler processes.</p>
<p>It is for that reason that I spent the better part of an hour fine tuning
a script I used called <code>ptest.cmd</code>.  Before I switched to that script,
I frequently typed <code>pipenv run pytest</code> into my command shell to execute
the scenario tests.  If I needed to specify a specific set of tests, I would
use the form <code>pipenv run pytest -k test_prefix</code> to execute any tests starting
with that <code>test_prefix</code> string.</p>
<p>But I was hitting a bit of an issue with that usage pattern.  For a long
time, I have executed the tests with the extra configuration provided by
the <code>setup.cfg</code> file:</p>
<div class="highlight"><pre><span></span><span class="na">addopts</span><span class="o">=</span><span class="s">--timeout=10</span>
<span class="s">   --html=report/report.html</span>
<span class="s">   --cov</span>
<span class="s">   --cov-branch</span>
<span class="s">   --cov-fail-under=90</span>
<span class="s">   --strict-markers</span>
<span class="s">   -ra</span>
<span class="s">   --cov-report xml:report/coverage.xml</span>
<span class="s">   --cov-report html:report/coverage</span>
<span class="s">   --junitxml=report/tests.xml</span>
</pre></div>
<p>But as I noted in the above section on <a href="#cleanup">Cleanup</a>, one of the
changes I made to address the PyTest coverage issues resulted in a
slower execution time.  To address this, I wanted to only execute the
tests with coverage data if requested, hopefully speeding things up.
And after some simple tests, the execution duration without coverage was
amazing.  It seemed like the duration for an unmeasured set of tests was
approximately 25% of the duration for a measured set of tests.</p>
<p>The problem?  It meant moving away from general command line execution
and into a script.  While I found the command <code>pipenv run pytest</code> to be
simple enough to use all the time, speeding up the execution of those
tests would require me to include five arguments when I wanted to
execute the tests with coverage.  That went over my own internal line
of what was acceptable.</p>
<h3 id="fixing-that-issue">Fixing That Issue<a class="headerlink" href="#fixing-that-issue" title="Permanent link">¶</a></h3>
<p>The logical place to house those changes was in the <code>ptest.cmd</code> script.
To keep my “clean build” script, <code>clean.cmd</code>, clean, I had set up that
script to call into the <code>ptest.cmd</code> script when it came to executing
the tests.  So, I had to figure out how to make this script work as
part of the clean build process and part of my normal development
process.</p>
<p>First, I added a new <code>-c</code> flag to trigger whether coverage should be
enabled for the next test run.  As that was the main driver for this
change, I wanted to get it out of the way.  I also made changes to
GitHub Workflow <code>main.yml</code> file to mirror what I was doing with the
<code>ptest.cmd</code> script.</p>
<p>Starting to use the script in my normal development, I noticed that
the “normal” mode for the script was to not
show anything about the test run unless there were errors.  While that
was fine for the clean build scenario, it was less than optimal for
the development scenario.  I addressed that by adding a <code>-q</code> flag
to allow the <code>clean.cmd</code> script to specify that previous behavior. If
not specified, the new default behavior was to show all output from
the tests, providing the same output as if the entire <code>pytest</code> command
was entered on the command line.</p>
<p>Finally, I added the <code>-k</code> flag to allow for the passing in of a keyword
to look for with the tests.  I knew I was going to have to support this
flag, as it was part of the two base scenarios that I needed to support,
but I wanted to make sure that everything else was cleaned up first.
With everything else in place, the handling of this flag was easily
added.</p>
<p>And while I am sure I will make more fine-tuning to scripts in the future,
this was good enough for now!</p>
<h2 id="issue-9-better-plugins-support">Issue 9: Better Plugins Support<a class="headerlink" href="#issue-9-better-plugins-support" title="Permanent link">¶</a></h2>
<p>One thing that had been bothering me for a while were the few items from
the Issues List that brought together to make up <a href="https://github.com/jackdewinter/pymarkdown/issues/9">Issue 9</a>.
I had thought out the rule plugins far in advance of when I needed them,
but I had not applied that same rigor to the exposing of those same plugins
to the command line.  I felt that I had done okay in exposing the plugins
to the command line, but I knew I could do better.</p>
<h3 id="plugin-lists">Plugin Lists<a class="headerlink" href="#plugin-lists" title="Permanent link">¶</a></h3>
<p>The first thing on that list was the listing of the available plugins via
the <code>plugins list</code> command.  After using that command a few times to check on the
plugins, I was convinced that two enabled columns, <code>enabled (default)</code>
and <code>enabled (current)</code>, did not have to take up the space that they did.
After performing some experiments, I found that by specifying each column
title with a newline character in the middle of the title would split the
column content over multiple lines.  Therefore, changing the column
titles to <code>enabled\n(default)</code> and <code>enabled\n(current)</code> provided the exact
effect that I was looking for.</p>
<p>Now, when I used that command, I saw this:</p>
<div class="highlight"><pre><span></span>  ID     NAMES                                 ENABLED    ENABLED    VERSION
                                               (DEFAULT)  (CURRENT)

  md001  heading-increment, header-increment   True       True       0.5.0
  md002  first-heading-h1, first-header-h1     False      False      0.5.0
  md003  heading-style, header-style           True       True       0.5.0
  md018  no-missing-space-atx                  True       True       0.5.0
  md019  no-multiple-space-atx                 True       True       0.5.0
</pre></div>
<p>While I was doing my experiments, I also found that I was not handling the
case of zero matching plugins properly.  To be honest, it
just was not being handled at all.  To take care of that, I simply added
a check against <code>if show_rows</code> in the <code>__handle_argparse_subparser_list</code>
function, printing out a nicely formatted message if that case was encountered.</p>
<h3 id="plugins-info">Plugins Info<a class="headerlink" href="#plugins-info" title="Permanent link">¶</a></h3>
<p>The second thing on my list was to elevate the <code>plugins info</code> response to
be at the same level as for the <code>plugins list</code> command.  The effort that
I had put in before was easily a place holder, one that now needed to be
replaced.  I had two goals for this change: make it look better and display
relevant information to the command line user.</p>
<p>The first part of that was easy.  Leveraging my work in the previous
section to display thing in columns, I decided that the information
would be best presented in a simple two column format.  From my point
of view, that would nicely take care of cleaning up the display, producing
output like:</p>
<div class="highlight"><pre><span></span>  ITEM                 DESCRIPTION

  Id                   md001
  Name(s)              heading-increment,header-increment
  Short Description    Heading levels should only increment by one level at a time.
</pre></div>
<p>Sitting back for a bit and looking at that design, I went
through the mental exercise of trying to figure out why a user would
want to look at that information. The first candidate was a user that
wanted more information on a rule that was being shown in a rule
violation line.  The second candidate was a user that was looking
at a configuration item that they did not recognize in a configuration
file.</p>
<p>The information for both cases had some overlap.
For the configuration file case, I figured that a user would want to know
if the configuration item they see in the configuration file matches a
valid configuration item for the rule plugin.  For the output violation
case, I figured that a user would want to see information about why that
violation was raised.  I just had to find the right information that
would satisfy the user’s needs in both cases.</p>
<p>Without overloading the user, I decided that
there was no really good way of displaying the rule information that was
included in the rule’s documentation URL.  However, displaying that URL
so that they could look for more information there made sense to me.
In addition, the configuration item case could be somewhat handled in
a similar way.  If I presented a line detailing what the configuration
items were, any further information on those items could also be obtained
by referencing the URL.</p>
<p>Combining both designs together, I came up with the following sample
of what I wanted the sample output for Rule md001 to look like:</p>
<div class="highlight"><pre><span></span>  ITEM                 DESCRIPTION

  Id                   md001
  Name(s)              heading-increment,header-increment
  Short Description    Heading levels should only increment by one level at a time.
  Description Url      https://github.com/jackdewinter/pymarkdown/blob/main/docs/rules/rule_md001.md
  Configuration Items  front_matter_title
</pre></div>
<p>After modifying a scenario test for md001 and adding scenario tests for
md023 and the debug rule md999, it was time to write the code.</p>
<h3 id="making-it-work">Making It Work<a class="headerlink" href="#making-it-work" title="Permanent link">¶</a></h3>
<p>Once I had the sample output defined in the last section, the rest was
easy.  I went back to the <code>plugin_manager.py</code> module and the modules for
each plugin rule and added two optional properties: <code>plugin_url</code> and
<code>plugin_configuration</code>.  If the plugin rules provided these optional
properties, they would be displayed in the <code>plugins info</code> output, otherwise
they would be silently omitted.</p>
<p>With those two new properties added to the various plugin classes,
I then started to work on the <code>__handle_argparse_subparser_info</code>
function to make it output the information in columns.  As the
<code>columnar</code> package took care of the formatting, I just needed to organize
the data into a series of rows, each row containing a title column
and a description column.  That was quickly accomplished within
fifteen minutes of work.</p>
<p>Other than some slight issues with adjusting column widths in the test
output, everything worked right away.  The column adjustments that
needed to be made were completed within five minutes, and everything
was buttoned down after ten minutes.</p>
<p>While I am not sure it is perfect yet, the output is now definitely
something that I can be proud of!</p>
<h2 id="issue-10-moving-token-code-into-the-token-module">Issue 10: Moving Token Code Into the Token Module<a class="headerlink" href="#issue-10-moving-token-code-into-the-token-module" title="Permanent link">¶</a></h2>
<p>Getting ready to wrap things up on Saturday, I decided to look on the list and
find an easy item to resolve.  Lucky for me I found the issue detailed in
<a href="https://github.com/jackdewinter/pymarkdown/issues/10">Issue 10</a>.
While not a large task, it was a task in the direction that I wanted to move
more towards in the future.</p>
<p>During the development prior to the beta release, I spend a lot of time getting
things working properly.  That meant passing the GFM specification example tests
as well as my own tests, the ones verified against BabelMark.  While I tried
to make the best decisions each time, I admit freely that in some cases I added
code in a place that was less than optimal, knowing I would probably revisit
it later.</p>
<p>The development of rule <code>md022</code> was one of those cases.  To properly track the
number of blank lines before and after a Heading element, the rule needed to
be coded to understand if an end token was a container token, a leaf token,
or (by default) an inline token.  To that extent, I added the
<code>__is_container_end_token</code> function and the <code>__is_leaf_end_token</code> function to
the <code>rule_md_022.py</code> module to accomplish that goal.  Knowing that it may
not be the best place for those functions, I added an item to the Issues
List for later examination.</p>
<p>Was that the right thing to do?  Yes… and no.  I added those functions
to the <code>rule_md_022.py</code> module to get things working, as I was focusing on
verifying those rules.  I cannot remember exactly what was going through
my head at the time, but knowing that I needed to take a better look at
it when I had the bandwidth, I made a note in the Issues List in
<a href="https://github.com/jackdewinter/pymarkdown/commit/445c7a15bd926112146167eb1ac0d3f90c4f5de5#diff-75b56c206e0ed5079aed5347ecab9d243732195ecf4ed3cd478610fe86b105ec">the same commit</a>
as that change.  I simply noted that I wanted to double check it later
and went back to focusing on the code that I was working on.</p>
<p>If you ask me for my opinion on whether it was the right thing to do,
without more questions I could not properly answer either yes or no.
It depends.  However, one thing I am certain about.  Not fixing it right
away and not noting it down for later would be the wrong thing to do.
And to be honest, I am okay with knowing that I avoided doing the wrong
thing, even if I am not sure if I did the right thing.</p>
<h2 id="what-was-my-experience-so-far">What Was My Experience So Far?<a class="headerlink" href="#what-was-my-experience-so-far" title="Permanent link">¶</a></h2>
<p>If I am being honest, I expected to be dragging more about doing project
work at this stage of the project than I am.  I know that the last
10%-15% of a project is never the most fun part of the project, but
it is a critical stage for
any project.  I know of many projects that have died at the 85% complete
stage of the project, for many reasons.  From my experience, those
“mostly” finished projects result in a project that looks mostly there,
but ultimately comes across as unfinished and unpolished.
That is not what I want for the PyMarkdown project.</p>
<p>I am not sure where I am in that 15% range, but I know I want to get
past the beta-release stage into a normal release cycle.  I want to
take the time to do things right, document my work along the way,
and to ship something that people will use.  And convincing people
to use something that is mostly done is not as easy as convincing
people to use something that is done.  Even better, a project that
has a track record of fixing issues is one of the hallmarks I use
when looking at projects I want to use.  And that is where I want
to be.</p>
<p>Is that the right mindset to have at this stage of the project?
I am not sure.  I just know that is where I am at.  I want to
invest the time to deal with issues and make this a solid application.</p>
<p>That’s just who I am and where I am at.</p>
<h2 id="what-is-next">What is Next?<a class="headerlink" href="#what-is-next" title="Permanent link">¶</a></h2>
<p>Having started work on improving the Extensions support on Sunday morning,
I did not get it finished before I started writing this article on Sunday
afternoon.  Other than that, not sure yet, so stay tuned!</p>


             
 
                <p id="post-share-links">
    Like this post? Share on:
    <a href="https://twitter.com/intent/tweet?text=Markdown%20Linter%20-%20Getting%20Stuff%20Done&url=https%3A//jackdewinter.github.io/2021/06/14/markdown-linter-getting-stuff-done/&hashtags=markdown-linter,core-linter" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jackdewinter.github.io/2021/06/14/markdown-linter-getting-stuff-done/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
    ❄
    <a href="mailto:?subject=Markdown%20Linter%20-%20Getting%20Stuff%20Done&amp;body=https%3A//jackdewinter.github.io/2021/06/14/markdown-linter-getting-stuff-done/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
    </p>

            
            






<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="https://jackdewinter.github.io/2021/06/14/markdown-linter-getting-stuff-done/#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">

                        <script src="https://utteranc.es/client.js"
        data-repo="jackdewinter/jackdewinter.github.io"
        data-issue-term="markdown-linter-beta-release-a"
        data-label="Comments"
        data-theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://jackdewinter.github.io/2021/06/07/python-packages-the-birth-of-application_properties/" title="Previous: Python Packages - The Birth of Application_Properties">Python Packages - The Birth of Application_Properties</a></li>
                <li class="next-article"><a href="https://jackdewinter.github.io/2021/06/21/markdown-linter-elevating-extensions/" title="Next: Markdown Linter - Elevating Extensions">Markdown Linter - Elevating Extensions</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~19 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2021-06-14T00:00:00-07:00">Jun 14, 2021</time>
        <h4>Markdown Linter Beta Release</h4>
    <ul class="multi-parts-list">
            <li  class="active-part">
            Part 1: Markdown Linter - Getting Stuff Done
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/06/21/markdown-linter-elevating-extensions/" title="Markdown Linter - Elevating Extensions">Part 2: Markdown Linter - Elevating Extensions</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/06/28/markdown-linter-sometimes-you-have-to-go-backwards/" title="Markdown Linter - Sometimes You Have To Go Backwards...">Part 3: Markdown Linter - Sometimes You Have To Go Backwards...</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/07/12/markdown-linter-full-of-sound-and-fury/" title="Markdown Linter - Full Of Sound And Fury">Part 4: Markdown Linter - Full Of Sound And Fury</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/08/02/markdown-linter-making-progress-on-new-rules/" title="Markdown Linter - Making Progress On New Rules">Part 5: Markdown Linter - Making Progress On New Rules</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/07/26/markdown-linter-getting-back-to-new-rules/" title="Markdown Linter - Getting Back To New Rules">Part 6: Markdown Linter - Getting Back To New Rules</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/08/09/markdown-linter-continuing-progress-on-implementing-new-rules/" title="Markdown Linter - Continuing Progress On Implementing New Rules">Part 7: Markdown Linter - Continuing Progress On Implementing New Rules</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/08/16/markdown-linter-dealing-with-rule-md027/" title="Markdown Linter - Dealing With Rule Md027">Part 8: Markdown Linter - Dealing With Rule Md027</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/08/23/markdown-linter-three-more-rules/" title="Markdown Linter - Three More Rules">Part 9: Markdown Linter - Three More Rules</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/08/30/markdown-linter-another-three-done/" title="Markdown Linter - Another Three Done!">Part 10: Markdown Linter - Another Three Done!</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/09/13/markdown-linter-back-to-work/" title="Markdown Linter - Back To Work!">Part 11: Markdown Linter - Back To Work!</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/09/20/markdown-linter-race-to-the-finish/" title="Markdown Linter - Race To The Finish">Part 12: Markdown Linter - Race To The Finish</a>
            </li>
    </ul>
            <h4>Category</h4>
            <a class="category-link" href="https://jackdewinter.github.io/categories#software-quality-ref">Software Quality</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://jackdewinter.github.io/tags#core-linter-ref">core linter
                    <span>68</span>
</a></li>
                <li><a href="https://jackdewinter.github.io/tags#markdown-linter-ref">markdown linter
                    <span>86</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/jackdewinter" title="github-alt" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/jackdewinter/" title="linkedin" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://jackdewinter.github.io/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2021 by Jack De Winter and licensed under a <a rel="license"
  href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.

    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>