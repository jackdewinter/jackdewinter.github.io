<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Jack De Winter" />

        <meta name="description" content="Summary¶ In my last article, I focused on starting to gain experience with finding and improving performance on the PyMarkdown project using cPython and SnakeViz. In this article, I talk about applying that knowledge and doing more performance tuning on the project. Introduction¶ In the last article, I earned first-hand …
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="markdown linter, core linter, Software Quality, " />

<meta property="og:title" content="Markdown Linter - Road To Initial Release - Measured Performance Increases "/>
<meta property="og:url" content="https://jackdewinter.github.io/2021/03/01/markdown-linter-road-to-initial-release-measured-performance-increases/" />
<meta property="og:description" content="Summary¶ In my last article, I focused on starting to gain experience with finding and improving performance on the PyMarkdown project using cPython and SnakeViz. In this article, I talk about applying that knowledge and doing more performance tuning on the project. Introduction¶ In the last article, I earned first-hand …" />
<meta property="og:site_name" content="Jack&#39;s Digital Workbench" />
<meta property="og:article:author" content="Jack De Winter" />
<meta property="og:article:published_time" content="2021-03-01T00:00:00-08:00" />
<meta name="twitter:title" content="Markdown Linter - Road To Initial Release - Measured Performance Increases ">
<meta name="twitter:description" content="Summary¶ In my last article, I focused on starting to gain experience with finding and improving performance on the PyMarkdown project using cPython and SnakeViz. In this article, I talk about applying that knowledge and doing more performance tuning on the project. Introduction¶ In the last article, I earned first-hand …">

        <title>Markdown Linter - Road To Initial Release - Measured Performance Increases  · Jack&#39;s Digital Workbench
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://jackdewinter.github.io/theme/css/style.min.css?bec7d543">

        <link href="https://jackdewinter.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack&#39;s Digital Workbench - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://jackdewinter.github.io/"><span class=site-name>Jack's Digital Workbench</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jackdewinter.github.io
                                    >Home</a>
                                </li>
                                <li ><a href="https://jackdewinter.github.io/categories">Categories</a></li>
                                <li ><a href="https://jackdewinter.github.io/tags">Tags</a></li>
                                <li ><a href="https://jackdewinter.github.io/archives">Archives</a></li>
                                <li><form class="navbar-search" action="https://jackdewinter.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://jackdewinter.github.io/2021/03/01/markdown-linter-road-to-initial-release-measured-performance-increases/">
                Markdown Linter - Road To Initial Release - Measured Performance Increases
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-the-audience-for-this-article">What Is the Audience for This Article?</a></li>
<li><a href="#dipping-my-toes-into-the-waters-of-performance">Dipping My Toes Into the Waters of Performance</a><ul>
<li><a href="#starting-at-the-beginning">Starting At The Beginning</a></li>
</ul>
</li>
<li><a href="#plugin-performance">Plugin Performance</a><ul>
<li><a href="#excessive-use-of-the-len-function">Excessive Use of the Len function</a></li>
<li><a href="#going-back-to-logging">Going Back To Logging</a></li>
<li><a href="#bending-the-rules-is-part-of-the-game">Bending The Rules Is Part Of The Game</a></li>
<li><a href="#there-is-a-limit-to-bending-the-rules">There Is A Limit to Bending The Rules</a></li>
<li><a href="#having-some-fun">Having Some Fun</a></li>
<li><a href="#bending-or-breaking">Bending Or Breaking?</a></li>
<li><a href="#is-the-honeymoon-over">Is The Honeymoon Over?</a></li>
</ul>
</li>
<li><a href="#cleaning-up">Cleaning Up</a><ul>
<li><a href="#return-statements">Return Statements</a></li>
<li><a href="#removing-needless-default-variable-settings">Removing Needless Default Variable Settings</a></li>
<li><a href="#ternary-statements">Ternary Statements</a></li>
<li><a href="#single-characters-startswith-and-endswith">Single Characters StartsWith and EndsWith</a></li>
<li><a href="#when-in-rome">When In Rome…</a></li>
</ul>
</li>
<li><a href="#what-was-my-experience-so-far">What Was My Experience So Far?</a></li>
<li><a href="#what-is-next">What is Next?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>In my
<a href="https://jackdewinter.github.io/2021/02/22/markdown-linter-road-to-initial-release-starting-performance/">last article</a>, I focused on
starting to gain experience with finding and improving performance on the PyMarkdown
project using cPython and SnakeViz. In this article, I talk about applying that
knowledge and doing more performance tuning on the project.</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">¶</a></h2>
<p>In the last article, I earned first-hand experience in profiling the PyMarkdown
project.  While getting that learning accomplished, I also managed to get a big
performance boost from writing a simple facade in
front of the Python logging libraries.  That is probably the only simple and big
performance boost that I am going to get, so I know I am going to have to start
digging to find the more difficult items to optimize.  And I am ready for that
work!</p>
<p>From experience, I am also aware that not everything I am going to try will work.
I was lucky with the logging facade… that was just one big performance issue that
was extremely obvious.  This effort is still new, so I am hoping that I am still in
the honeymoon period.  While it is not the same as a
<a href="https://politicaldictionary.com/words/honeymoon/">political honeymoon period</a>,
it does share some characteristics with it.  Namely, it is during this period that
a lot of the performance improvements are obvious or easy to arrive at.  They might
entail some work, but there will be a very low failure rate.</p>
<p>Here is hoping that the honeymoon lasts for a while longer!</p>
<h2 id="what-is-the-audience-for-this-article">What Is the Audience for This Article?<a class="headerlink" href="#what-is-the-audience-for-this-article" title="Permanent link">¶</a></h2>
<p>While detailed more eloquently in
<a href="https://jackdewinter.github.io/2020/04/05/what-is-the-audience-for-my-blog/#what-is-the-audience-for-my-blog">this article</a>,
my goal for this technical article is to focus on the reasoning behind my solutions,
rather that the solutions themselves.  For a full record of the solutions presented in
this article, please go to this project’s GitHub repository and consult the
commits between
<a href="https://github.com/jackdewinter/pymarkdown/commit/88ad9002b296edc2763e498cb9fc2c99e9e74c60">13 Feb 2021</a>
and
<a href="https://github.com/jackdewinter/pymarkdown/commit/902fbfbdffb4fb9684e00a8d973e53814d393368">20 Feb 2021</a>.</p>
<h2 id="dipping-my-toes-into-the-waters-of-performance">Dipping My Toes Into the Waters of Performance<a class="headerlink" href="#dipping-my-toes-into-the-waters-of-performance" title="Permanent link">¶</a></h2>
<p>It was with a lot of nervousness that I started to work on performance improvements to
the project.  I know from experience that I can easily get lost in improving the
execution of an application, and this project is no different.  I need to make sure
that I focus on keeping this effort timeboxes so that I can get back to getting ready
for the initial release without too much of a delay.</p>
<p>In documenting this work, I have tried to keep the explanations to a minimum, but I
am also trying to balance that with solid explanations of why I chose that
improvement and the thought processes around that decision.  Please bear with me as
I try and find that balance point between those two competing goals!</p>
<h3 id="starting-at-the-beginning">Starting At The Beginning<a class="headerlink" href="#starting-at-the-beginning" title="Permanent link">¶</a></h3>
<p>Using
<a href="https://docs.python.org/3/library/profile.html#module-cProfile">cProfile</a>
and
<a href="https://jiffyclub.github.io/snakeviz/">SnakeViz</a>,
I captured information about running the PyMarkdown project over the Markdown pages that
comprise this website.  This is what I initially saw:</p>
<p><img alt="Before Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-1.png" title="Performance Before Changes"/></p>
<p>Looking at that information, the two lines that jumped out at me were the first
line, <code>debug</code>, and the fourth line, <code>isEnabledFor</code>.  These two functions were both part
of the recent work I did to improve the speed of debugging.  As logging was still showing
up high on the list, it was obvious to me that I needed to take another look and see
if I could fine tune it anymore.</p>
<p>After looking at the code, the one line that seemed to me to be the most expensive was:</p>
<div class="highlight"><pre><span></span>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__my_logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">DEBUG</span><span class="p">):</span>
</pre></div>
<p>The way I thought about it, every time that the <code>debug</code> logging method was called, this
function was being called in the base of the Python <code>logging</code> library.  While it was okay
to have that happen, I decided that it was too expensive to happen every time that
function was called, and it needed to be rewritten.</p>
<p>To reduce the cost of calling that library function, it was necessary to change the
logging requirements of the project to achieve a bit of “wiggle room” to allow for the
change to
occur.  In this situation, the requirement that I changed was the ability to dynamically
change the logging level at any time.  Because of the way that the PyMarkdown project
is setup, it is highly unlikely that anyone will want to change the logging level in
the middle of a Markdown file scan.  As such, it seemed like it was a good thing to
trade off on.</p>
<p>To replace that one line, I started by adding some extra code to the <code>ParserLogger</code>
class as follows:</p>
<div class="highlight"><pre><span></span>    <span class="n">__global_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">my_logger</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__my_logger</span> <span class="o">=</span> <span class="n">my_logger</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__is_info_enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__my_logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">INFO</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__is_debug_enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__my_logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">DEBUG</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__local_count</span> <span class="o">=</span> <span class="n">ParserLogger</span><span class="o">.</span><span class="n">__global_count</span>

    <span class="k">def</span> <span class="nf">__reset_if_needed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ParserLogger</span><span class="o">.</span><span class="n">__global_count</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__local_count</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__local_count</span> <span class="o">=</span> <span class="n">ParserLogger</span><span class="o">.</span><span class="n">__global_count</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__is_info_enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__my_logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">INFO</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__is_debug_enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__my_logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">DEBUG</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">sync_on_next_call</span><span class="p">():</span>
        <span class="sd">"""</span>
<span class="sd">        Sync the local instance of the logger on the next call.</span>
<span class="sd">        """</span>
        <span class="n">ParserLogger</span><span class="o">.</span><span class="n">__global_count</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
<p>Instead of calling the <code>isEnabledFor</code> function each time, I added some code to
cache the results of calling that function in <code>DEBUG</code> mode.
To keep the ability to change the logging level alive, I added the <code>sync_on_next_call</code>
function to set a class level member variable.  Then, instead of calling the
<code>isEnabledFor</code> function, I replaced that line with these lines:</p>
<div class="highlight"><pre><span></span>    <span class="bp">self</span><span class="o">.</span><span class="n">__reset_if_needed</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__is_debug_enabled</span><span class="p">:</span>
</pre></div>
<p>My hope was that by replacing the library call with the cached values, it would
improve performance.  But, as with any performance change, the only way to check is
to run tests after the change to show any changes.  Running those tests again, this
is the information that SnakeViz showed:</p>
<p><img alt="After Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-2.png" title="Performance After Changes"/></p>
<p>The results?  The total time for <code>debug</code> went from 1.3 seconds in first place to 0.5
seconds in fifth place.  The entry for <code>isEnabledFor</code> went from 0.7 seconds in fourth
place to so far down on the list that I did not bother looking for it.  It was just the
first improvement, but that was a good one!  It took me only minutes to finish up
that change by implementing the same functionality for the <code>INFO</code> related functions, before
moving on to the next change.</p>
<h2 id="plugin-performance">Plugin Performance<a class="headerlink" href="#plugin-performance" title="Permanent link">¶</a></h2>
<p>Before talking about this change, I want to address something important with measuring
performance: the measurements are volatile.  Especially with very fine differences
between measurements, it is very to measure the performance of whatever is
being changed without any changes, apply those changes, and then measure the performance
again with the changes.  In my case, I get things ready to go, use Git’s <code>stash</code> command
to save the changes, restoring the stash before I take the second set of measurements.
If I had not done that, I would have been very surprised that the time taken for the
<code>debug</code> statement to execute had crept up about 0.15 seconds.  I’ll speak about that
more at the end of this section.  </p>
<p><img alt="Before Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-3.png" title="Performance Before Changes"/></p>
<p>Examining the performance samples, the two lines that struck me as odd were the third line
containing <code>next_line</code> and the fourth line contained <code>next_token</code>.  Both these functions
exist as part of the plugin support and I could not think of any existing plugin that
required an examination of both lines and tokens.  At the same time, within a given
range, those two duration measurements were equal.<sup id="fnref:whatIsEqual"><a class="footnote-ref" href="#fn:whatIsEqual">1</a></sup></p>
<p>Given the requirement that PyMarkdown plugins only need to be called when they implement
a given function, I did some digging and tested this assignment out:</p>
<div class="highlight"><pre><span></span>        <span class="bp">self</span><span class="o">.</span><span class="n">__is_next_token_implemented_in_plugin</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">"next_token"</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="p">)</span>
</pre></div>
<p>Based on some digging I did, this assignment sets the value of the member variable
<code>__is_next_token_implemented_in_plugin</code> to indicate whether a given plugin
implements a given function, in this case the <code>next_token</code> function.  After tests
confirmed that it was working, I added some extra code to the <code>apply_configuration</code>
function:</p>
<div class="highlight"><pre><span></span>    <span class="k">if</span> <span class="n">next_plugin</span><span class="o">.</span><span class="n">plugin_instance</span><span class="o">.</span><span class="n">is_next_token_implemented_in_plugin</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__enabled_plugins_for_next_token</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_plugin</span><span class="p">)</span>
</pre></div>
<p>Finally, in the <code>next_token</code> function of the <code>PluginManager</code> class, I changed the
plugin notification code from:</p>
<div class="highlight"><pre><span></span>    <span class="k">for</span> <span class="n">next_plugin</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__enabled_plugins</span><span class="p">:</span>
</pre></div>
<p>to:</p>
<div class="highlight"><pre><span></span>    <span class="k">for</span> <span class="n">next_plugin</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__enabled_plugins_for_next_token</span><span class="p">:</span>
</pre></div>
<p>The result was that the plugin function <code>next_token</code> was only called when it was
defined in the plugin itself, not in the base class.  After repeating this process for
the <code>next_line</code> function, I ran the performance tests again:</p>
<p><img alt="After Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-4.png" title="Performance After Changes"/></p>
<p>Instead of those values both being called, it now looked like the roughly 5.6 seconds
was being split between the two of them.  Another good start!</p>
<p>As for the increase in the <code>debug</code> function execution time?  I am not sure what
did it, but the total time duration was roughly equal between the before and after
samples, as were the next 2 to 3 items in the sample.  That means the process is working!
But if I was only comparing the sample to the previous sample taken under different
circumstances, I may have come to some other conclusion.  The key to getting these
good measurements was to ensure I was taking the before and after measurements within
minutes of each other.</p>
<h3 id="excessive-use-of-the-len-function">Excessive Use of the Len function<a class="headerlink" href="#excessive-use-of-the-len-function" title="Permanent link">¶</a></h3>
<p>Following my now established process, I ran the performance tests again to look for the
next item that caught my eye:</p>
<p><img alt="Before Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-5.png" title="Performance Before Changes"/></p>
<p>This time, it was the line that includes <code>built-in method builtins.len</code>.  Parsing any
kind of language is string intensive, so I did expect this measurement to be high, but
I did not expect it to be that high.  Digging into the code, I found a few things
that I thought I could change to make the code perform better.</p>
<p>The first thing that I found were debug statements that included calls to <code>len</code> that
did not provide any additional information.  Statements like:</p>
<div class="highlight"><pre><span></span>    <span class="n">POGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"parsed leaf&gt;&gt;$"</span><span class="p">,</span> <span class="n">leaf_tokens</span><span class="p">)</span>
    <span class="n">POGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"parsed leaf&gt;&gt;$"</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">leaf_tokens</span><span class="p">))</span>
</pre></div>
<p>where the first statement is already implicitly providing the length of the array by
simply counting the number of elements displayed in the array’s debug output.  By
removing the second statement, I was able to make it more performant without changing
any information, just the way the information would be obtained in the future. Similarly,
there were cases where I was just logging information in the form of the second statement,
where the information from the first statement would suffice.  Both those changes were
easy to look for and make across the code base.</p>
<p>Another change that I did was to cache the results of the <code>len</code> function for a given
string within a single function.  There were quite a few cases where I was calling
the <code>len</code> function 2 to 4 times within a function, or more if I called it from within
a loop.  In those cases, I found the first place in that function where it was used, say:</p>
<div class="highlight"><pre><span></span>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">string_index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">string_to_parse</span><span class="p">):</span>
</pre></div>
<p>and replace it with the following code:</p>
<div class="highlight"><pre><span></span>    <span class="n">string_to_parse_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">string_to_parse</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
        <span class="n">string_index</span> <span class="o">&lt;</span> <span class="n">string_to_parse_length</span>
</pre></div>
<p>With that code tested, I then proceeded to replace every other instance of
<code>len(string_to_parse)</code> inside of that function with <code>string_to_parse_length</code>
before testing again.</p>
<p>That set of changes resulted in many modifications over most of the files in the project,
but it was accomplished quickly.  Once completed, the performance tests showed the
results:</p>
<p><img alt="After Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-6.png" title="Performance After Changes"/></p>
<p>The line that includes <code>built-in method builtins.len</code> went from 6th place at
0.42 seconds to 17th place at 0.11 seconds.  At a solid 0.3 second difference, it
was a good optimization!</p>
<h3 id="going-back-to-logging">Going Back To Logging<a class="headerlink" href="#going-back-to-logging" title="Permanent link">¶</a></h3>
<p>Performance is not something you can measure once and be done with it.  It must be
continuously examined again and again to see how the program peforms under different
circumstances.  When I looked at this set of performance tests:</p>
<p><img alt="Before Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-7.png" title="Performance Before Changes"/></p>
<p>I wondered if I had stopped optimizing the logging code too early.  As that code is the
most often called code in the project, I decided to spend some extra time looking at it.
When I did, I realized that if I traded my Don’t-Repeat-Yourself code for performance on
a limited scope, I could rewrite:</p>
<div class="highlight"><pre><span></span>        <span class="bp">self</span><span class="o">.</span><span class="n">__reset_if_needed</span><span class="p">()</span>
</pre></div>
<p>as:</p>
<div class="highlight"><pre><span></span>        <span class="k">if</span> <span class="n">ParserLogger</span><span class="o">.</span><span class="n">__global_count</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__local_count</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__reset_cache</span><span class="p">()</span>
</pre></div>
<p>By doing this, I was avoiding a function call by performing the same action
directly in the function, often referred to as inling.  Only in
those cases where the counts had changed, did the code need to reset the cache.
Given that I was pretty sure that changing logging levels was going to be an
extremely rare occurrence, I felt that this was an acceptable trade-off.</p>
<p>This was a very localized change, so it was easy to make and test:</p>
<p><img alt="After Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-8.png" title="Performance After Changes"/></p>
<p>With that small change, I reduced 1.8 seconds of duration between the first two lines
with 0.7 seconds of the new first line.  That was worth it!</p>
<h3 id="bending-the-rules-is-part-of-the-game">Bending The Rules Is Part Of The Game<a class="headerlink" href="#bending-the-rules-is-part-of-the-game" title="Permanent link">¶</a></h3>
<p>Looking at the next set of outputs from the performance tests:</p>
<p><img alt="Before Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-9.png" title="Performance Before Changes"/></p>
<p>one thing was obvious. I was not going to be able to avoid looking at the
<code>parse_line_for_container_blocks</code> function any longer.   But this one function was a tough
one.  This is the main function through which all the container processing and leaft
processing gets handled.  Without
it, the container block processing wouldn’t be done, and it wouldn’t be handing off the
leaf block processing as designed.  This was a pivotal function, but I was not seeing any
obvious places where I could make a good impact on the code’s performance.</p>
<p>Thinking a bit about how I made the requirements trade-offs for the previous items,
I started thinking about how I could make a similar trade in requirements here.
Unfortunately, nothing was coming to mind at all.  That is, until I looked through
the function and realized that there was one thing I hadn’t considered: removing the
logging.</p>
<p>Now, removing the logging itself would be harmful, as that logging had
helped me debug issues quite often, so the cost of outright removing the logging was
prohibitively high.  It would be like trying to tie your shoes in a knot while wearing a
cast on one hand and slinging a yoyo with the other hand.  However, I realized that if
I commented out the log statements, it would have the same effect as removing the log
statements.  Also, by commenting out those lines, I kept them in the project so that I
could add them back in when I needed them but leave them out during normal operation.</p>
<p>The trade-off here?  Time to debug would increase if I needed to uncomment the debug
statements.
Thinking about it for a bit, I decided that for this function it was a good trade-off
and commented out every log statement inside of the function.  That resulted in the
following results from the performance tests:</p>
<p><img alt="After Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-10.png" title="Performance After Changes"/></p>
<p>From 3rd place with 0.55 seconds down to 6th pace with 0.29 seconds.  At roughly half
the previous execution time, it was a good trade-off to make.  Granted, it is bending
the rules, but in a good way.</p>
<h3 id="there-is-a-limit-to-bending-the-rules">There Is A Limit to Bending The Rules<a class="headerlink" href="#there-is-a-limit-to-bending-the-rules" title="Permanent link">¶</a></h3>
<p>After looking at the current performance test results:</p>
<p><img alt="Before Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-11.png" title="Performance Before Changes"/></p>
<p>it seemed like it was a good process to try again with the <code>__process_inline_text_block</code>
function.  In my mind, I was worried that I was using this manner of performance
improvement too often, and I needed a hard limit.  In looking at this method,
through which all inline processing is done, I figured I was still within the limits
that I found acceptable.  I was close to what I considered the limit to be, but I
was confident that this change was within that bounds of that limit.</p>
<p>With that, I repeated the commenting process that I used in the last section on this
function, with the following results:</p>
<p><img alt="After Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-12.png" title="Performance After Changes"/></p>
<p>While not as dramatic as before, I dropped the <code>__process_inline_text_block</code> item from
3rd place and 0.37 seconds down to 13th and 0.12 seconds.</p>
<h3 id="having-some-fun">Having Some Fun<a class="headerlink" href="#having-some-fun" title="Permanent link">¶</a></h3>
<p>One of the fun things I love about doing performance testing and improving is that you get
to experiment with different approaches to see how they fare.  Looking at the latest
results:</p>
<p><img alt="Before Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-13.png" title="Performance Before Changes"/></p>
<p>I knew that I was going to have to get creative with the <code>index_any_of</code> function.  It is
a simple function but one that is heavily used in the <code>InlineProcessor</code> class.  During
the parsing of an inline block, the processor looks ahead to find the character which is
any one of a set of characters that denotes the possible start of an inline sequence.
Hence, the <code>index_any_of</code> is used to find the first instance of any of those characters.
The original version of this function was as follows:</p>
<div class="highlight"><pre><span></span>    <span class="n">source_text_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">source_text</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">start_index</span> <span class="o">&lt;</span> <span class="n">source_text_size</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">source_text</span><span class="p">[</span><span class="n">start_index</span><span class="p">]</span> <span class="ow">in</span> <span class="n">find_any</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">start_index</span>
        <span class="n">start_index</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
<p>Knowing that this enhancement would soon make my to-do list, I had been experimenting on
different algorithms on the side, trying to find one that was better than what I had.
While I tested four variations that failed, I found one that performed better if
the number of characters to find was under 15 characters.</p>
<p>During my reading on performance, one thing that was mentioned frequently was that many
of the Python builtins were more performant than Python code because it was precompiled
and optimized.  Taking a hint from that, my wining solution rewrote the above function
to leverage the builtin <code>index</code> as much as possible:</p>
<div class="highlight"><pre><span></span>    <span class="n">first_index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">next_character</span> <span class="ow">in</span> <span class="n">find_any</span><span class="p">:</span>
        <span class="n">found_index</span> <span class="o">=</span> <span class="n">source_text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">next_character</span><span class="p">,</span> <span class="n">start_index</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">found_index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">first_index</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">found_index</span> <span class="k">if</span> <span class="n">first_index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="nb">min</span><span class="p">(</span><span class="n">first_index</span><span class="p">,</span> <span class="n">found_index</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">first_index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">break</span>
    <span class="k">return</span> <span class="n">first_index</span>
</pre></div>
<p>In my simple tests, if I kept the length of the <code>find_any</code> variable to 15
characters or less, it won over the other algorithms.  But those “test” results
did not mean anything if the same impact was not present when tested against the
project’s code.  So, it was time to test it out on the ‘real’ code:</p>
<p><img alt="After Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-14.png" title="Performance After Changes"/></p>
<p>Moving from 3rd place with 3.8 seconds down to 9th place with 1.7 seconds of duration
was impressive! With my experience in performance tuning, I wasn’t sure if this was
one of those cases where it looked good in simple tests but failed when inserted
into the host project.  I was glad that it worked well in both situations!</p>
<h3 id="bending-or-breaking">Bending Or Breaking?<a class="headerlink" href="#bending-or-breaking" title="Permanent link">¶</a></h3>
<p>Remember back a couple of sections where I said there were times to bend the rules and
there were limits to how much you could bend them?  It was after looking at these
test results:</p>
<p><img alt="Before Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-15.png" title="Performance Before Changes"/></p>
<p>that I looked at the <code>__get_list_start_index</code>. I knew I had to be honest with myself about
which side of that limit line this function was on.  The first function that I had
applied that process to was easy to decide on as it was the most heavily trafficked part of
the actual parsing code.  It was a no-brainer to reduce the logging in that function.  The
second function was not as easy of a decision to make, but as the second most heavily
trafficked function, it made sense.</p>
<p>That left me with trying to figure out where the <code>__get_list_start_index</code> function stood
in that spectrum.  It was while I was looking at the code that I realized that I needed
to bump this function’s importance up the chain 1 level.  This function was not called
once but twice every time it was needed: once for unordered list block and the second
time for ordered list blocks.</p>
<p>As soon as I realized that fact, the decision was already made in my mind to go forward
with commenting out the debug statements.  Applying the process, I ran the performance
tests and held my breath:</p>
<p><img alt="After Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-16.png" title="Performance After Changes"/></p>
<p>Looking for the <code>__get_list_start_index</code> in the top 15, I did not see it at all.  When
I found it, it was down at the 96th position in the table.  From the 5th place in the
table with 0.29 second down to 96th place with 0.08 seconds.  That was cool.</p>
<p><img alt="After Changes" src="https://jackdewinter.github.io/images/road-to-release-4/13-Feb-part-16a.png" title="Performance After Changes"/></p>
<h3 id="is-the-honeymoon-over">Is The Honeymoon Over?<a class="headerlink" href="#is-the-honeymoon-over" title="Permanent link">¶</a></h3>
<p>With the returns diminishing, as I write this article I am wondering if the honeymoon
period for finding “easy” performance fixes is over.  I do not know if it is or not,
but I do know that I have optimized a lot of the top 10 functions in the list.
This means that I am going to have to work harder for less return from here on out.
I do have a couple of ideas on how to improve things further, but that is for another
article!</p>
<p>What is really evident to me though is that my current snapshot and seconds approach
to finding new items to try and optimize is almost hitting its limit.  It is becoming
harder to figure out what to try and optimize, and whether any changes help the
performance.  That is something that I am going to have to do some thinking on!</p>
<h2 id="cleaning-up">Cleaning Up<a class="headerlink" href="#cleaning-up" title="Permanent link">¶</a></h2>
<p>While I was poking around the code, there were a handful of things that I wanted to
clean up, as usual.  When measuring the performance of these changes, most of these
changes resulted in a performance improvement on the order of 0.1 or 0.3 seconds over 10
million iterations.  But more than that, they just seemed like it made sense to clean
these things up for code maintenance reasons.</p>
<h3 id="return-statements">Return Statements<a class="headerlink" href="#return-statements" title="Permanent link">¶</a></h3>
<p>Honest confession time.  I am not perfect.  When I am writing code, I get lost in the
moment, and write the code that I need to write, knowing I will come back and clean it
up later.  Sometimes, that is obvious.  Take this piece of code:</p>
<div class="highlight"><pre><span></span>        <span class="k">if</span> <span class="n">ParserHelper</span><span class="o">.</span><span class="n">is_length_less_than_or_equal_to</span><span class="p">(</span>
            <span class="n">adj_ws</span><span class="p">,</span> <span class="mi">3</span>
        <span class="p">)</span> <span class="ow">and</span> <span class="n">ParserHelper</span><span class="o">.</span><span class="n">is_character_at_index</span><span class="p">(</span>
            <span class="n">line_to_parse</span><span class="p">,</span> <span class="n">start_index</span><span class="p">,</span> <span class="n">BlockQuoteProcessor</span><span class="o">.</span><span class="n">__block_quote_character</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>
</pre></div>
<p>Yup, I wrote that.<sup id="fnref:facePalmOn"><a class="footnote-ref" href="#fn:facePalmOn">2</a></sup>  It took me less than 10 seconds to rewrite
it, but it was me that originally wrote that.  Not:</p>
<div class="highlight"><pre><span></span>        <span class="k">return</span> <span class="n">ParserHelper</span><span class="o">.</span><span class="n">is_length_less_than_or_equal_to</span><span class="p">(</span> <span class="n">adj_ws</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span> <span class="ow">and</span> \
            <span class="n">ParserHelper</span><span class="o">.</span><span class="n">is_character_at_index</span><span class="p">(</span><span class="n">line_to_parse</span><span class="p">,</span> <span class="n">start_index</span><span class="p">,</span>
                <span class="n">BlockQuoteProcessor</span><span class="o">.</span><span class="n">__block_quote_character</span><span class="p">)</span>
</pre></div>
<p>Which would have made much more sense.<sup id="fnref:facePalmOff"><a class="footnote-ref" href="#fn:facePalmOff">3</a></sup>  But then, we all do things
when we are writing code that we look back on, knowing we can do better.  Part of
my journey in writing this project is understanding that quality in a project is
very iterative.  For example, I found a couple more instance of that pattern in the
project’s code, but thankfully, not anymore.  I am learning to be okay with things like
that. I know I sometimes look at the code and go “What was I on when I wrote that?”, but
I also accept that it is an artifact of how I work.  Focus on the algorithm and clean up
the code later.  It just happens.</p>
<p>A more frequent find was to find blocks of statements like:</p>
<div class="highlight"><pre><span></span>    <span class="n">processed_line</span> <span class="o">+=</span> <span class="n">source_text</span><span class="p">[</span><span class="n">start_index</span><span class="p">:]</span>
    <span class="n">POGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"processed_line&gt;&gt;$&lt;&lt;"</span><span class="p">,</span> <span class="n">processed_line</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">processed_line</span>
</pre></div>
<p>In cases like this, I made sure that the debug statement was not needed and removed it.
At that point, I have one statement that adds another string to its value, and another
statement that returns it.  It was more legible and performant to do this:</p>
<div class="highlight"><pre><span></span>    <span class="k">return</span> <span class="n">processed_line</span> <span class="o">+</span> <span class="n">source_text</span><span class="p">[</span><span class="n">start_index</span><span class="p">:]</span>
</pre></div>
<h3 id="removing-needless-default-variable-settings">Removing Needless Default Variable Settings<a class="headerlink" href="#removing-needless-default-variable-settings" title="Permanent link">¶</a></h3>
<p>Another frequent find was a block of statements like:</p>
<div class="highlight"><pre><span></span>        <span class="n">did_add_definition</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">link_name</span> <span class="ow">in</span> <span class="n">LinkHelper</span><span class="o">.</span><span class="n">__link_definitions</span><span class="p">:</span>
            <span class="p">{</span><span class="n">something</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">{</span><span class="n">something</span><span class="p">}</span>
            <span class="n">did_add_definition</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
<p>Looking at those statements now, I realize that I probably added the <code>if</code> block or the
<code>else</code> block after the initial code was written.  While that was acceptable during the
building phase of the project, now that I was getting ready to release, I wanted to
clean scenarios like this up.</p>
<p>That is why I refactored the code to be:</p>
<div class="highlight"><pre><span></span>        <span class="k">if</span> <span class="n">link_name</span> <span class="ow">in</span> <span class="n">LinkHelper</span><span class="o">.</span><span class="n">__link_definitions</span><span class="p">:</span>
            <span class="p">{</span><span class="n">something</span><span class="p">}</span>
            <span class="n">did_add_definition</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">{</span><span class="n">something</span><span class="p">}</span>
            <span class="n">did_add_definition</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
<p>Basically, there is no need to do an assignment to False, only to have the <code>False</code> case
of the <code>if</code> statement set it to <code>True</code>.  To me, that is just a useless assignment that
can easily be avoided.  Also, from a readability viewpoint, that double assignment is
confusing to read.  For me, the <code>= False</code> case stuck in my head in the first example.
In the second example, both <code>= False</code> and <code>= True</code> stuck in my head at the same level.
To me, that just makes sense.</p>
<p>And looking over the code now, I realize I could have just set the variable
<code>did_add_definition</code> to <code>link_name not in LinkHelper.__link_definitions</code>.  The learning
continues.</p>
<h3 id="ternary-statements">Ternary Statements<a class="headerlink" href="#ternary-statements" title="Permanent link">¶</a></h3>
<p>I am not sure if everyone loves ternary statements, but I do.  For me, these statements
are very useful in cleanly encapsulating the setting of a single value depending on a
given condition.  From my point of view, why type in:</p>
<div class="highlight"><pre><span></span>    <span class="n">this_bq_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">init_bq</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">this_bq_count</span> <span class="o">=</span> <span class="n">init_bq</span>
</pre></div>
<p>when the much shorter:</p>
<div class="highlight"><pre><span></span>    <span class="n">this_bq_count</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">init_bq</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">init_bq</span>
</pre></div>
<p>is syntactically the same and more concise?</p>
<p>In all fairness, when I am work on writing the code, I will almost always write
it in a long form.  The best answer that I can give as to why I do that is that I believe
that
ternary statements are great for final states, but not so for intermediate states.  By
leaving the statements in their original long form, I feel more ready to change the
conditions and values if needed.  However, once those are nailed down, its ternary
statements as much as possible!</p>
<h3 id="single-characters-startswith-and-endswith">Single Characters StartsWith and EndsWith<a class="headerlink" href="#single-characters-startswith-and-endswith" title="Permanent link">¶</a></h3>
<p>This cleanup was more of a pet peeve than any kind of performance improvement.  If
possible, I prefer to keep character references and string references separate. Seeing
as Python does not have a concept of a single character that is distinct from a string,
that is difficult.  For me, I feel that being more “honest” about the input allows me
to better design algorithms that use those inputs to achieve their goals.</p>
<p>That is why I sent through the code and replaced occurrences of the <code>endswith</code> and
<code>startswith</code> function with their character-based equivalents.  That is why I
changed:</p>
<div class="highlight"><pre><span></span>    <span class="n">remaining_line</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">InlineHelper</span><span class="o">.</span><span class="n">backslash_character</span><span class="p">)</span>
</pre></div>
<p>to:</p>
<div class="highlight"><pre><span></span>    <span class="n">remaining_line</span> <span class="ow">and</span> <span class="n">remaining_line</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span><span class="n">InlineHelper</span><span class="o">.</span><span class="n">backslash_character</span>
</pre></div>
<p>While I realize that it might not seem like a big change, to me, it is a more readable
and more honest form of the condition.</p>
<!--- pyml disable-next-line no-trailing-punctuation -->
<h3 id="when-in-rome">When In Rome…<a class="headerlink" href="#when-in-rome" title="Permanent link">¶</a></h3>
<p>Looking around for hints on how to improve performance in Python, I came across a handful
of documents that gave good hints on how to be more Pythonic.  The best way that I can
describe the feeling of these documents is that I need to follow the doctrine: When in
Rome, do as the Romans do.  Basically, if I want to leverage the power of the Python
language, I need to use the features it provides in ways that add clarity and readability
to the code.</p>
<p>Because of the nature of this project, there is only one place in the entire project where
I found that a common Pythonic concept, list comprehensions, is useful.
<a href="https://book.pythontips.com/en/latest/comprehensions.html">List comprehensions</a>
are very Pythonic, involving the simplification of lists in a very performant manner.
I just have not found more than one use for them in the project.  Another very Pythonic
concept is the
<a href="https://book.pythontips.com/en/latest/global_&amp;_return..html#multiple-return-values">returning of multiple values</a>
from a function.  While trickery can be used in other languages to get some level of the
same effect, Python’s first-class support for tuples makes this concept very useful and
very easy to use.</p>
<p>A good example of this is when I changed this code:</p>
<div class="highlight"><pre><span></span>    <span class="n">adjusted_text_to_parse</span> <span class="o">=</span> <span class="n">position_marker</span><span class="o">.</span><span class="n">text_to_parse</span>
    <span class="n">adjusted_index_number</span> <span class="o">=</span> <span class="n">position_marker</span><span class="o">.</span><span class="n">index_number</span>
</pre></div>
<p>to this code:</p>
<div class="highlight"><pre><span></span>    <span class="n">adjusted_text_to_parse</span><span class="p">,</span> <span class="n">adjusted_index_number</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">position_marker</span><span class="o">.</span><span class="n">text_to_parse</span><span class="p">,</span>
        <span class="n">position_marker</span><span class="o">.</span><span class="n">index_number</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
<p>While these statements may look almost the same, I see a large difference in readability.
When I read the first example, the first questions that I usually have are around the
grouping of those two statements.  Are there blank lines before and after to separate them
into a group?  Are they related to each other?  These are some of the questions that I
think about when reading code.</p>
<p>The second example takes most of those questions and tosses them out the window.  By using
that specific grouping, I feel that I invert the questions I ask, reducing them to one
question: Is there any reason that any one statement should not be in that group?  For me,
that is usually a far easier question to answer.  In that above case, it is a logical
grouping for me as both variables deal with text and the current index into that text.
Used at the start of a function, they communicate that those variables are all being
set to their initial states.</p>
<p>Of course, there is also a simpler answer: I just think it looks more readable.</p>
<h2 id="what-was-my-experience-so-far">What Was My Experience So Far?<a class="headerlink" href="#what-was-my-experience-so-far" title="Permanent link">¶</a></h2>
<p>The first thing that comes to mind is to answer the question of whether the
project is still in the honeymoon period as far as performance tuning goes.
As I am still seeing reductions in durations
of about 50% and very few experiment failures, I am convinced that I still have at least
a little way to go before it ends.  I am not sure how far, but there still is some time.
But with my desire to get an initial release out and circulating, I know the right
decision currently is to focus on items in the issues list that are blocking the
release.  And that means focusing on those items and not on performance.  And I am okay
with that.</p>
<p>In terms of finding a balance and getting the project out there, I am feeling good
about that too.  Yes, I got sidetracked on performance. But honestly, I knew
that was going to happen.  I want to make the project better, and I know that focusing
on performance will increase the usability of the project.  I must remember
that people can easily focus on performance with no end in sight.  Unless I want to
succumb to that, I need to make sure I have good solid limits on performance tuning
and what is acceptable.  And I think I found that.</p>
<p>Through the performance enhancements, I realized something with this round of
enhancements that really had not dawned on me before. Performance, like other parts of
a project, is a requirement that is just as malleable as any other.  Some of the
improvements that I made may appear to be tightening screws here and there, but they
were also flexing and bending requirements.  Caching logging levels?  That was reducing
the requirement to change log levels during program execution.  Caching calls to the
<code>len</code> function?  That could be seen as reducing the readability of code by centralizing
that call in a location that might not be “correct” for some people.  Commenting out
debug statements?  That was a clear reduction of the immediate debuggability of those
functions to gain some performance.  In each case, it was finding a good balance
between those.  I may have “known” it before, but it was cool to understand it enough
at this point to be able to put it into words.</p>
<h2 id="what-is-next">What is Next?<a class="headerlink" href="#what-is-next" title="Permanent link">¶</a></h2>
<p>There is one more performance improvement that I will talk about next time, and it
is a doozy of one.  Other than that, I am focusing on getting all the items in
the priority 1 section resolved.</p>
<div class="footnote">
<hr/>
<ol>
<li id="fn:whatIsEqual">
<p>If you have ever looked at any polling, they will usually say that a poll is accurate to +/-3%, or something like that.  This same principle is usually applied to performance measurements, with similar levels of accuracy. <a class="footnote-backref" href="#fnref:whatIsEqual" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:facePalmOn">
<p>Imagine me doing a face palm when I read that piece of code. <a class="footnote-backref" href="#fnref:facePalmOn" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
<li id="fn:facePalmOff">
<p>Going to try and move on now.  Damage done. <a class="footnote-backref" href="#fnref:facePalmOff" title="Jump back to footnote 3 in the text">↩</a></p>
</li>
</ol>
</div>


             
 
                <p id="post-share-links">
    Like this post? Share on:
    <a href="https://twitter.com/intent/tweet?text=Markdown%20Linter%20-%20Road%20To%20Initial%20Release%20-%20Measured%20Performance%20Increases&url=https%3A//jackdewinter.github.io/2021/03/01/markdown-linter-road-to-initial-release-measured-performance-increases/&hashtags=markdown-linter,core-linter" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jackdewinter.github.io/2021/03/01/markdown-linter-road-to-initial-release-measured-performance-increases/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
    ❄
    <a href="mailto:?subject=Markdown%20Linter%20-%20Road%20To%20Initial%20Release%20-%20Measured%20Performance%20Increases&amp;body=https%3A//jackdewinter.github.io/2021/03/01/markdown-linter-road-to-initial-release-measured-performance-increases/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>
    </p>

            
            






<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="https://jackdewinter.github.io/2021/03/01/markdown-linter-road-to-initial-release-measured-performance-increases/#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">

                        <script src="https://utteranc.es/client.js"
        data-repo="jackdewinter/jackdewinter.github.io"
        data-issue-term="markdown-linter-road-to-release-d"
        data-label="Comments"
        data-theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://jackdewinter.github.io/2021/02/28/autism-and-dementia/" title="Previous: Autism And Dementia">Autism And Dementia</a></li>
                <li class="next-article"><a href="https://jackdewinter.github.io/2021/03/08/markdown-linter-road-to-initial-release-cleaning-up-the-list-and-readability/" title="Next: Markdown Linter - Road To Initial Release - Cleaning Up The List and Readability">Markdown Linter - Road To Initial Release - Cleaning Up The List and Readability</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~21 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2021-03-01T00:00:00-08:00">Mar 1, 2021</time>
        <h4>Markdown Linter Road To Initial Release</h4>
    <ul class="multi-parts-list">
            <li >
            <a href="https://jackdewinter.github.io/2021/02/08/markdown-linter-road-to-initial-release-learned-and-useful-things/" title="Markdown Linter - Road To Initial Release - Learned and Useful Things">Part 1: Markdown Linter - Road To Initial Release - Learned and Useful Things</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/02/15/markdown-linter-road-to-initial-release-refactoring/" title="Markdown Linter - Road To Initial Release - Refactoring">Part 2: Markdown Linter - Road To Initial Release - Refactoring</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/02/22/markdown-linter-road-to-initial-release-starting-performance/" title="Markdown Linter - Road To Initial Release - Starting Performance">Part 3: Markdown Linter - Road To Initial Release - Starting Performance</a>
            </li>
            <li  class="active-part">
            Part 4: Markdown Linter - Road To Initial Release - Measured Performance Increases
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/03/08/markdown-linter-road-to-initial-release-cleaning-up-the-list-and-readability/" title="Markdown Linter - Road To Initial Release - Cleaning Up The List and Readability">Part 5: Markdown Linter - Road To Initial Release - Cleaning Up The List and Readability</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/03/15/markdown-linter-road-to-initial-release-front-matter/" title="Markdown Linter - Road To Initial Release - Front-Matter">Part 6: Markdown Linter - Road To Initial Release - Front-Matter</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/03/22/markdown-linter-road-to-initial-release-configuration/" title="Markdown Linter - Road To Initial Release - Configuration">Part 7: Markdown Linter - Road To Initial Release - Configuration</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/03/29/markdown-linter-road-to-initial-release-command-lines/" title="Markdown Linter - Road To Initial Release - Command Lines">Part 8: Markdown Linter - Road To Initial Release - Command Lines</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/04/05/markdown-linter-road-to-initial-release-cleaning-up/" title="Markdown Linter - Road To Initial Release - Cleaning Up">Part 9: Markdown Linter - Road To Initial Release - Cleaning Up</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/04/12/markdown-linter-road-to-initial-release-creating-a-package/" title="Markdown Linter - Road To Initial Release - Creating A Package">Part 10: Markdown Linter - Road To Initial Release - Creating A Package</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/04/19/markdown-linter-road-to-initial-release-gearing-up-for-plugins/" title="Markdown Linter - Road To Initial Release - Gearing Up For Plugins">Part 11: Markdown Linter - Road To Initial Release - Gearing Up For Plugins</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/05/03/markdown-linter-road-to-initial-release-finalizing-plugins/" title="Markdown Linter - Road To Initial Release - Finalizing Plugins">Part 12: Markdown Linter - Road To Initial Release - Finalizing Plugins</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/05/10/markdown-linter-road-to-initial-release-fine-tuning-plugins/" title="Markdown Linter - Road To Initial Release - Fine Tuning Plugins">Part 13: Markdown Linter - Road To Initial Release - Fine Tuning Plugins</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/05/17/markdown-linter-road-to-initial-release-dotting-the-is/" title="Markdown Linter - Road To Initial Release - Dotting The Is">Part 14: Markdown Linter - Road To Initial Release - Dotting The Is</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/05/24/markdown-linter-road-to-initial-release-crossing-the-ts/" title="Markdown Linter - Road To Initial Release - Crossing The Ts">Part 15: Markdown Linter - Road To Initial Release - Crossing The Ts</a>
            </li>
            <li >
            <a href="https://jackdewinter.github.io/2021/05/31/markdown-linter-road-to-initial-release-triple-check-everything/" title="Markdown Linter - Road To Initial Release - Triple Check Everything">Part 16: Markdown Linter - Road To Initial Release - Triple Check Everything</a>
            </li>
    </ul>
            <h4>Category</h4>
            <a class="category-link" href="https://jackdewinter.github.io/categories#software-quality-ref">Software Quality</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://jackdewinter.github.io/tags#core-linter-ref">core linter
                    <span>81</span>
</a></li>
                <li><a href="https://jackdewinter.github.io/tags#markdown-linter-ref">markdown linter
                    <span>99</span>
</a></li>
            </ul>
<h4>Stay in Touch</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/jackdewinter" title="github-alt" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/jackdewinter/" title="linkedin" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%" fill="#0077b5"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
    </a>
    <a href="https://jackdewinter.github.io/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2021 by Jack De Winter and licensed under a <a rel="license"
  href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.

    </div>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>